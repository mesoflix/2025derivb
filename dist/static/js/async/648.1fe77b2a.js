"use strict";(self.webpackChunkbot=self.webpackChunkbot||[]).push([["648"],{6010:function(){},3247:function(e,t,a){a.r(t),a.d(t,{default:()=>iN});var s,n,l=a(85893),i=a(67294),r=a(96877),o=a(6753),d=a(92198),c=a(36754),_=a(12838);let u=e=>{let{is_client_store_initialized:t,landing_company_shortcode:a=" ",currency:s=" ",email:n=" ",is_logged_in:l=" ",loginid:r=" ",residence:o=" ",last_name:u=" ",first_name:x=" "}=e,m=new URLSearchParams(window.location.search),h="reset_password"===_.fr.getQueryParameter("action"),p=m.get("code")&&h,{data:j}=(0,c.Z)(!0),{cs_chat_livechat:b}=j;(0,i.useEffect)(()=>{if(t&&b){var e;null==(e=window.LiveChatWidget)||e.init()}},[t,b]),(0,i.useEffect)(()=>{if(!p&&t){var e;null==(e=window.LiveChatWidget)||e.on("ready",e=>{var t,i,c,_,m,h;"minimized"===e.state.visibility&&(null==(i=window.LiveChatWidget)||i.call("hide"));let{utm_source:p,utm_medium:j,utm_campaign:b}=JSON.parse(d.Z.get("utm_data")||"{}"),v={is_logged_in:String(l),utm_source:p||" ",utm_medium:j||" ",utm_campaign:b||" ",loginid:l?r:" ",landing_company_shortcode:l?a:" ",currency:l?s:" ",residence:l?o:" ",email:l?n:" "};null==(t=window.LiveChatWidget)||t.call("set_session_variables",v),l?(null==(c=window.LiveChatWidget)||c.call("set_customer_email",n),null==(_=window.LiveChatWidget)||_.call("set_customer_name",`${x} ${u}`)):(null==(m=window.LiveChatWidget)||m.call("set_customer_email"," "),null==(h=window.LiveChatWidget)||h.call("set_customer_name"," "))})}},[n,p,r,l,a,t,s,x,u,o])};var x=a(23302),m=a(11977),h=a(94662),p=a(48836),j=a(42575);let b=()=>{let{client:e}=(0,j.oR)(),{account_settings:t,landing_company_shortcode:a}=e,{tnc_status:s}=t||{};return s&&0===s[a]};var v=a(12977),y=a(35275),g=a(72461),f=a(48059),N=a(2502),C=a(68909);let k=(0,r.Pi)(()=>{let{isAuthorized:e}=(0,p.T)(),{client:t}=(0,j.oR)(),{is_cr_account:a}=t,[s,n]=i.useState(!1),{isDesktop:r}=(0,N.F)(),o=b();i.useEffect(()=>{o?n(!0):n(!1)},[o]);let d=async()=>{e&&(await h.D.api.send({tnc_approval:1}),t.landing_company_shortcode&&t.updateTncStatus(t.landing_company_shortcode,1),n(!1))};return(0,l.jsx)(C.Z,{className:"tnc-status-update-modal-wrapper",is_open:s,has_close_icon:!1,width:"44rem",children:(0,l.jsxs)("div",{className:"tnc-status-update-modal",children:[(0,l.jsx)(v.x,{size:r?"sm":"md",bold:!0,children:(0,l.jsx)(f.Xx,{i18n_default_text:"Updated T&C's"})}),(0,l.jsxs)("div",{className:"tnc-status-update-modal__text-container",children:[(0,l.jsx)(v.x,{size:r?"sm":"md",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Please review our updated <0>terms and conditions</0>.",components:[(0,l.jsx)(y.r,{className:"tnc-link",size:r?"sm":"md",href:a?"https://deriv.com/eu/terms-and-conditions#clients":"https://deriv.com/terms-and-conditions#clients"},0)]})}),(0,l.jsx)(v.x,{size:r?"sm":"md",children:(0,l.jsx)(f.Xx,{i18n_default_text:"By continuing you understand and accept the changes."})})]}),(0,l.jsx)("div",{className:"tnc-status-update-modal__button",children:(0,l.jsx)(g.zx,{onClick:d,size:"md",variant:"primary",label:(0,l.jsx)(f.Xx,{i18n_default_text:"Continue"})})})]})})});var w=a(33281),T=a(20296),E=a.n(T),S=a(76298),I=((s={}).MOVE="move",s.TOP="top",s.RIGHT="right",s.BOTTOM="bottom",s.LEFT="left",s.TOP_RIGHT="top-right",s.BOTTOM_RIGHT="bottom-right",s.BOTTOM_LEFT="bottom-left",s.TOP_LEFT="top-left",s.BODY_REF="body",s);let A=e=>{let{setZIndex:t}=e,a=document.getElementsByClassName("draggable");if(a.length)t(Array.from(a).reduce((e,t)=>Math.max(e,parseInt(window.getComputedStyle(t).zIndex)||0),0)+3)},R=e=>{let{prevWidth:t,leftOffset:a,boundaryRect:s,initialSelfRight:n,resize_direction:l,newWidth:i,minWidth:r,clientX:o,self:d}=e,c=(null==s?void 0:s.left)??0,_=(null==s?void 0:s.width)??0,u=c+a+5,x=(null==d?void 0:d.left)??0,m=c+_-7;if(l.includes("left"))return i>=r&&o>u?i:o<u+10?m-u-(m-n)-10:t;if(l.includes("right")){if(i>=r&&o<m)return i;if(o>m)return m-x}return t},L=e=>{let{prevHeight:t,topOffset:a,boundaryRect:s,initialSelfBottom:n,resize_direction:l,newHeight:i,minHeight:r,clientY:o,self:d}=e,c=(null==s?void 0:s.top)??0,_=(null==s?void 0:s.height)??0,u=c+a+5,x=(null==d?void 0:d.top)??0,m=c+_-7;if(l.includes("top"))return i>=r&&o>u?i:o<u+10?m-u-(m-n)-10:t;if(l.includes("bottom")){if(i>=r&&o<m)return i;if(o>m)return m-x}return t},O=e=>{let{children:t,boundary:a,initialValues:s={width:400,height:400,xAxis:0,yAxis:0},minWidth:n=100,minHeight:r=100,enableResizing:o=!1,enableDragging:d=!0,header:c="",onClose:_}=e,[u,x]=(0,i.useState)({x:s.xAxis,y:s.yAxis}),[m,h]=(0,i.useState)({width:s.width,height:s.height}),[p,j]=(0,i.useState)(100),b=(0,i.useRef)(!1),[v,y]=(0,i.useState)(!1),g=(0,i.useRef)(null),[f,N]=(0,i.useState)(document.querySelector(a??I.BODY_REF));(0,i.useEffect)(()=>{h({width:s.width,height:s.height}),x({x:s.xAxis,y:s.yAxis})},[s.height,s.width,s.xAxis,s.yAxis]),(0,i.useEffect)(()=>{N(document.querySelector(a??I.BODY_REF)),A({setZIndex:j})},[a]);let C=(e,t)=>{var a,l,i,c,_;if(null==e||e.stopPropagation(),A({setZIndex:j}),!t)return;b.current=t!==I.MOVE&&o,y(t===I.MOVE&&d);let p=null==f?void 0:f.getBoundingClientRect(),v=(null==f?void 0:f.offsetTop)??0,N=(null==f?void 0:f.offsetLeft)??0,C=(null==e?void 0:e.clientX)??0,k=(null==e?void 0:e.clientY)??0,w=(null==m?void 0:m.width)??s.width,T=(null==m?void 0:m.height)??s.height,E=(null==u?void 0:u.x)??0,S=(null==u?void 0:u.y)??0,O=(null==(l=g.current)||null==(a=l.getBoundingClientRect())?void 0:a.right)??m.width,M=(null==(c=g.current)||null==(i=c.getBoundingClientRect())?void 0:i.bottom)??m.height,D={},U=null==(_=g.current)?void 0:_.querySelector("#draggable-content-body");if(U){let{style:e}=U;e&&"none"!==e.pointerEvents&&(D={...e},e.pointerEvents="none")}let Z=e=>{if(!e)return;let{clientX:t,clientY:a}=e,s=t-C,n=a-k;try{b.current?F(s,n,t,a):z(s,n)}catch(e){P()}},F=(e,a,s,l)=>{var i;let o=(null==u?void 0:u.x)??0,d=(null==u?void 0:u.y)??0,c=w,_=T;t.includes(I.RIGHT)?c+=e:t.includes(I.LEFT)&&(o=e+E,c-=e),t.includes(I.BOTTOM)?_+=a:t.includes(I.TOP)&&(d=a+S,_-=a),x(e=>{let t=Math.max(d,v+5),a=Math.max(o,N+5);return{x:c<=n?e.x:a,y:_<=r?e.y:t}});let m=null==(i=g.current)?void 0:i.getBoundingClientRect();h(e=>({width:R({prevWidth:e.width,leftOffset:N,boundaryRect:p,initialSelfRight:O,resize_direction:t,newWidth:c,minWidth:n,clientX:s,self:m}),height:L({prevHeight:e.height,topOffset:v,boundaryRect:p,initialSelfBottom:M,resize_direction:t,newHeight:_,minHeight:r,clientY:l,self:m})}))},z=(e,t)=>{x({x:Math.min(Math.max(e+E,N+5),N+((null==p?void 0:p.width)??0)-m.width-9),y:Math.min(Math.max(t+S,v+5),v+((null==p?void 0:p.height)??0)-m.height-9)})},P=()=>{if(y(!1),b.current=!1,null==U?void 0:U.style)try{Object.assign(U.style,D)}catch{U.style.pointerEvents="unset"}f&&(window.removeEventListener("mousemove",Z),window.removeEventListener("mouseup",P))};f&&(window.addEventListener("mousemove",Z),window.addEventListener("mouseup",P))};return(0,l.jsx)("div",{className:`draggable ${v?"dragging":""}`,style:{position:"absolute",top:u.y,left:u.x,zIndex:p},onMouseDown:()=>A({setZIndex:j}),onKeyDown:()=>A({setZIndex:j}),"data-testid":"dt_react_draggable",tabIndex:0,children:(0,l.jsxs)("div",{ref:g,className:"draggable-content","data-testid":"dt_react_draggable_content",style:{width:m.width,height:m.height},children:[(0,l.jsxs)("div",{id:"draggable-content__header","data-testid":"dt_react_draggable_handler",className:"draggable-content__header",onMouseDown:e=>C(e,I.MOVE),onKeyDown:e=>"Enter"===e.key&&C(null,I.MOVE),tabIndex:0,children:[(0,l.jsx)("div",{className:"draggable-content__header__title",children:c}),(0,l.jsx)("div",{className:"draggable-content__header__close","data-testid":"dt_react_draggable-close-modal",onClick:_,children:(0,l.jsx)(S.Z,{height:"20px",width:"20px",fill:"var(--text-general)",className:"icon-general-fill-path"})})]}),(0,l.jsx)("span",{className:"draggable-content__body",id:"draggable-content-body",children:t}),o&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"resizable-handle__top","data-testid":"dt_resizable-handle__top",onKeyDown:e=>"Enter"===e.key&&C(null,I.MOVE),onMouseDown:e=>C(e,I.TOP),tabIndex:0}),(0,l.jsx)("div",{className:"resizable-handle__right","data-testid":"dt_resizable-handle__right",onKeyDown:e=>"Enter"===e.key&&C(null,I.MOVE),onMouseDown:e=>C(e,I.RIGHT),tabIndex:0}),(0,l.jsx)("div",{className:"resizable-handle__bottom","data-testid":"dt_resizable-handle__bottom",onKeyDown:e=>"Enter"===e.key&&C(null,I.MOVE),onMouseDown:e=>C(e,I.BOTTOM),tabIndex:0}),(0,l.jsx)("div",{className:"resizable-handle__left","data-testid":"dt_resizable-handle__left",onKeyDown:e=>"Enter"===e.key&&C(null,I.MOVE),onMouseDown:e=>C(e,I.LEFT),tabIndex:0}),(0,l.jsx)("div",{className:"resizable-handle__top-right","data-testid":"dt_resizable-handle__top-right",onKeyDown:e=>"Enter"===e.key&&C(null,I.MOVE),onMouseDown:e=>C(e,I.TOP_RIGHT),tabIndex:0}),(0,l.jsx)("div",{className:"resizable-handle__bottom-right","data-testid":"dt_resizable-handle__bottom-right",onKeyDown:e=>"Enter"===e.key&&C(null,I.MOVE),onMouseDown:e=>C(e,I.BOTTOM_RIGHT),tabIndex:0}),(0,l.jsx)("div",{className:"resizable-handle__bottom-left","data-testid":"dt_resizable-handle__bottom-left",onKeyDown:e=>"Enter"===e.key&&C(null,I.MOVE),onMouseDown:e=>C(e,I.BOTTOM_LEFT),tabIndex:0}),(0,l.jsx)("div",{className:"resizable-handle__top-left","data-testid":"dt_resizable-handle__top-left",onKeyDown:e=>"Enter"===e.key&&C(null,I.MOVE),onMouseDown:e=>C(e,I.TOP_LEFT),tabIndex:0})]})]})})},M=e=>{let{boundary:t,children:a,onClose:s,enableResizing:n=!1,enableDragging:r=!0,header:o="",minHeight:d=100,minWidth:c=100,modalHeight:_=400,modalWidth:u=400}=e,[x,m]=(0,i.useState)(!1),h=(window.innerWidth-u)/2,p=(window.innerHeight-_)/2,[j,b]=i.useState({width:u,height:_,xAxis:h>=0?h:0,yAxis:p>=0?p:0}),v=E()(()=>{let e=window.innerWidth>u?u:window.innerWidth-50,t=window.innerHeight>_?_:window.innerHeight-50,a=(window.innerWidth-e)/2,s=(window.innerHeight-t)/2;b({width:e,height:t,xAxis:a>=0?a:0,yAxis:s>=0?s:0}),m(!0)},0);return i.useEffect(()=>(v(),window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v)}),[v]),(0,l.jsx)("div",{id:"draggable_resize_container",children:x&&(0,l.jsx)(O,{boundary:t,initialValues:j,minWidth:c,minHeight:d,enableResizing:n,enableDragging:r,header:o,onClose:s,children:a})})};var D=a(63387),U=a.n(D),Z=a(24561),F=a(42075),z=a(88026),P=a(74385);let B={FRXAUDCAD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexAudcadIcon}))),FRXAUDCHF:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexAudchfIcon}))),FRXAUDJPY:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexAudjpyIcon}))),FRXAUDNZD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexAudnzdIcon}))),FRXAUDPLN:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexAudsgdIcon}))),FRXAUDUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexAudusdIcon}))),FRXBROUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexCadchfIcon}))),FRXEURAUD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexEuraudIcon}))),FRXEURCAD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexEurcadIcon}))),FRXEURCHF:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexEurchfIcon}))),FRXEURGBP:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexEurgbpIcon}))),FRXEURJPY:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexEurjpyIcon}))),FRXEURNZD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexEurnzdIcon}))),FRXEURUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexEurusdIcon}))),FRXGBPAUD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexGbpaudIcon}))),FRXGBPCAD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexGbpcadIcon}))),FRXGBPCHF:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexGbpchfIcon}))),FRXGBPJPY:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexGbpjpyIcon}))),FRXGBPNOK:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexGbpnokIcon}))),FRXGBPUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexGbpusdIcon}))),FRXGBPNZD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexGbpnzdIcon}))),FRXNZDJPY:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexNzdjpnIcon}))),FRXNZDUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexNzdusdIcon}))),FRXUSDCAD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexUsdcadIcon}))),FRXUSDCHF:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexUsdchfIcon}))),FRXUSDJPY:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexUsdjpyIcon}))),FRXUSDNOK:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexUsdnokIcon}))),FRXUSDPLN:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexUsdplnIcon}))),FRXUSDSEK:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexUsdsekIcon}))),FRXUSDMXN:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketForexUsdmxnIcon}))),FRXXAGUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCommoditySilverusdIcon}))),FRXXAUUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCommodityGoldusdIcon}))),FRXXPDUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCommodityPalladiumusdIcon}))),FRXXPTUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCommodityPlatinumusdIcon}))),OTC_AEX:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketIndicesNetherlands25Icon}))),OTC_AS51:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketIndicesAustralia200Icon}))),OTC_DJI:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketIndicesWallStreet30Icon}))),OTC_FCHI:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketIndicesFrance40Icon}))),OTC_FTSE:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketIndicesUk100Icon}))),OTC_GDAXI:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketIndicesUk100Icon}))),OTC_HSI:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketIndicesHongKong50Icon}))),OTC_IBEX35:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketIndicesSpain35Icon}))),OTC_N225:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketIndicesJapan225Icon}))),OTC_NDX:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketIndicesUsTech100Icon}))),OTC_SPC:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketIndicesUs500Icon}))),OTC_SSMI:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketIndicesSwiss20Icon}))),OTC_SX5E:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketIndicesEuro50Icon}))),R_10:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedVolatility10Icon}))),R_25:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedVolatility25Icon}))),R_50:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedVolatility50Icon}))),R_75:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedVolatility75Icon}))),R_100:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedVolatility100Icon}))),BOOM300N:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedBoom300Icon}))),BOOM500:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedBoom500Icon}))),BOOM1000:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedBoom1000Icon}))),CRASH300N:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedCrash300Icon}))),CRASH500:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedCrash500Icon}))),CRASH1000:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedCrash1000Icon}))),RDBEAR:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedBearIcon}))),RDBULL:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedBullIcon}))),STPRNG:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedStepIndices100Icon}))),STPRNG2:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedStepIndices200Icon}))),STPRNG3:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedStepIndices300Icon}))),STPRNG4:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedStepIndices400Icon}))),STPRNG5:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedStepIndices500Icon}))),WLDAUD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedAudBasketIcon}))),WLDEUR:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedEurBasketIcon}))),WLDGBP:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedGbpBasketIcon}))),WLDXAU:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedGoldBasketIcon}))),WLDUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedUsdBasketIcon}))),"1HZ10V":(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedVolatility101sIcon}))),"1HZ25V":(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedVolatility251sIcon}))),"1HZ50V":(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedVolatility501sIcon}))),"1HZ75V":(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedVolatility751sIcon}))),"1HZ100V":(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedVolatility1001sIcon}))),"1HZ150V":(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedVolatility1501sIcon}))),"1HZ200V":(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedVolatility2001sIcon}))),"1HZ250V":(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedVolatility2501sIcon}))),"1HZ300V":(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedVolatility3001sIcon}))),JD10:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedJump10Icon}))),JD25:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedJump25Icon}))),JD50:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedJump50Icon}))),JD75:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedJump75Icon}))),JD100:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedJump100Icon}))),JD150:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedJump150Icon}))),JD200:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketDerivedJump200Icon}))),CRYBCHUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyBchusdIcon}))),CRYBNBUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyBnbusdIcon}))),CRYBTCLTC:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyBtcltcIcon}))),CRYIOTUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyIotusdIcon}))),CRYNEOUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyNeousdIcon}))),CRYOMGUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyOmgusdIcon}))),CRYTRXUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyTrxusdIcon}))),CRYBTCETH:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyBtcethIcon}))),CRYZECUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyZecusdIcon}))),CRYXMRUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyXmrusdIcon}))),CRYXMLUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyXlmusdIcon}))),CRYXRPUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyXrpusdIcon}))),CRYBTCUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyBtcusdIcon}))),CRYDSHUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyDshusdIcon}))),CRYETHUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyEthusdIcon}))),CRYEOSUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyEosusdIcon}))),CRYLTCUSD:(0,i.lazy)(()=>a.e("203").then(a.bind(a,90817)).then(e=>({default:e.MarketCryptocurrencyLtcusdIcon}))),unknown:(0,i.lazy)(()=>a.e("733").then(a.bind(a,57136)).then(e=>({default:e.IllustrativeMarketsIcon})))},X=e=>{let{type:t,size:a}=e,s=B[null==t?void 0:t.toUpperCase()]||B.unknown;return(0,l.jsx)(i.Suspense,{fallback:null,children:(0,l.jsx)(s,{iconSize:a??"xs"})})};var $=a(20874);let H={ACCU:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesAccumulatorStayInIcon}))),DIGITDIFF:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesDigitsDiffersIcon}))),DIGITEVEN:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesDigitsEvenIcon}))),DIGITMATCH:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesDigitsMatchesIcon}))),DIGITODD:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesDigitsOddIcon}))),DIGITOVER:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesDigitsOverIcon}))),DIGITUNDER:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesDigitsUnderIcon}))),TICKHIGH:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesHighsAndLowsHighIcon}))),TICKLOW:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesHighsAndLowsLowIcon}))),NOTOUCH:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesHighsAndLowsNoTouchIcon}))),ONETOUCH:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesHighsAndLowsTouchIcon}))),EXPIRYRANGE:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesInsAndOutsEndsInIcon}))),EXPIRYMISS:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesInsAndOutsEndsOutIcon}))),UPORDOWN:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesInsAndOutsGoesOutIcon}))),RANGE:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesInsAndOutsStaysInIcon}))),MULTDOWN:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesMultipliersDownIcon}))),MULTUP:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesMultipliersUpIcon}))),CALLSPREAD:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesSpreadsCallIcon}))),PUTSPREAD:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesSpreadsPutIcon}))),ASIAND:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsAsianDownIcon}))),ASIANU:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsAsianUpIcon}))),PUT:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsFallIcon}))),PUTE:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsFallIcon}))),RUNLOW:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsOnlyDownsIcon}))),RUNHIGH:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsOnlyUpsIcon}))),RESETPUT:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsResetDownIcon}))),RESETCALL:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsResetUpIcon}))),CALL:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsRiseIcon}))),CALLE:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsRiseIcon}))),HIGHER:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesHighsAndLowsHigherIcon}))),LOWER:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesHighsAndLowsLowerIcon}))),unknown:(0,i.lazy)(()=>a.e("733").then(a.bind(a,57136)).then(e=>({default:e.IllustrativeMarketsIcon})))},V=e=>{let{type:t,size:a,className:s}=e,n=H[null==t?void 0:t.toUpperCase()]||H.unknown;return(0,l.jsx)(i.Suspense,{fallback:null,children:(0,l.jsx)(n,{iconSize:a??"xs",className:s})})},q="transaction-details-modal-desktop",G=e=>{let{label:t,extra_classes:a=[],loader:s=!1}=e;return(0,l.jsx)("div",{className:U()(`${q}__table-cell`,...a),children:s?(0,l.jsx)(W,{}):t})},Y=e=>{let{columns:t}=e;return(0,l.jsx)("div",{className:U()(`${q}__table-row`,`${q}__table-header`),children:null==t?void 0:t.map(e=>(0,l.jsx)(G,{extra_classes:[e.extra_class?`${q}__table-cell${e.extra_class}`:""],label:e.label,loader:!1},e.key))})},K=e=>{let{message:t,icon:a}=e;return(0,l.jsx)("div",{className:`${q}__icon-wrapper`,children:(0,l.jsx)($.Z,{alignment:(0,P.rK)()?"right":"left",message:t,zIndex:"9999",children:a})})},W=()=>(0,l.jsx)(Z.ZP,{className:"transactions__loader-text","data-testid":"transaction_details_table_cell_loader",height:10,width:30,speed:3,backgroundColor:"var(--general-section-2)",foregroundColor:"var(--general-hover)",children:(0,l.jsx)("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"60",height:"12"})});function J(e){let{result:t,result_columns:a,transactions:s,transaction_columns:n,account:i,balance:r}=e;return(0,l.jsxs)("div",{"data-testid":"transaction_details_tables",className:"transaction-details-tables",children:[(0,l.jsxs)("div",{className:U()(`${q}__table-container`,`${q}__table-container__top-table`),children:[(0,l.jsx)(Y,{columns:n}),null==s?void 0:s.map(e=>{let{data:t,type:a}=e;if(a===F.i.CONTRACT){var s,n;return(0,l.jsxs)("div",{className:`${q}__table-row`,children:[(0,l.jsx)(G,{label:(null==t?void 0:t.date_start)&&(0,m.fcq)(null==t?void 0:t.date_start,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]"),extra_classes:[`${q}__table-cell--grow-big`]}),(0,l.jsx)(G,{label:null==t||null==(s=t.transaction_ids)?void 0:s.buy,extra_classes:[`${q}__table-cell--grow-mid`]}),(0,l.jsx)(G,{label:(0,l.jsx)(K,{message:null==t?void 0:t.display_name,icon:(0,l.jsx)(X,{type:null==t?void 0:t.underlying,size:"sm"})})}),(0,l.jsx)(G,{label:(0,l.jsx)(K,{message:(0,z.getContractTypeName)(t),icon:(0,l.jsx)(V,{type:null==t?void 0:t.contract_type,size:"sm"})})}),(0,l.jsx)(G,{label:null==t?void 0:t.entry_tick,loader:!(null==t?void 0:t.entry_tick)}),(0,l.jsx)(G,{label:null==t?void 0:t.exit_tick,loader:!t.exit_tick}),(0,l.jsx)(G,{label:Math.abs((null==t?void 0:t.buy_price)??0).toFixed(2)}),(0,l.jsx)(G,{label:(0,l.jsx)("div",{className:U()({[`${q}__profit--win`]:(null==t?void 0:t.profit)>0,[`${q}__profit--loss`]:(null==t?void 0:t.profit)<0}),children:Math.abs((null==t?void 0:t.profit)??0).toFixed(2)}),loader:!t.is_completed})]},null==t||null==(n=t.transaction_ids)?void 0:n.buy)}return(0,l.jsx)("div",{className:`${q}__table-row`,children:(0,l.jsx)("div",{className:`${q}__divider`,children:(0,l.jsx)("div",{className:"transactions__divider-line"})})},`transaction-row-divider-${t}`)})]}),(0,l.jsxs)("div",{className:U()(`${q}__table-container`,`${q}__table-container__bottom-table`),children:[(0,l.jsx)(Y,{columns:a}),(0,l.jsxs)("div",{className:`${q}__table-row`,children:[(0,l.jsx)(G,{label:i,extra_classes:[`${q}__table-cell--grow-mid`]}),(0,l.jsx)(G,{label:null==t?void 0:t.number_of_runs}),(0,l.jsx)(G,{label:Math.abs((null==t?void 0:t.total_stake)??0).toFixed(2)}),(0,l.jsx)(G,{label:Math.abs((null==t?void 0:t.total_payout)??0).toFixed(2)}),(0,l.jsx)(G,{label:null==t?void 0:t.won_contracts}),(0,l.jsx)(G,{label:null==t?void 0:t.lost_contracts,extra_classes:[`${q}__loss`]}),(0,l.jsx)(G,{label:(0,l.jsx)("div",{className:U()((null==t?void 0:t.total_profit)&&{[`${q}__profit--win`]:(null==t?void 0:t.total_profit)>0,[`${q}__profit--loss`]:(null==t?void 0:t.total_profit)<0}),"data-testid":"transaction_details_table_profit",children:Math.abs((null==t?void 0:t.total_profit)??0).toFixed(2)})}),(0,l.jsx)(G,{label:r})]})]})]})}let Q=()=>[{key:"timestamp",label:(0,f.NC)("Timestamp"),extra_class:"--grow-big"},{key:"reference",label:(0,f.NC)("Reference"),extra_class:"--grow-mid"},{key:"market",label:(0,f.NC)("Market")},{key:"contract_type",label:(0,f.NC)("Trade type")},{key:"entry_tick",label:(0,f.NC)("Entry spot")},{key:"exit_tick",label:(0,f.NC)("Exit spot")},{key:"buy_price",label:(0,f.NC)("Buy price")},{key:"profit",label:(0,f.NC)("Profit/Loss")}],ee=()=>[{key:"account",label:(0,f.NC)("Account"),extra_class:"--grow-mid"},{key:"no_of_runs",label:(0,f.NC)("No. of runs")},{key:"total_stake",label:(0,f.NC)("Total stake")},{key:"total_payout",label:(0,f.NC)("Total payout")},{key:"win",label:(0,f.NC)("Win")},{key:"loss",label:(0,f.NC)("Loss")},{key:"total_profit",label:(0,f.NC)("Total profit/loss")},{key:"balance",label:(0,f.NC)("Balance")}],et=(0,r.Pi)(()=>{let{client:e}=(0,j.oR)(),{loginid:t,balance:a}=e,{transactions:s}=(0,j.oR)(),{toggleTransactionDetailsModal:n,is_transaction_details_modal_open:r,transactions:o}=s,{statistics:d}=s;return(0,l.jsx)(i.Fragment,{children:r&&(0,l.jsx)(M,{boundary:".main",header:(0,f.NC)("Transactions detailed summary"),onClose:()=>n(!1),modalWidth:882,modalHeight:404,minWidth:882,minHeight:404,enableResizing:!0,children:(0,l.jsx)(J,{transaction_columns:Q(),transactions:o,result_columns:ee(),result:d,account:t??"",balance:a??0})})})});var ea=a(6687),es=a(75915),en=a(64010),el=a(44810),ei=a(23182),er=a(30069);let eo=i.memo(e=>{var t,a;let{className:s,column:n,is_footer:i,passthrough:r,row:o}=e;if(!n)return null;let{col_index:d,title:c}=n,_=null==o?void 0:o[d],u=(0,m.MOe)(null==o||null==(t=o.contract_info)?void 0:t.contract_type),x=(0,m.Yeo)(null==o||null==(a=o.contract_info)?void 0:a.contract_type);return(0,l.jsxs)("div",{className:U()(s,n.col_index),children:[!i&&(0,l.jsx)("div",{className:U()(`${n.col_index}__row-title`,"data-list__row-title"),children:n.renderHeader?n.renderHeader({title:c,is_vanilla:x}):c}),(0,l.jsx)("div",{className:"data-list__row-content",children:n.renderCellContent?n.renderCellContent({cell_value:_,is_footer:i,passthrough:r,row_obj:o,is_vanilla:x,is_turbos:u}):_})]})});var ed=a(79655),ec=a(89471);let e_=(e,t)=>{let a=i.useMemo(()=>E()(e,t),[]);return i.useEffect(()=>a.cancel,[]),a},eu=i.memo(e=>{let{action_desc:t,destination_link:a,row_gap:s,row_key:n,rowRenderer:r,measure:o,is_dynamic_height:d,...c}=e,[_,u]=i.useState(!1),x=(0,ec.tm)(),h=e_(()=>u(!1),5e3),p=()=>{t&&(u(!_),h())},j=e=>{(0,m.K9$)(p,e)};return i.useEffect(()=>{x()&&d&&(null==o||o())},[_,d,o]),(0,l.jsx)("div",{className:"data-list__row--wrapper",style:{paddingBottom:`${s||0}px`},children:a?(0,l.jsx)(ed.OL,{className:"data-list__item--wrapper",id:`dt_reports_contract_${n}`,to:{pathname:a,state:{from_table_row:!0}},children:(0,l.jsx)("div",{className:"data-list__item",children:r({measure:o,...c})})}):(0,l.jsx)("div",{className:U()("data-list__item--wrapper",{"data-list__item--dynamic-height-wrapper":d}),children:t?(0,l.jsx)("div",{className:"data-list__item",onClick:j,onKeyDown:j,children:_?(0,l.jsx)("div",{className:"data-list__desc--wrapper",children:t.component&&(0,l.jsx)("div",{children:t.component})}):r({measure:o,...c})}):(0,l.jsx)("div",{className:"data-list__item",children:r({measure:o,...c})})})})}),ex=ei.aV,em=ei.qj,eh=ei.Z8,ep=i.memo(e=>{let{children:t,className:a,data_source:s,footer:n,getRowSize:r,keyMapper:o,onRowsRendered:d,onScroll:c,setListRef:_,overscanRowCount:u,...x}=e,[h,p]=i.useState(!0),[j,b]=i.useState(!1),[v,y]=i.useState(0),g=i.useRef(),f=i.useRef(null),N=i.useRef({}),C=i.useRef(null);C.current=s;let k=!r,w=i.useCallback(()=>{s.forEach((e,t)=>{let a=(null==o?void 0:o(e))||`${t}-0`;N.current[a]=!0})},[s,o]);i.useEffect(()=>{k&&(g.current=new ei.t1({fixedWidth:!0,keyMapper:e=>(null==C?void 0:C.current)&&e<(null==C?void 0:C.current.length)&&(null==o?void 0:o(C.current[e]))||e})),w(),p(!1)},[]),i.useEffect(()=>{if(k){var e,t;null==(t=f.current)||null==(e=t.recomputeGridSize)||e.call(t,{columnIndex:0,rowIndex:0})}w()},[s,k,w]);let T=e=>{let{style:t,index:a,key:n,parent:i}=e,{getRowAction:r,passthrough:d,row_gap:c}=x,_=s[a],{action_type:u,shortcode:h,purchase_time:p,transaction_time:b,id:v}=_;if((0,m.JIr)(u,h,p||b)){let e=!!(null==s?void 0:s.find(e=>"sell"===e.action_type&&e.id===v));_={..._,is_sold:e}}let y=r&&r(_),f="string"==typeof y?y:void 0,C="object"==typeof y?y:void 0,w=(null==o?void 0:o(_))||n,T=function(){let{measure:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.jsx)(eu,{action_desc:C,destination_link:f,is_new_row:!N.current[w],is_scrolling:j,measure:e,passthrough:d,row_gap:c,row_key:w,row:_,rowRenderer:x.rowRenderer,is_dynamic_height:k})};return k&&g.current?(0,l.jsx)(eh,{cache:g.current,columnIndex:0,rowIndex:a,parent:i,children:e=>{let{measure:a}=e;return(0,l.jsx)("div",{style:t,children:T({measure:a})})}},w):(0,l.jsx)("div",{style:t,children:T()},w)},E=e=>{let t;clearTimeout(t),j||b(!0),t=setTimeout(()=>{h||b(!1)},200),y(e.target.scrollTop),"function"==typeof c&&c(e)},S=e=>{f.current=e,null==_||_(e)};return h?(0,l.jsx)("div",{}):(0,l.jsxs)("div",{"data-testid":"dt_data_list",className:U()(a,"data-list",{[`${a}__data-list`]:a}),children:[(0,l.jsxs)("div",{className:"data-list__body-wrapper",children:[(0,l.jsx)("div",{className:U()("data-list__body",{[`${a}__data-list-body`]:a}),children:(0,l.jsx)(em,{children:e=>{var t,n;let{width:i,height:o}=e;return(0,l.jsx)(el.Z,{style:{height:o,width:i},children:(0,l.jsx)(er.Z,{onScroll:E,autohide:!0,is_bypassed:(0,m.tqC)(),children:(0,l.jsx)(ex,{className:a,deferredMeasurementCache:null==g?void 0:g.current,height:o,onRowsRendered:d,overscanRowCount:u||1,ref:e=>S(e),rowCount:s.length,rowHeight:k&&(null==g||null==(t=g.current)?void 0:t.rowHeight)?null==g||null==(n=g.current)?void 0:n.rowHeight:r||0,rowRenderer:T,scrollingResetTimeInterval:0,width:i,...(0,m.nIE)()?{scrollTop:v,autoHeight:!0}:{onScroll:e=>E({target:e})}})})})}})}),t]}),n&&(0,l.jsx)("div",{className:U()("data-list__footer",{[`${a}__data-list-footer`]:a}),children:(0,l.jsx)(i.Fragment,{children:x.rowRenderer({row:n,is_footer:!0})})})]})});ep.displayName="DataList",ep.Cell=eo;let ej=e=>{let{date:t,time:a}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"journal__text-date",children:t})," | ",(0,l.jsx)("span",{className:"journal__text-time",children:a})]})};var eb=a(45762),ev=a(75544);let ey=i.forwardRef((e,t)=>{let{className:a,classNameLabel:s,disabled:n=!1,id:r,label:o,label_font_size:d="xs",label_lineHeight:c="unset",defaultChecked:_,onChange:u,value:x=!1,withTabIndex:m=0,greyDisabled:h=!1,has_error:p=!1,...j}=e,[b,v]=i.useState(_||x);return i.useEffect(()=>{v(_||x)},[x,_]),(0,l.jsxs)("label",{htmlFor:r,onClick:e=>e.stopPropagation(),className:U()("dc-checkbox",a,{"dc-checkbox--disabled":n}),children:[(0,l.jsxs)("span",{children:[(0,l.jsx)("input",{className:"dc-checkbox__input",type:"checkbox",id:r,ref:t,disabled:n,onChange:e=>{e.persist(),v(!b),null==u||u(e)},checked:b,...j}),(0,l.jsx)("span",{className:U()("dc-checkbox__box",{"dc-checkbox__box--active":b,"dc-checkbox__box--disabled":n,"dc-checkbox--grey-disabled":n&&h}),tabIndex:m,onKeyDown:e=>{n||"Enter"!==e.key&&32!==e.keyCode||(null==u||u(e),v(!b))},children:!!b&&(0,l.jsx)(ev.Z,{})})]}),(0,l.jsx)(ea.Z,{size:d,lineHeight:c,className:U()("dc-checkbox__label",s,{"dc-checkbox__label--error":p}),children:o})]})});ey.displayName="Checkbox";let eg=e=>{let{wrapper_ref:t,checked_filters:a,filters:s,filterMessage:n,className:i}=e;return(0,l.jsx)("div",{ref:t,className:i,children:s.map(e=>{let t=Array.isArray(a)&&a.includes(e.id);return(0,l.jsx)(ey,{checked:t,label:e.label,onChange:()=>n(!t,e.id),name:e.id,defaultChecked:t},e.id)})})},ef=e=>{let{toggle_ref:t,checked_filters:a,filters:s,filterMessage:n,is_filter_dialog_visible:r,toggleFilterDialog:o}=e,d=i.useRef(null);return(0,eb.t)(d,o,e=>{var a;return r&&!(null==(a=t.current)?void 0:a.contains(e.target))}),(0,l.jsx)(eg,{wrapper_ref:d,checked_filters:a,filters:s,filterMessage:n,className:"filter-dialog"})},eN=e=>{let{logType:t,className:a,extra:s}=e;return(0,l.jsx)("div",{className:U()("journal__text",a),children:(()=>{switch(t){case z.LogTypes.LOAD_BLOCK:return(0,f.NC)("Blocks are loaded successfully");case z.LogTypes.NOT_OFFERED:return(0,f.NC)("Resale of this contract is not offered.");case z.LogTypes.PURCHASE:{let{longcode:e,transaction_id:t}=s;return(0,l.jsx)(f.Xx,{i18n_default_text:"<0>Bought</0>: {{longcode}} (ID: {{transaction_id}})",values:{longcode:e,transaction_id:t},components:[(0,l.jsx)(ea.Z,{size:"xxs",styles:{color:"var(--status-info)"}},0)],options:{interpolation:{escapeValue:!1}}})}case z.LogTypes.SELL:{let{sold_for:e}=s;return(0,l.jsx)(f.Xx,{i18n_default_text:"<0>Sold for</0>: {{sold_for}}",values:{sold_for:e},components:[(0,l.jsx)(ea.Z,{size:"xxs",styles:{color:"var(--status-warning)"}},0)]})}case z.LogTypes.PROFIT:{let{currency:e,profit:t}=s;return(0,l.jsx)(f.Xx,{i18n_default_text:"Profit amount: <0>{{profit}}</0>",values:{profit:`${(0,m.lby)(e,t,!0)} ${(0,m.O$T)(e)}`},components:[(0,l.jsx)(ea.Z,{size:"xxs",styles:{color:"var(--status-success)"}},0)]})}case z.LogTypes.LOST:{let{currency:e,profit:t}=s;return(0,l.jsx)(f.Xx,{i18n_default_text:"Loss amount: <0>{{profit}}</0>",values:{profit:`${(0,m.lby)(e,t,!0)} ${(0,m.O$T)(e)}`},components:[(0,l.jsx)(ea.Z,{size:"xxs",styles:{color:"var(--status-danger)"}},0)]})}case z.LogTypes.WELCOME_BACK:{let{current_currency:e}=s;if(e)return(0,l.jsx)(f.Xx,{i18n_default_text:"Welcome back! Your messages have been restored. You are using your {{current_currency}} account.",values:{current_currency:e}});return(0,l.jsx)(f.Xx,{i18n_default_text:"Welcome back! Your messages have been restored."})}case z.LogTypes.WELCOME:{let{current_currency:e}=s;if(e)return(0,l.jsx)(f.Xx,{i18n_default_text:"You are using your {{current_currency}} account.",values:{current_currency:e}});break}default:return null}})()})},eC=(e,t,a,s,n)=>{switch(t){case z.MessageTypes.SUCCESS:return(0,l.jsx)(eN,{logType:e,extra:s,className:a});case z.MessageTypes.NOTIFY:if("function"==typeof e)return(0,l.jsx)("div",{className:U()("journal__text",a),children:e(n)});return(0,l.jsx)("div",{className:U()("journal__text",a),children:e});case z.MessageTypes.ERROR:return(0,l.jsx)("div",{className:"journal__text--error journal__text",children:e});default:return null}},ek=e=>{let{row:t,measure:a}=e,{date:s,time:n,message:i,message_type:r,className:o,extra:d}=t,c=ej({date:s,time:n});return(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"list__animation","data-testid":"mock-css-transition",children:(0,l.jsxs)("div",{className:"journal__item",dir:(0,P.rK)()?"rtl":"ltr",children:[(0,l.jsx)("div",{className:"journal__item-content",children:eC(i,r,o,d,a)}),(0,l.jsx)("div",{className:"journal__text-datetime",children:c})]})})})},ew=e=>{let{is_mobile:t}=e;return(0,l.jsxs)(Z.ZP,{className:U()("journal__loader",{"journal__loader--mobile":t}),speed:3,width:350,height:92,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)",children:[(0,l.jsx)("rect",{x:"15",y:"15",rx:"5",ry:"5",width:"320",height:"40"}),(0,l.jsx)("rect",{x:"15",y:"60",rx:"5",ry:"5",width:"180",height:"7"})]})};var eT=a(81262);let eE=()=>{let e=new Date,t=e.getUTCFullYear(),a=(e.getUTCMonth()+1).toString().padStart(2,"0"),s=e.getUTCDate().toString().padStart(2,"0"),n=e.getUTCHours().toString().padStart(2,"0"),l=e.getUTCMinutes().toString().padStart(2,"0"),i=e.getUTCSeconds().toString().padStart(2,"0");return`${t}-${a}-${s} ${n}${l}${i}`},eS=(e,t)=>{let{profit:a,sold_for:s,longcode:n,transaction_id:l,current_currency:i}=t;switch(e){case z.LogTypes.LOAD_BLOCK:return(0,f.NC)("Blocks are loaded successfully");case z.LogTypes.NOT_OFFERED:return(0,f.NC)("Resale of this contract is not offered.");case z.LogTypes.PURCHASE:return(0,f.NC)("Bought: {{longcode}} (ID: {{transaction_id}})",{longcode:n,transaction_id:l});case z.LogTypes.SELL:return(0,f.NC)("Sold for: {{sold_for}}",{sold_for:s});case z.LogTypes.PROFIT:return(0,f.NC)("Profit amount: {{profit}}",{profit:a});case z.LogTypes.LOST:return(0,f.NC)("Loss amount: {{profit}}",{profit:a});case z.LogTypes.WELCOME_BACK:if(i)return(0,f.NC)("Welcome back! Your messages have been restored. You are using your {{current_currency}} account.",{current_currency:i});return(0,f.NC)("Welcome back! Your messages have been restored.");case z.LogTypes.WELCOME:if(i)return(0,f.NC)("You are using your {{current_currency}} account.",{current_currency:i});break;default:return""}},eI=(e,t)=>{let a=encodeURI(`data:text/csv;charset=utf-8, ${t}`),s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download",`${e} ${eE()}.csv`),document.body.appendChild(s),s.click();let n=s.parentNode;n&&s&&(null==n?void 0:n.contains(s))&&(null==n||n.removeChild(s))};var eA=a(76937);let eR=(0,r.Pi)(e=>{let t,a,{tab:s}=e,{run_panel:n,transactions:i,journal:r}=(0,j.oR)(),{is_clear_stat_disabled:o,is_running:d}=n,{filtered_messages:c}=r,{transactions:_}=i,u=!1;return"transactions"===s?(t=()=>{let e=[[(0,f.NC)("Market"),(0,f.NC)("Reference ID (buy)"),(0,f.NC)("Reference ID (sell)"),(0,f.NC)("Barrier"),(0,f.NC)("Start Time"),(0,f.NC)("Entry Spot"),(0,f.NC)("Entry Spot Time"),(0,f.NC)("Exit Spot"),(0,f.NC)("Exit Spot Time"),(0,f.NC)("Buy Price"),(0,f.NC)("Profit/Loss")]];_.forEach(t=>{let{data:a}=t;"string"!=typeof a&&e.push([a.display_name,a.transaction_ids.buy,a.transaction_ids.sell,a.barrier,a.date_start,a.entry_tick,a.entry_tick_time,a.exit_tick,a.exit_tick_time,a.buy_price,a.profit])});let t=e.map(e=>e.join(",")).join("\n");eI((0,f.NC)("Transactions"),t)},u=!_.length||d,a=(0,f.NC)("Download your transaction history."),_.length||(a=(0,f.NC)("No transaction or activity yet."))):"journal"===s&&(t=()=>{let e=[[(0,f.NC)("Date"),(0,f.NC)("Time"),(0,f.NC)("Message")]];c.map(t=>{let a;a="success"!==t.message_type?JSON.stringify(t.message):eS(t.message.toString(),t.extra);let s=[t.date,t.time,null==a?void 0:a.replace("&#x2F;","/")];e.push(s)});let t=e.map(e=>e.join(",")).join("\n");eI((0,f.NC)("Journal"),t)},a=(0,f.NC)("Download your journal."),(u=o)&&(a=(0,f.NC)("No transaction or activity yet."))),d&&(a=(0,f.NC)("Download is unavailable while your bot is running.")),(0,l.jsx)($.Z,{className:"run-panel__info",classNameBubble:"run-panel__info--bubble",alignment:"bottom",message:a,zIndex:"5",children:(0,l.jsx)(eA.Z,{id:"download-button",disabled:u,className:"download__button",onClick:t,secondary:!0,children:(0,l.jsx)(f.Xx,{i18n_default_text:"Download"})})})});var eL=a(29643);let eO=e=>{let{checked_filters:t,filters:a,filterMessage:s,is_filter_dialog_visible:n,toggleFilterDialog:r}=e,o=i.useRef(null);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"journal-tools__container",children:[(0,l.jsx)(eR,{tab:"journal"}),(0,l.jsxs)("div",{ref:o,className:"journal-tools__container-filter",onClick:r,children:[(0,l.jsx)(ea.Z,{size:"xs",className:"journal-tools__container-filter--label",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Filters"})}),(0,l.jsx)(eL.Z,{height:"16px",width:"16px",fill:"var(--text-general)"})]})]}),(0,l.jsx)(eT.Z,{in:n,classNames:{enter:"filter-dialog--enter",enterDone:"filter-dialog--enter-done",exit:"filter-dialog--exit"},timeout:150,unmountOnExit:!0,children:(0,l.jsx)(ef,{toggle_ref:o,checked_filters:t,filters:a,filterMessage:s,is_filter_dialog_visible:n,toggleFilterDialog:r})})]})},eM=(0,r.Pi)(()=>{let{journal:e,run_panel:t}=(0,j.oR)(),{checked_filters:a,filterMessage:s,filters:n,filtered_messages:i,is_filter_dialog_visible:r,toggleFilterDialog:o,unfiltered_messages:d}=e,{is_stop_button_visible:c,contract_stage:_}=t,u=Array.isArray(i)&&i.length,x=Array.isArray(d)&&d.length,{isDesktop:m}=(0,N.F)();return(0,l.jsxs)("div",{className:U()("journal run-panel-tab__content--no-stat",{"run-panel-tab__content":m}),"data-testid":"dt_mock_journal",children:[(0,l.jsx)(eO,{checked_filters:a,filters:n,filterMessage:s,is_filter_dialog_visible:r,toggleFilterDialog:o}),(0,l.jsx)("div",{className:"journal__item-list",children:u?(0,l.jsx)(ep,{className:"journal",data_source:i,rowRenderer:e=>(0,l.jsx)(ek,{...e}),keyMapper:e=>e.unique_id}):(0,l.jsx)(l.Fragment,{children:_>=es.K.STARTING&&Object.keys(a).length&&!x&&c?(0,l.jsx)(ew,{is_mobile:!m}):(0,l.jsxs)("div",{className:"journal-empty",children:[(0,l.jsx)(en.Z,{height:"64px",width:"64px",className:"journal-empty__icon icon-general-fill-g-path",color:"secondary",fill:"var(--text-general)"}),(0,l.jsx)(ea.Z,{as:"h4",size:"xs",weight:"bold",align:"center",color:"less-prominent",lineHeight:"s",className:"journal-empty__header",children:(0,l.jsx)(f.Xx,{i18n_default_text:"There are no messages to display"})}),(0,l.jsxs)("div",{className:"journal-empty__message",children:[(0,l.jsx)(ea.Z,{size:"xxs",color:"less-prominent",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Here are the possible reasons:"})}),(0,l.jsxs)("ul",{className:"journal-empty__list",children:[(0,l.jsx)("li",{children:(0,l.jsx)(ea.Z,{size:"xxs",color:"less-prominent",children:(0,l.jsx)(f.Xx,{i18n_default_text:"The bot is not running"})})}),(0,l.jsx)("li",{children:(0,l.jsx)(ea.Z,{size:"xxs",color:"less-prominent",children:(0,l.jsx)(f.Xx,{i18n_default_text:"The stats are cleared"})})}),(0,l.jsx)("li",{children:(0,l.jsx)(ea.Z,{size:"xxs",color:"less-prominent",children:(0,l.jsx)(f.Xx,{i18n_default_text:"All messages are filtered out"})})})]})]})]})})})]})});var eD=a(29747),eU=a(45697),eZ=a.n(eU),eF=a(19002),ez=a(75097);let eP={initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:250,delay:.3}},eB={initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.25,delay:.3}},eX={initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}},e$=e=>{let{children:t,className:a,is_visible:s,keyname:n,type:i}=e;return"top"===i?(0,l.jsx)(l.Fragment,{children:s&&(0,l.jsx)(ez.E.div,{animate:eP.animate,initial:eP.initial,transition:eP.transition,className:a,children:t},n)}):"bottom"===i?(0,l.jsx)(l.Fragment,{children:s&&(0,l.jsx)(ez.E.div,{animate:eB.animate,initial:eB.initial,transition:eB.transition,className:a,children:t},n)}):(0,l.jsx)(l.Fragment,{children:s&&(0,l.jsx)(ez.E.div,{animate:eX.animate,initial:eX.initial,transition:eX.transition,className:a,children:t},n)})},eH=a(92465).Z,eV=e=>{let{children:t,has_footer:a}=e;return a?(0,l.jsx)("div",{className:"dc-input__wrapper",children:t}):(0,l.jsx)(i.Fragment,{children:t})},eq=i.forwardRef((e,t)=>{let{bottom_label:a,className:s,classNameError:n,classNameHint:r,classNameWarn:o,disabled:d=!1,error:c,field_className:_,has_character_counter:u,hint:x,initial_character_count:m,input_id:h,is_relative_hint:p,label_className:j,label:b,leading_icon:v,max_characters:y,trailing_icon:g,warn:f,data_testId:N,maxLength:C,placeholder:k,...w}=e,[T,E]=i.useState(0);i.useEffect(()=>{(m||0===m)&&E(m)},[m]);let S=e=>{var t;let a=e.target.value;if("tick_count"===e.target.name){let e=a.indexOf(".");-1!==e&&(a=a.substring(0,e))}else{let e=a.indexOf(".");-1!==e&&a.substring(e+1).length>2&&(a=a.substring(0,e+3))}E(a.length),e.target.value=a,null==(t=w.onChange)||t.call(w,e)},I=!!u||!!x&&!!p,A=b?"":k;return(0,l.jsxs)(eV,{has_footer:I,children:[(0,l.jsxs)("div",{className:U()("dc-input",s,{"dc-input--disabled":d,"dc-input--error":c,"dc-input--hint":x,"dc-input--bottom-label-active":a}),children:[(0,l.jsxs)("div",{className:U()("dc-input__container",{"dc-input__container--disabled":d,"dc-input__container--error":c}),children:[v&&i.cloneElement(v,{className:U()("dc-input__leading-icon",v.props.className)}),"textarea"===w.type?(0,l.jsx)("textarea",{ref:t,"data-testid":N,...w,className:U()("dc-input__field dc-input__textarea",{"dc-input__field--placeholder-visible":!b&&k}),onChange:S,disabled:d,id:h,maxLength:C,placeholder:A}):(0,l.jsx)("input",{ref:t,"data-testid":N,...w,className:U()("dc-input__field",_,{"dc-input__field--placeholder-visible":!b&&k}),onFocus:w.onFocus,onBlur:w.onBlur,onChange:S,onKeyDown:w.onKeyDown,onMouseDown:w.onMouseDown,onMouseUp:w.onMouseUp,onPaste:w.onPaste,disabled:d,"data-lpignore":"password"!==w.type||void 0,id:h,"aria-label":b,maxLength:C,placeholder:A}),g&&i.cloneElement(g,{className:U()("dc-input__trailing-icon",g.props.className)}),b&&(0,l.jsx)("label",{className:U()("dc-input__label",j),htmlFor:w.id,children:b})]}),(0,l.jsx)("div",{children:!I&&(0,l.jsxs)(i.Fragment,{children:[c&&(0,l.jsx)(eH,{className:n,message:c,type:"error"}),f&&(0,l.jsx)(eH,{className:o,message:f,type:"warn"}),!c&&x&&!p&&(0,l.jsx)("div",{className:"dc-input__hint",children:(0,l.jsx)(ea.Z,{as:"p",color:"less-prominent",size:"xs",className:r,children:x})})]})})]}),I&&(0,l.jsxs)("div",{className:"dc-input__footer",children:[c&&(0,l.jsx)(eH,{className:n,message:c,type:"error"}),f&&(0,l.jsx)(eH,{className:o,message:f,type:"warn"}),!c&&x&&(0,l.jsx)("div",{className:"dc-input__hint dc-input__hint--relative",children:(0,l.jsx)(ea.Z,{color:"less-prominent","line-height":"m",size:"xs",children:x})}),u&&(0,l.jsx)("div",{className:"dc-input__counter",children:(0,l.jsxs)(ea.Z,{color:"less-prominent","line-height":"m",size:"xs",children:[T,y?`/${y}`:""]})})]}),a&&!c&&(0,l.jsx)("div",{className:"dc-input__bottom-label",children:(0,l.jsx)(ea.Z,{size:"xs",color:"less-prominent",children:a})})]})});eq.displayName="Input";var eG=a(59551),eY=a(73935),eK=a(14117);let eW=e=>{let{children:t,header:a,id:s,is_from_app:n=!1,is_open:r,onClickClose:o,portal_id:d,header_classname:c,has_return_icon:_,onReturn:u}=e,x=i.useRef(null),m=(0,l.jsxs)("div",{ref:x,id:s,className:U()("dc-page-overlay",{"dc-page-overlay-portal":!!d}),children:[a&&(0,l.jsx)("div",{className:U()("dc-page-overlay__header",{"dc-page-app__header ":n}),children:(0,l.jsxs)("div",{className:"dc-page-overlay__header-wrapper",children:[(0,l.jsxs)("div",{className:U()("dc-page-overlay__header-title",c),children:[_&&(0,l.jsx)(eK.Z,{onClick:u,className:"dc-modal-header__icon"}),a]}),!n&&(0,l.jsx)("div",{"data-testid":"dt_page_overlay_header_close",className:"dc-page-overlay__header-close",onClick:o||window.history.back,children:(0,l.jsx)(S.Z,{height:"20px",width:"20px"})})]})}),(0,l.jsx)("div",{className:"dc-page-overlay__content",children:t})]});return d?eY.createPortal((0,l.jsx)(eT.Z,{appear:!0,in:r,timeout:250,classNames:{appear:"dc-page-overlay--enter",enter:"dc-page-overlay--enter",enterDone:"dc-page-overlay--enter-done",exit:"dc-page-overlay--exit"},unmountOnExit:!0,children:m}),document.getElementById(d)):(0,l.jsx)(i.Fragment,{children:m})},eJ=e=>{let[t,a]=i.useState(""),{is_onscreen_keyboard_active:s,is_logged_in:n,initial_values:r,api_max_losses:o,onRunButtonClick:d,resetSelfExclusion:c,updateSelfExclusion:_,setRunLimit:u,is_mobile:x}=e;i.useEffect(()=>{n||c()});let m=async e=>{if(e.form_max_losses!==o){let t=await _({max_losses:e.form_max_losses});if(null==t?void 0:t.error)return void a((0,f.NC)(t.error.message))}u(e.run_limit),d()};return(0,l.jsx)("div",{className:"db-self-exclusion",children:(0,l.jsxs)("div",{className:"db-self-exclusion__content",children:[(0,l.jsx)("div",{className:"db-self-exclusion__info",children:(0,f.NC)("Enter limits to stop your bot from trading when any of these conditions are met.")}),(0,l.jsx)(eD.J9,{initialValues:r,validate:e=>{let t={},s=/^\d+(\.\d+)?$/,n=/^\d+$/,l=(0,f.NC)("This field is required."),i=(0,f.NC)("Should be a valid number"),r=(0,f.NC)("Reached maximum number of digits"),d=(0,f.NC)("Reached maximum number of decimals"),c=(0,f.NC)("Please enter a number between 0 and {{api_max_losses}}.",{api_max_losses:o});return["run_limit","form_max_losses"].forEach(a=>{e[a]||(t[a]=l)}),["run_limit","form_max_losses"].forEach(a=>{e[a]&&(s.test(e[a])?+e[a]>0x9184e729fff&&(t[a]=r):t[a]=i)}),["run_limit"].forEach(a=>{e[a]&&!n.test(e[a])&&(t[a]=i)}),["form_max_losses"].forEach(a=>{let s=e[a].toString().split(".")[1];(s&&s.length||0)>2&&(t[a]=d)}),["form_max_losses"].forEach(s=>{0!==o&&o!==e[s]&&o<e[s]?t[s]=c:a("")}),t},onSubmit:m,children:e=>{let{values:a,touched:n,errors:i,isValid:r,handleChange:o}=e;return(0,l.jsxs)(eD.l0,{children:[(0,l.jsx)("div",{className:"db-self-exclusion__form-group",children:(0,l.jsx)(eD.gN,{name:"form_max_losses",children:e=>{let{field:s}=e;return(0,l.jsx)(eq,{...s,className:"db-self-exclusion__input",type:"text",label:(0,f.NC)("Daily loss limit"),value:a.form_max_losses,onChange:o,error:t||n[s.name]&&i[s.name],hint:(0,f.NC)("Limits your potential losses for the day across all Deriv platforms.")})}})}),(0,l.jsx)("div",{className:"db-self-exclusion__form-group",children:(0,l.jsx)(eD.gN,{name:"run_limit",children:e=>{let{field:t}=e;return(0,l.jsx)(eq,{...t,className:"db-self-exclusion__input",type:"text",label:(0,f.NC)("Maximum consecutive trades"),value:a.run_limit,onChange:o,error:n[t.name]&&i.run_limit,hint:(0,f.NC)("Maximum number of trades your bot will execute for this run.")})}})}),(0,l.jsx)("div",{className:U()("db-self-exclusion__footer",{"db-self-exclusion__footer--relative":x&&s}),children:(0,l.jsxs)("div",{className:"db-self-exclusion__footer-btn-group",children:[(0,l.jsx)(eA.Z,{large:!0,text:(0,f.NC)("Cancel"),onClick:c,secondary:!0,type:"button"}),(0,l.jsx)(eA.Z,{type:"submit",large:!0,text:(0,f.NC)("Apply and run"),is_disabled:!r||!a.run_limit||!a.form_max_losses||""!==t,primary:!0})]})})]})}})]})})},eQ=(0,r.Pi)(e=>{let{onRunButtonClick:t}=e,{self_exclusion:a}=(0,j.oR)(),{ui:s,client:n}=(0,j.oR)(),{is_restricted:i,resetSelfExclusion:r,initial_values:o,api_max_losses:d,run_limit:c,setRunLimit:_}=a,{is_onscreen_keyboard_active:u}=s,{is_logged_in:x,updateSelfExclusion:m,virtual_account_loginid:h}=n,{isDesktop:p}=(0,N.F)(),b={is_onscreen_keyboard_active:u,is_logged_in:x,initial_values:o,api_max_losses:d,onRunButtonClick:t,resetSelfExclusion:r,updateSelfExclusion:m,setRunLimit:_,virtual_account_loginid:h,run_limit:c,isDesktop:p};return(0,l.jsx)(l.Fragment,{children:p?(0,l.jsx)(C.Z,{is_open:i,has_close_icon:!0,width:"440px",height:"374px",toggleModal:r,className:"db-self-exclusion__modal",title:(0,f.NC)("Limits"),children:(0,l.jsx)(eJ,{...b})}):(0,l.jsx)(e$,{is_visible:i,className:"limits__wrapper",keyname:"limitis__wrapper",children:(0,l.jsx)(eW,{header:(0,f.NC)("Limits"),onClickClose:r,children:(0,l.jsx)(eG.Z,{children:(0,l.jsx)(eF.Z,{className:"limits__wrapper--is-mobile",children:(0,l.jsx)(eJ,{...b})})})})})})});eQ.propTypes={onRunButtonClick:eZ().func};var e0=a(65342),e1=a(51729);let e8=e=>{let{anchor:t="left",children:a,className:s,contentClassName:n,footer:r,header:o,width:d=250,zIndex:c=4,..._}=e,[u,x]=i.useState(_.is_open),{isDesktop:m}=(0,N.F)();return i.useEffect(()=>{x(_.is_open)},[_.is_open]),(0,l.jsxs)("div",{"data-testid":"drawer",className:U()("dc-drawer",s,{[`dc-drawer--${t}`]:m,"dc-drawer--open":u}),style:{zIndex:c,transform:u&&m?"left"===t?`translateX(calc(${d}px - 16px))`:`translateX(calc(-${d}px + 16px))`:void 0},children:[(0,l.jsx)("div",{className:U()("dc-drawer__toggle",{"dc-drawer__toggle--open":u}),onClick:()=>{x(!u),_.toggleDrawer&&_.toggleDrawer(!u)},children:m?(0,l.jsx)(e0.Z,{className:U()("dc-drawer__toggle-icon",{[`dc-drawer__toggle-icon--${t}`]:m})}):(0,l.jsx)(e1.Z,{iconSize:"sm",className:"dc-drawer__toggle-icon"})}),(0,l.jsxs)("div",{className:U()("dc-drawer__container",{[`dc-drawer__container--${t}`]:m}),children:[o&&(0,l.jsx)("div",{className:"dc-drawer__header",children:o}),(0,l.jsx)("div",{className:U()("dc-drawer__content",n),children:a}),r&&(0,l.jsx)("div",{className:"dc-drawer__footer",children:r})]})]})};var e2=a(17275),e3=a(3550),e7=a(35863),e9=a(50220);let e5=(0,f.NC)("Your bot is running and waiting for a signal to buy a contract."),e4=()=>(0,l.jsxs)("div",{className:"db-contract-card-running-loader",children:[(0,l.jsx)(e9.Z,{id:"rotate-icon",fontSize:16,fill:"var(--text-general)"}),(0,l.jsx)(ea.Z,{color:"less-prominent",lineHeight:"xs",size:"xs",weight:"bold",align:"center",className:"dc-contract-card-message",children:e5})]}),e6=e=>{let{speed:t=3,contract_stage:a}=e;return(0,l.jsx)(l.Fragment,{children:a===es.K.RUNNING?(0,l.jsx)(e4,{}):(0,l.jsxs)(Z.ZP,{height:153,width:334,speed:t,backgroundColor:"var(--general-section-2)",foregroundColor:"var(--general-hover)","data-testid":"contract-card-loader",children:[(0,l.jsx)("rect",{x:"12",y:"15",rx:"0",ry:"0",width:"41",height:"25"}),(0,l.jsx)("rect",{x:"61",y:"24",rx:"0",ry:"0",width:"91",height:"8"}),(0,l.jsx)("rect",{x:"180",y:"15",rx:"0",ry:"0",width:"41",height:"25"}),(0,l.jsx)("rect",{x:"229",y:"24",rx:"0",ry:"0",width:"91",height:"8"}),(0,l.jsx)("rect",{x:"12",y:"48",rx:"0",ry:"0",width:"60",height:"8"}),(0,l.jsx)("rect",{x:"12",y:"64",rx:"0",ry:"0",width:"308",height:"8"}),(0,l.jsx)("rect",{x:"12",y:"80",rx:"0",ry:"0",width:"308",height:"1"}),(0,l.jsx)("rect",{x:"12",y:"89",rx:"0",ry:"0",width:"140",height:"8"}),(0,l.jsx)("rect",{x:"12",y:"105",rx:"0",ry:"0",width:"60",height:"8"}),(0,l.jsx)("rect",{x:"12",y:"121",rx:"0",ry:"0",width:"140",height:"8"}),(0,l.jsx)("rect",{x:"12",y:"137",rx:"0",ry:"0",width:"60",height:"8"}),(0,l.jsx)("rect",{x:"180",y:"89",rx:"0",ry:"0",width:"140",height:"8"}),(0,l.jsx)("rect",{x:"180",y:"105",rx:"0",ry:"0",width:"60",height:"8"}),(0,l.jsx)("rect",{x:"180",y:"121",rx:"0",ry:"0",width:"140",height:"8"}),(0,l.jsx)("rect",{x:"180",y:"137",rx:"0",ry:"0",width:"60",height:"8"})]})})};var te=a(85854),tt=a(7121),ta=a(54802),ts=a(23406);let tn=i.memo(e=>{let{className:t,value:a}=e,[s,n]=i.useState(!1),[r,o]=i.useState({icon:"",previous_icon:""}),{icon:d,previous_icon:c,previous_value:_}=r,u=!isNaN(Number(r.value))&&!isNaN(Number(a)),x=i.useRef();return i.useEffect(()=>(n(!0),o(e=>{let t=Number(e.value)<Number(a)?(0,l.jsx)(ta.Z,{fill:"var(--text-profit-success)",iconSize:"sm"}):(0,l.jsx)("div",{style:{position:"relative",top:"-0.7rem"},children:(0,l.jsx)(ts.Z,{fill:"var(--text-loss-danger)",iconSize:"sm"})});return{icon:u?t:"",previous_icon:e.icon,previous_value:e.value,value:a}}),clearTimeout(x.current),x.current=setTimeout(()=>{n(!1)},3e3),()=>clearTimeout(x.current)),[a]),(0,l.jsx)("div",{className:t,"data-testid":"dt_arrow_indicator",children:u&&s?(0,l.jsx)("div",{children:_===Number(a)?c:d}):null})}),tl=e=>{let{currency:t}=e;return(0,l.jsx)(ea.Z,{className:"dc-currency-badge",color:"colored-background",lineHeight:"unset",size:"xxxs",weight:"bold",children:(0,m.O$T)(t)})};var ti=a(73728);let tr=e=>{let{className:t,danger_limit:a=20,is_clockwise:s=!1,progress:n=0,radius:i=22,stroke:r=3,warning_limit:o=50}=e,d=i-r/2,c=2*d*Math.PI;return(0,l.jsxs)("div",{className:U()("dc-circular-progress",t),children:[(0,l.jsx)("div",{className:"dc-circular-progress__icon",children:(0,l.jsx)(ti.Z,{iconSize:"xs"})}),(0,l.jsx)("svg",{height:2*i,width:2*i,children:(0,l.jsx)("circle",{className:U()("dc-circular-progress__bar",{"dc-circular-progress--clockwise":s,"dc-circular-progress__bar--warning":n<=o&&n>a,"dc-circular-progress__bar--danger":n<=a}),cx:i,cy:i,fill:"transparent",r:d,strokeDasharray:`${c} ${c}`,strokeWidth:r,style:{strokeDashoffset:c-n/100*c}})})]})},to=e=>{let{end_time:t,format:a,getCardLabels:s,start_time:n}=e;if(!t||n.unix()>+t)return(0,l.jsx)(i.Fragment,{children:""});let{days:r,timestamp:o}=(0,m.LUK)((0,m.QRc)(n.unix(),t),a),d=o;r>0&&(d=`${r} ${r>1?s().DAYS:s().DAY} ${o}`);let c=/^00:00$/.test(d);return(0,l.jsx)(i.Fragment,{children:!c&&(0,l.jsx)("div",{className:"dc-remaining-time",children:d})})},td=e=>{let{is_on:t}=e;return(0,l.jsx)("div",{className:U()("dc-tick-progress__tick",{"dc-tick-progress__tick--on":t})})},tc=e=>{let{className:t,rows:a=2,columns:s=5,size:n=10,value:i=0}=e;return(0,l.jsx)("div",{className:U()("dc-tick-progress",t),style:{gridTemplateRows:`repeat(${a}, 1fr)`,gridTemplateColumns:`repeat(${s}, 1fr)`},children:Array(n).fill(null).map((e,t)=>(0,l.jsx)(td,{is_on:t<Number(i)},t))})},t_=e=>{let{current_tick:t,getCardLabels:a,ticks_count:s}=e;return(0,l.jsxs)("div",{className:"dc-progress-slider__ticks",children:[(0,l.jsxs)(ea.Z,{styles:{lineHeight:"18px"},size:"xxs",className:"dc-progress-slider__ticks-caption",children:[a().TICK," ",t]}),(0,l.jsx)(tc,{columns:5,rows:s>5?2:1,size:s,value:t})]})},tu=e=>{let{className:t,current_tick:a,getCardLabels:s,is_loading:n,start_time:r,expiry_time:o,server_time:d,ticks_count:c}=e,_=(0,m.dq6)(d,Number(r),Number(o));return(0,l.jsx)("div",{className:U()("dc-progress-slider-mobile",t),children:c?(0,l.jsx)(t_,{current_tick:a,getCardLabels:s,ticks_count:c}):(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(ea.Z,{size:"xxs",children:(0,l.jsx)(to,{end_time:o,getCardLabels:s,start_time:d})}),n||_<1?(0,l.jsx)("div",{className:"dc-progress-slider-mobile__infinite-loader",children:(0,l.jsx)("div",{className:"dc-progress-slider-mobile__infinite-loader--indeterminate"})}):(0,l.jsx)(tr,{className:"dc-progress-slider-mobile__timer",danger_limit:20,progress:_,warning_limit:50})]})})};var tx=a(96672);let tm=e=>{let{getCardLabels:t,is_contract_won:a}=e;return(0,l.jsxs)("span",{className:U()("dc-result__caption",{"dc-result__caption--won":a,"dc-result__caption--lost":!a}),children:[(0,l.jsx)("div",{className:"dc-result__icon",children:(0,l.jsx)(tx.Z,{iconSize:"sm",fill:a?"var(--text-profit-success)":"var(--text-loss-danger)"})}),t().CLOSED]})},th=e=>{let{className:t,children:a,header:s,is_crypto:n,is_loss:i,is_won:r}=e;return(0,l.jsxs)("div",{className:U()("dc-contract-card-item",t),children:[(0,l.jsx)("div",{className:"dc-contract-card-item__header",children:s}),(0,l.jsx)("div",{className:U()("dc-contract-card-item__body",{"dc-contract-card-item__body--crypto":n,"dc-contract-card-item__body--loss":i,"dc-contract-card-item__body--profit":r}),children:a})]})};var tp=a(54996),tj=a(5467);let tb=i.forwardRef((e,t)=>{let{children:a,is_visible:s,left:n,toggleDialog:i,toggle_ref:r,top:o}=e;(0,eb.t)(t,i,e=>{var t;return s&&!(null==r||null==(t=r.current)?void 0:t.contains(e.target))});let d=(0,l.jsx)(eT.Z,{in:s,classNames:{enter:"dc-contract-card-dialog--enter",enterDone:"dc-contract-card-dialog--enter-done",exit:"dc-contract-card-dialog--exit"},timeout:150,unmountOnExit:!0,children:(0,l.jsx)("div",{ref:t,className:"dc-contract-card-dialog",style:{top:o,left:`calc(${n}px + 32px)`},children:a})}),c=document.getElementById("deriv_app");return eY.createPortal(d,c||document.body)});tb.displayName="ContractCardDialog";var tv=a(11527),ty=a(96298),tg=a(85247),tf=a(14244);let tN=e=>{let{alignment:t,children:a,className:s,classNameIcon:n,has_error:r,icon:o,message:d}=e,[c,_]=(0,ty.X)(),u=U()(n,o);return(0,l.jsxs)("span",{className:U()(s,"dc-tooltip",{"dc-tooltip--error":r}),"data-tooltip":d||void 0,"data-tooltip-pos":t,children:["info"===o&&(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(tf.Z,{className:u,ref:c}),(0,l.jsx)(tf.Z,{className:U()(`${n}-balloon-icon`,"dc-tooltip__balloon-icon",{"dc-tooltip__balloon-icon--show":_})})]}),"question"===o&&(0,l.jsx)(tg.J,{icon:"IcUnknown",className:u}),"dot"===o&&(0,l.jsx)(tg.J,{icon:"IcCircle",className:u,size:4}),a]})},tC=e=>{let{decrementValue:t,id:a,incrementValue:s,max_is_disabled:n,min_is_disabled:r,is_incrementable_on_long_press:o,onLongPressEnd:d,type:c}=e,_=i.useRef(),u=i.useRef(),x=i.useRef(!1),m=e=>t=>{u.current=setTimeout(()=>{x.current=!0;let a=1;e(t,1),_.current=setInterval(()=>{e(t,++a)},50)},300)},h=()=>{clearInterval(_.current),clearTimeout(u.current),d&&x.current&&d(),x.current=!1},p=e=>o?{onContextMenu:e=>e.preventDefault(),onTouchStart:m(e),onTouchEnd:h,onMouseDown:m(e),onMouseUp:h}:{};return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(eA.Z,{id:`${a}_add`,className:U()("dc-input-wrapper__button dc-input-wrapper__button--increment",{"dc-input-wrapper__button--disabled":!!n}),disabled:!!n,onClick:s,tabIndex:-1,"aria-label":"Increment value",type:c,...p(s),children:(0,l.jsx)(tg.J,{icon:"IcAdd",className:"dc-input-wrapper__icon dc-input-wrapper__icon--plus",color:n?"disabled":void 0})}),(0,l.jsx)(eA.Z,{id:`${a}_sub`,className:U()("dc-input-wrapper__button dc-input-wrapper__button--decrement",{"dc-input-wrapper__button--disabled":!!r}),disabled:!!r,onClick:t,tabIndex:-1,"aria-label":"Decrement value",type:c,...p(t),children:(0,l.jsx)(tg.J,{icon:"IcMinus",className:"dc-input-wrapper__icon dc-input-wrapper__icon--minus",color:r?"disabled":void 0})})]})},tk=e=>{let{ariaLabel:t,changeValue:a,checked:s,className:n,classNameDynamicSuffix:r,classNameInlinePrefix:o,current_focus:d,data_testid:c,data_tip:_,data_value:u,display_value:x,fractional_digits:h,id:p,inline_prefix:j,inputmode:b,is_autocomplete_disabled:v,is_disabled:y,is_hj_whitelisted:g,is_incrementable:f,is_read_only:N,max_length:C,name:k,onBlur:w,onClick:T,onKeyPressed:E,placeholder:S,required:I,setCurrentFocus:A,type:R}=e,L=i.useRef(null);return i.useEffect(()=>{if(d===k){var e;null==L||null==(e=L.current)||e.focus()}},[d,k]),(0,l.jsxs)("div",{className:r,children:[j?(0,l.jsx)("div",{className:o,children:(0,l.jsx)(ea.Z,{className:U()(o?`${o}--symbol`:"",{disabled:!!y}),size:"xs",children:"UST"===j?(0,m.O$T)(j):j})}):null,(0,l.jsx)("input",{autoComplete:v?"off":void 0,checked:s,className:U()(n),"data-for":`error_tooltip_${k}`,"data-hj-whitelist":g,"data-tip":_,"data-testid":c,"data-value":u,disabled:!!y,id:p,maxLength:h&&C?C+h+1:C,name:k,onBlur:e=>{null==A||A(null),null==w||w(e)},onChange:e=>{if(-1!==navigator.userAgent.indexOf("Safari")&&"checkbox"!==R){let t=e.target.selectionStart;a(e,e=>{e.target.selectionEnd=t})}else a(e)},onClick:T,onFocus:()=>null==A?void 0:A(k),onKeyDown:f?E:void 0,placeholder:S||void 0,readOnly:N,ref:L,required:I||void 0,inputMode:b,type:"number"===R?"text":R,value:x??"","aria-label":t,"data-lpignore":"password"!==R})]})},tw=e=>{let{ariaLabel:t,checked:a,className:s,classNameDynamicSuffix:n,classNameInlinePrefix:r,classNameInput:o,classNamePrefix:d,classNameWrapper:c,currency:_,current_focus:u,data_tip:x,data_value:h,decimal_point_change:p,error_messages:j,error_message_alignment:b,fractional_digits:v,helper:y,icon:g,id:f,inline_prefix:N,is_autocomplete_disabled:C,is_disabled:k,is_error_tooltip_hidden:w=!1,is_float:T,is_hj_whitelisted:E=!1,is_incrementable:S,is_incrementable_on_long_press:I,is_negative_disabled:A,is_read_only:R=!1,is_signed:L=!1,is_unit_at_right:O=!1,inputmode:M,increment_button_type:D,label:Z,max_length:F,max_value:z,min_value:P,name:B="",format:X,onBlur:$,onChange:H,onClick:V,onClickInputWrapper:q,placeholder:G,prefix:Y,required:K,setCurrentFocus:W,type:J="",unit:Q,value:ee,data_testid:et}=e,[es,en]=i.useState(),el=j&&!!j.length&&!w,ei=z&&(+ee>=+z||Number(es)>=+z),er=P&&(+ee<=+P||Number(es)<=+P),eo=!0,ed=e=>{let t="string"==typeof e?e.split("."):e.toString().split(".");return t&&t.length>1?t[1].length:0},ec=e=>{let t=e;return P&&(t=Math.max(t,P)),z&&(t=Math.min(t,z)),t},e_=(e,t)=>{let a;if(ei)return;let s=es||ee.toString(),n=s?ed(s):0,l=!!_&&(0,m.oS6)(_);if(t){let e=Math.min(t,Math.max(t,10))/10*+ee/100;a=parseFloat(ec(parseFloat(s||"0")+Math.abs(e)).toString()).toFixed(n)}else a=l||!_&&T?parseFloat((parseFloat(s||"0")+parseFloat((+(10**(0-(p||n)))).toString())).toString()).toFixed(p||n):parseFloat(((+s||0)+1).toString()).toFixed(n);em(a,!!t)},eu=e=>{let t,a=es||(null==ee?void 0:ee.toString()),s=a?ed(a):0,n=!!_&&(0,m.oS6)(_);if(e){let n=Math.min(e,Math.max(e,10))/10*+ee/100;t=parseFloat(ec(parseFloat(a||"0")-Math.abs(n)).toString()).toFixed(s)}else t=n||!_&&T?parseFloat((parseFloat(a||"0")-parseFloat((+(10**(0-(p||s)))).toString())).toString()).toFixed(p||s):parseFloat(((+a||0)-1).toString()).toFixed(s);return t},ex=(e,t)=>{if(er)return;let a=eu(t);A&&0>+a||em(a,!!t)},em=(e,t)=>{let a=X?X(e):e;t?en(a):(L&&/^\d+/.test(a)&&+a>0&&(a=`+${a}`),null==H||H({target:{value:a,name:B}}))},eh=es||ee;Q&&(eh=O?`${ee} ${Q}`:`${Q} ${ee}`);let ep=S&&("number"===J||"tel"===J),ej=(0,l.jsx)(tk,{ariaLabel:t,changeValue:(e,t)=>{if(Q&&(e.target.value=e.target.value.replace(Q,"").trim()),e.target.value!==ee||"checkbox"===J){if("number"===J||"tel"===J){let t=!e.target.value||""===e.target.value||"  "===e.target.value,a=L?"^([+-.0-9])":"^";e.target.value=e.target.value.replace(",",".");let s=RegExp(`${a}(\\d*)?${T?"(\\.\\d+)?":""}$`).test(e.target.value),n=T&&RegExp(`${a}(\\.|\\d+\\.)?$`).test(e.target.value),l=RegExp(`${a}(\\d+)?\\.(\\d+)?[0]+$`).test(e.target.value),i=/e/.test(`${+e.target.value}`);if(F&&(v||0===v)&&(eo=RegExp(`${a}(\\d{0,${F}})(\\${v&&"."}\\d{0,${v}})?$`).test(e.target.value)),(s||t)&&eo)e.target.value=t||L||l||i||"tel"===J?e.target.value:+e.target.value;else if(!n){e.target.value=ee;return}}null==H||H(e),t&&t(e)}},checked:a,current_focus:u,className:U()(ep?"dc-input-wrapper__input":"",N?"input--has-inline-prefix":"","input",{"input--error":j&&!!j.length},o),classNameDynamicSuffix:n,classNameInlinePrefix:r,data_tip:x,data_testid:et,data_value:h,display_value:eh,fractional_digits:v,has_error:el,id:f,inline_prefix:N,is_autocomplete_disabled:C,is_disabled:k,is_hj_whitelisted:E,is_incrementable:ep,is_read_only:R,max_length:F,name:B,onBlur:$,onClick:V,onKeyPressed:e=>{38===e.keyCode&&e_(),40===e.keyCode&&ex()},placeholder:G,required:K,setCurrentFocus:W,type:J,inputmode:M}),eb=(0,l.jsx)(tC,{id:f,max_is_disabled:ei||!!k,incrementValue:e_,min_is_disabled:er||A&&0>+eu()||!!k,decrementValue:ex,onLongPressEnd:()=>{let e=X?X(es):es;null==H||H({target:{value:e||"",name:B}}),en("")},is_incrementable_on_long_press:I,type:D}),ev=(0,l.jsxs)(tN,{className:U()("trade-container__tooltip",{"dc-tooltip--with-label":Z}),alignment:b||"left",message:el?j[0]:null,has_error:el,children:[!!Z&&(0,l.jsx)("label",{htmlFor:B,className:"dc-input-field__label",children:Z}),!!y&&(0,l.jsx)(ea.Z,{size:"xxs",color:"less-prominent",weight:"lighter",children:y}),ep?(0,l.jsxs)("div",{className:U()("dc-input-wrapper",{"dc-input-wrapper--disabled":!!k},c),children:[eb,ej]}):ej]});return(0,l.jsxs)(i.Fragment,{children:[!!Y&&(0,l.jsx)("div",{className:d,children:(0,l.jsx)("span",{className:U()(`${d}--symbol`,"symbols"),children:(0,m.O$T)(_)})}),(0,l.jsxs)("div",{className:U()("dc-input-field",s),onClick:q,children:[g&&(0,l.jsx)(g,{onClick:V}),ev]})]})},tT=e=>{let{addToast:t,checkbox_tooltip_label:a,classNameBubble:s,classNameInlinePrefix:n,classNameInput:r,className:o,currency:d,current_focus:c,defaultChecked:_,error_message_alignment:u,error_messages:x,is_disabled:h,is_single_currency:p,is_negative_disabled:j,is_input_hidden:b,label:v,max_value:y,name:g,onChange:f,removeToast:N,setCurrentFocus:C,tooltip_alignment:k,tooltip_label:w,value:T}=e,E=i.useRef(null),S=i.useRef(null),[I,A]=i.useState(_),R=`has_${g}`;i.useEffect(()=>{A(_)},[_]),i.useEffect(()=>{if((0,m.tqC)()){let e=()=>{"function"==typeof N&&N(`${g}__error`)};if((null==x?void 0:x.length)!==void 0&&(null==x?void 0:x.length)>0)return"function"==typeof t&&t({key:`${g}__error`,content:String(x),type:"error"}),()=>{e()}}},[x,t,N,g]);let L=()=>{setTimeout(()=>{var e,t,a,s;let n=null==(a=S.current)||null==(t=a.nextSibling)||null==(e=t.querySelector)?void 0:e.call(t,"input.dc-input-wrapper__input");null==n||null==(s=n.focus)||s.call(n)})},O=(0,l.jsx)(tw,{className:o,classNameInlinePrefix:n,classNameInput:r,currency:d,current_focus:c||"",error_messages:x,error_message_alignment:u,is_error_tooltip_hidden:(0,m.tqC)(),is_disabled:!!h,fractional_digits:(0,m.i4S)(d),id:`dc_${g}_input`,inline_prefix:p?d:void 0,is_autocomplete_disabled:!0,is_float:(0,m.i4S)(d)>0,is_hj_whitelisted:!0,is_incrementable:!0,is_negative_disabled:j,max_length:10,max_value:y,name:g,onChange:f,onClickInputWrapper:h?void 0:()=>{I||(A(!0),null==f||f({target:{name:R,value:!0}}),L())},type:"number",ariaLabel:"",inputmode:"decimal",value:T,setCurrentFocus:C}),M=(0,l.jsx)(ey,{className:`${g}-checkbox__input`,ref:E,id:`dc_${g}-checkbox_input`,onChange:()=>{let e=!I;null==f||f({target:{name:R,value:e}}),e&&L()},name:R,label:v,classNameLabel:`${g}-checkbox__label`,defaultChecked:_,disabled:h});return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{ref:S,className:"dc-input-wrapper--inline",children:[a?(0,l.jsx)($.Z,{alignment:"left",classNameBubble:"trade-container__popover",is_bubble_hover_enabled:!0,margin:2,message:a,relative_render:!0,children:M}):(0,l.jsx)(i.Fragment,{children:M}),w&&(0,l.jsx)($.Z,{alignment:k||"left",classNameBubble:s,icon:"info",id:`dc_${g}-checkbox__tooltip`,is_bubble_hover_enabled:!0,message:w,margin:(0,m.tqC)()||"right"===k?0:216,zIndex:"9999",...(0,m.nIE)()?{relative_render:"left"===k}:{}})]}),!b&&O]})},tE=e=>{let t,{addToast:a,contract:s,current_focus:n,error_message_alignment:r,getCardLabels:o,isMobile:d,is_turbos:c,is_accumulator:_,onMouseLeave:u,removeToast:x,setCurrentFocus:h,toggleDialog:p,totalProfit:j}=e;i.useEffect(()=>()=>s.clearContractUpdateConfigValues(),[s]);let{contract_info:b,contract_update_take_profit:v,has_contract_update_take_profit:y,contract_update_stop_loss:g,has_contract_update_stop_loss:N,updateLimitOrder:C,validation_errors:k}=s,[w,T]=i.useState({contract_update_take_profit:v,contract_update_stop_loss:g}),{buy_price:E,currency:S="",is_valid_to_cancel:I,is_sold:A}=b,{stop_loss:R,take_profit:L}=(0,m.gNN)(b.limit_order),{contract_update_stop_loss:O,contract_update_take_profit:M}=k,D={take_profit:y?M:void 0,stop_loss:N?O:void 0},Z=Object.keys(D).some(e=>{var t;return null==(t=D[e])?void 0:t.length}),F=(0,m.L8o)(b.contract_type||""),z=y?+v>0:null!=(F?R:L),P=N?+g>0:null!=L,B=F?!I&&!!(z||P):!!z,X=e=>{let t=["has_contract_update_take_profit","has_contract_update_stop_loss",e.has_contract_update_take_profit&&"contract_update_take_profit",e.has_contract_update_stop_loss&&"contract_update_stop_loss"];return(0,m.eiS)(e,t)},$=e=>{var t;let{name:a,value:n}=e.target;T({...w,[a]:n}),null==(t=s.onChange)||t.call(s,{name:a,value:n})},H=(0,l.jsx)(tT,{addToast:a,removeToast:x,current_focus:n,classNameBubble:"dc-popover__trade-params",classNameInlinePrefix:"dc-contract-card-dialog__input--currency",currency:S,error_messages:D.take_profit,is_input_hidden:d&&!y,is_single_currency:!0,is_negative_disabled:!0,defaultChecked:y,label:o().TAKE_PROFIT,name:"contract_update_take_profit",onChange:$,error_message_alignment:r||"right",value:w.contract_update_take_profit,is_disabled:F&&!!I,setCurrentFocus:h,tooltip_alignment:d?"left":"right",tooltip_label:(0,l.jsx)(f.Xx,{i18n_default_text:"When your profit reaches or exceeds this amount, your trade will be closed automatically."})}),V=(0,m.CeH)(b),q=(0,l.jsx)(tT,{addToast:a,removeToast:x,current_focus:n,classNameBubble:"dc-popover__trade-params",classNameInlinePrefix:"dc-contract-card-dialog__input--currency",currency:S,defaultChecked:N,error_messages:D.stop_loss,is_input_hidden:d&&!N,is_single_currency:!0,is_negative_disabled:!0,label:o().STOP_LOSS,max_value:Number(E)-V,name:"contract_update_stop_loss",onChange:$,error_message_alignment:r||"right",value:w.contract_update_stop_loss,is_disabled:!!I,setCurrentFocus:h,tooltip_alignment:d?"left":"right",tooltip_label:(0,l.jsx)(f.Xx,{i18n_default_text:"When your loss reaches or exceeds this amount, your trade will be closed automatically."})});return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(eG.Z,{children:(0,l.jsxs)("div",{className:"dc-contract-card-dialog__total-profit",children:[(0,l.jsx)(ea.Z,{color:"less-prominent",size:"xs",weight:"bold",children:o().TOTAL_PROFIT_LOSS}),(0,l.jsxs)("div",{className:U()("dc-contract-card__profit-loss dc-contract-card-item__total-profit-loss-value",{"dc-contract-card__profit-loss--is-crypto":(0,m.oS6)(S),"dc-contract-card__profit-loss--negative":j<0,"dc-contract-card__profit-loss--positive":j>0}),children:[(0,l.jsx)(e2.Z,{amount:j,currency:S,show_currency:!0}),!A&&(0,l.jsx)(tn,{className:"dc-contract-card__indicative--movement",value:j})]})]})}),(0,l.jsxs)("div",{className:U()("dc-contract-card-dialog__form",{"dc-contract-card-dialog__form--no-stop-loss":_||c}),children:[(0,l.jsx)("div",{className:"dc-contract-card-dialog__input",children:H}),F&&(0,l.jsx)("div",{className:"dc-contract-card-dialog__input",children:q}),(0,l.jsx)("div",{className:"dc-contract-card-dialog__button",children:(0,l.jsx)(tv.z,{onClick:e=>{C(),p(e),null==u||u()},disabled:Z||!B||(0,m.xb4)(X((0,m.W9k)(b)),X(e.contract)),isFullWidth:!0,children:o().APPLY})})]})]})},tS=e=>{let{addToast:t,contract_id:a,getCardLabels:s,getContractById:n,is_valid_to_cancel:r,should_show_cancellation_warning:o,toggleCancellationWarning:d,...c}=e,[_,u]=i.useState(!1),[x,h]=i.useState(0),[p,j]=i.useState(0),b=i.useRef(null),v=i.useRef(null),y=n(Number(a));i.useEffect(()=>{if(_&&(null==b?void 0:b.current)&&(null==v?void 0:v.current)){let e=b.current.getBoundingClientRect(),t=v.current.getBoundingClientRect(),a=document.body.getBoundingClientRect(),{top:s}=e,{right:n}=e;s+(null==t?void 0:t.height)>a.height&&(s-=(null==t?void 0:t.height)-e.height),n+(null==t?void 0:t.width)>a.width?j(n-(null==t?void 0:t.width)-16):j(n-16),h(s)}},[_]);let g=e=>{e.preventDefault(),e.stopPropagation(),(0,m.tqC)()&&o&&r&&t({key:"deal_cancellation_active",content:s().TAKE_PROFIT_LOSS_NOT_AVAILABLE,type:"error"}),r||u(!_)},f=i.useCallback(g,[g]),N=(0,l.jsx)("div",{className:"dc-contract-card-dialog-toggle__icon",children:(0,l.jsx)(tp.Z,{height:12,width:12})});return(0,l.jsxs)("div",{onClick:e=>{e.stopPropagation()},children:[r&&o&&(0,m.nIE)()?(0,l.jsx)($.Z,{alignment:"right",classNameBubble:"dc-contract-card-dialog__popover-bubble",className:"dc-contract-card-dialog__popover",is_bubble_hover_enabled:!0,margin:2,zIndex:"2",message:s().TAKE_PROFIT_LOSS_NOT_AVAILABLE,onBubbleClose:()=>{null==d||d()},children:(0,l.jsx)("button",{ref:b,className:"dc-contract-card-dialog-toggle",onClick:f,children:N})}):(0,l.jsx)("button",{ref:b,className:"dc-contract-card-dialog-toggle",onClick:f,children:N}),(0,l.jsx)(eG.Z,{children:(0,l.jsx)(tj.Z,{portal_element_id:"modal_root",visible:_,onClose:f,wrapper_classname:"contract-update",children:(0,l.jsx)(eF.Z,{className:"contract-update__wrapper",height_offset:"40px",children:(0,l.jsx)(tE,{addToast:t,contract:y,getCardLabels:s,getContractById:n,isMobile:!0,toggleDialog:f,...c})})})}),(0,l.jsx)(tt.Z,{children:(0,l.jsx)(tb,{ref:v,is_visible:_,left:p,top:x,toggle_ref:b,toggleDialog:f,children:(0,l.jsx)(tE,{addToast:t,contract:y,getCardLabels:s,getContractById:n,toggleDialog:f,...c})})})]})};tS.displayName="ToggleCardDialog";let tI=i.memo(tS),tA=i.memo(e=>{let t,a,{contract_info:s,contract_update:n,currency:r,getCardLabels:o,indicative:d,is_sold:c,is_positions:_,...u}=e,{buy_price:x,profit:h,limit_order:p,sell_price:j}=s,{take_profit:b}=(0,m.gNN)(n||p),v=(0,m.iBr)(s),{CONTRACT_VALUE:y,STAKE:g,TAKE_PROFIT:f,TOTAL_PROFIT_LOSS:N}=o();return h&&(t=+h>0,a=0>+h),(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:"dc-contract-card-items-wrapper",children:[(0,l.jsx)(th,{header:g,className:"dc-contract-card__stake",children:(0,l.jsx)(e2.Z,{amount:x,currency:r})}),(0,l.jsxs)(th,{header:y,className:"dc-contract-card__current-stake",children:[(0,l.jsx)("div",{className:U()({"dc-contract-card--profit":t,"dc-contract-card--loss":a}),children:(0,l.jsx)(e2.Z,{amount:j||d,currency:r})}),!c&&(0,l.jsx)(tn,{className:"dc-contract-card__indicative--movement",value:j||d})]}),(0,l.jsxs)(th,{header:N,is_crypto:(0,m.oS6)(r),is_loss:a,is_won:t,children:[(0,l.jsx)(e2.Z,{amount:h,currency:r}),!c&&(0,l.jsx)(tn,{className:"dc-contract-card__indicative--movement",value:h})]}),(0,l.jsxs)(th,{header:f,className:"dc-contract-card__take-profit",children:[b?(0,l.jsx)(e2.Z,{amount:b,currency:r}):(0,l.jsx)("strong",{children:"-"}),v&&(0,l.jsx)(tI,{contract_id:s.contract_id,getCardLabels:o,is_accumulator:!0,...u})]})]}),!!c&&(0,l.jsx)(eG.Z,{children:(0,l.jsx)("div",{className:U()("dc-contract-card__status",{"dc-contract-card__status--accumulator-mobile-positions":_}),children:(0,l.jsx)(tm,{getCardLabels:o,is_contract_won:t})})})]})}),tR=i.memo(e=>{let t,{contract_info:a,currency:s,is_sold:n,indicative:r,progress_slider_mobile_el:o}=e,{buy_price:d,contract_type:c,sell_price:_,profit:u,multiplier:x}=a,{INDICATIVE_PRICE:h,MULTIPLIER:p,PROFIT_LOSS:j,POTENTIAL_PROFIT_LOSS:b,PAYOUT:v,PURCHASE_PRICE:y}=(0,m.gk9)();return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:"dc-contract-card-items-wrapper dc-contract-card--lookbacks",children:[(0,l.jsxs)(th,{header:n?j:b,is_crypto:(0,m.oS6)(s),is_loss:0>Number(u),is_won:Number(u)>0,children:[(0,l.jsx)(e2.Z,{amount:u,currency:s}),!n&&(0,l.jsx)(tn,{className:"dc-contract-card__indicative--movement",value:u})]}),(0,l.jsxs)(th,{header:n?v:h,children:[(0,l.jsx)(e2.Z,{currency:s,amount:Number(_||r)}),!n&&(0,l.jsx)(tn,{className:"dc-contract-card__indicative--movement",value:Number(_||r)})]}),(0,l.jsx)(th,{header:y,children:(0,l.jsx)(e2.Z,{amount:d,currency:s})}),(0,l.jsx)(th,{header:p,children:`x${x}`}),(0,l.jsx)(eG.Z,{children:(0,l.jsx)("div",{className:"dc-contract-card__status",children:n?(0,l.jsx)(tm,{getCardLabels:m.gk9,is_contract_won:"won"===(0,m.efd)(a)}):o})})]}),(0,l.jsx)(th,{className:"dc-contract-card-item__payout-limit",children:(0,l.jsx)(ea.Z,{align:"center",lineHeightt:"l",size:"xxs",children:(t="",c===m.FTx.LB_PUT?t=(0,l.jsx)(f.Xx,{i18n_default_text:"(High - Close)"}):c===m.FTx.LB_CALL?t=(0,l.jsx)(f.Xx,{i18n_default_text:"(Close - Low)"}):c===m.FTx.LB_HIGH_LOW&&(t=(0,l.jsx)(f.Xx,{i18n_default_text:"(High - Low)"})),(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(f.Xx,{i18n_default_text:"Payout limit: {{multiplier}} x ",values:{multiplier:x}}),t]}))})})]})}),tL=e=>{let{contract_info:t,contract_update:a,currency:s,getCardLabels:n,has_progress_slider:r,progress_slider:o,is_mobile:d,is_sold:c,should_show_cancellation_warning:_,toggleCancellationWarning:u,...x}=e,{buy_price:h,bid_price:p,limit_order:j}=t,{take_profit:b,stop_loss:v}=(0,m.gNN)(a||j),y=(0,m.CeH)(t),g=(0,m.Dlf)(t),f=(0,m.iBr)(t),N=(0,m.vMw)(t),{CONTRACT_COST:C,CONTRACT_VALUE:k,DEAL_CANCEL_FEE:w,STAKE:T,STOP_LOSS:E,TAKE_PROFIT:S,TOTAL_PROFIT_LOSS:I}=n();return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:U()({"dc-contract-card-items-wrapper--mobile":d,"dc-contract-card-items-wrapper":!d,"dc-contract-card-items-wrapper--has-progress-slider":r&&!c}),children:[(0,l.jsx)(th,{header:C,className:"dc-contract-card__stake",children:(0,l.jsx)(e2.Z,{amount:h-y,currency:s})}),(0,l.jsxs)(th,{header:k,className:"dc-contract-card__current-stake",children:[(0,l.jsx)("div",{className:U()({"dc-contract-card--profit":N>0,"dc-contract-card--loss":N<0}),children:(0,l.jsx)(e2.Z,{amount:p,currency:s})}),!c&&(0,l.jsx)(tn,{className:"dc-contract-card__indicative--movement",value:N})]}),(0,l.jsx)(th,{header:w,className:U()("dc-contract-card__deal-cancel-fee",{"dc-contract-card__deal-cancel-fee__disabled":!y}),children:y?(0,l.jsx)(e2.Z,{amount:y,currency:s}):(0,l.jsx)(i.Fragment,{children:"-"})}),(0,l.jsx)(th,{header:T,className:"dc-contract-card__buy-price",children:(0,l.jsx)(e2.Z,{amount:h,currency:s})}),r&&d&&!c&&(0,l.jsx)(th,{className:"dc-contract-card__date-expiry",children:o}),(0,l.jsxs)("div",{className:"dc-contract-card__limit-order-info",children:[(0,l.jsx)(th,{header:S,className:"dc-contract-card__take-profit",children:b?(0,l.jsx)(e2.Z,{amount:b,currency:s}):(0,l.jsx)("strong",{children:"-"})}),(0,l.jsx)(th,{header:E,className:"dc-contract-card__stop-loss",children:v?(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("strong",{children:"-"}),(0,l.jsx)(e2.Z,{amount:v,currency:s})]}):(0,l.jsx)("strong",{children:"-"})}),(f||g)&&(0,l.jsx)(tI,{contract_id:t.contract_id,getCardLabels:n,is_valid_to_cancel:g,should_show_cancellation_warning:_,toggleCancellationWarning:u,...x})]})]}),(0,l.jsxs)(th,{className:"dc-contract-card-item__total-profit-loss",header:I,is_crypto:(0,m.oS6)(s),is_loss:N<0,is_won:N>0,children:[(0,l.jsx)(e2.Z,{amount:Math.abs(N),currency:s}),!c&&(0,l.jsx)(tn,{className:"dc-contract-card__indicative--movement",value:N})]})]})};tL.propTypes={addToast:eZ().func,contract_info:eZ().object,contract_update:eZ().object,currency:eZ().string,current_focus:eZ().string,error_message_alignment:eZ().string,getCardLabels:eZ().func,getContractById:eZ().func,is_mobile:eZ().bool,is_sold:eZ().bool,onMouseLeave:eZ().func,progress_slider:eZ().node,removeToast:eZ().func,setCurrentFocus:eZ().func,should_show_cancellation_warning:eZ().bool,toggleCancellationWarning:eZ().func,totalProfit:eZ().number.isRequired,has_progress_slider:eZ().bool};let tO=i.memo(tL),tM=i.memo(e=>{let{contract_info:t,contract_update:a,currency:s,getCardLabels:n,is_sold:r,progress_slider_mobile_el:o,...d}=e,{bid_price:c,buy_price:_,profit:u,barrier:x,entry_spot_display_value:h,limit_order:p={},sell_price:j}=t,{take_profit:b}=(0,m.gNN)(a||p),v=(0,m.iBr)(t),y=r?j:c,{BARRIER:g,CONTRACT_VALUE:f,ENTRY_SPOT:N,TAKE_PROFIT:C,TOTAL_PROFIT_LOSS:k,STAKE:w}=n();return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:U()("dc-contract-card-items-wrapper dc-contract-card--turbos"),children:[(0,l.jsx)(th,{className:"dc-contract-card__buy-price",is_crypto:(0,m.oS6)(s),header:w,children:(0,l.jsx)(e2.Z,{amount:_,currency:s})}),(0,l.jsxs)(th,{header:f,className:"dc-contract-card__contract-value",children:[(0,l.jsx)("div",{className:U()({"dc-contract-card--profit":Number(u)>0,"dc-contract-card--loss":0>Number(u)}),children:(0,l.jsx)(e2.Z,{amount:y,currency:s})}),!r&&(0,l.jsx)(tn,{className:"dc-contract-card__indicative--movement",value:j||y})]}),(0,l.jsx)(th,{header:N,is_crypto:(0,m.oS6)(s),className:"dc-contract-card__entry-spot",children:(0,m.oC5)(h)}),(0,l.jsx)("div",{className:"dc-contract-card__limit-order-info",children:(0,l.jsxs)(th,{header:C,className:"dc-contract-card__take-profit",children:[b?(0,l.jsx)(e2.Z,{amount:b,currency:s}):(0,l.jsx)("strong",{children:"-"}),v&&(0,l.jsx)(tI,{contract_id:t.contract_id,getCardLabels:n,is_turbos:!0,...d})]})}),(0,l.jsx)(th,{header:g,className:"dc-contract-card__barrier-level",children:(0,m.oC5)(x)}),(0,l.jsx)(eG.Z,{children:(0,l.jsx)("div",{className:"dc-contract-card__status",children:r?(0,l.jsx)(tm,{getCardLabels:n,is_contract_won:!!u&&u>0}):o})})]}),(0,l.jsxs)(th,{className:"dc-contract-card-item__total-profit-loss",header:k,is_crypto:(0,m.oS6)(s),is_loss:0>Number(u),is_won:Number(u)>0,children:[(0,l.jsx)(e2.Z,{amount:u,currency:s}),!r&&(0,l.jsx)(tn,{className:"dc-contract-card__indicative--movement",value:u})]})]})}),tD=i.memo(e=>{let{contract_info:t,currency:a,getCardLabels:s,is_sold:n,progress_slider:r}=e,{buy_price:o,bid_price:d,entry_spot_display_value:c,barrier:_,sell_price:u,profit:x}=t,h=n?u:d,{CONTRACT_VALUE:p,ENTRY_SPOT:j,STAKE:b,STRIKE:v,TOTAL_PROFIT_LOSS:y}=s();return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)(tt.Z,{children:[(0,l.jsxs)("div",{className:"dc-contract-card-items-wrapper",children:[(0,l.jsx)(th,{header:b,children:(0,l.jsx)(e2.Z,{amount:o,currency:a})}),(0,l.jsxs)(th,{className:"dc-contract-card-item__contract-value",header:p,children:[(0,l.jsx)("div",{className:U()({"dc-contract-card--profit":Number(x)>0,"dc-contract-card--loss":0>Number(x)}),children:(0,l.jsx)(e2.Z,{amount:h,currency:a})}),!n&&(0,l.jsx)(tn,{className:"dc-contract-card__indicative--movement",value:u||h})]}),(0,l.jsx)(th,{header:j,children:c&&(0,m.oC5)(c)}),(0,l.jsx)(th,{header:v,children:_&&(0,m.oC5)(_)})]}),(0,l.jsxs)(th,{className:"dc-contract-card-item__total-profit-loss",header:y,is_crypto:(0,m.oS6)(a),is_loss:0>Number(x),is_won:Number(x)>0,children:[(0,l.jsx)(e2.Z,{amount:x,currency:a}),!n&&(0,l.jsx)(tn,{className:"dc-contract-card__indicative--movement",value:x})]})]}),(0,l.jsx)(eG.Z,{children:(0,l.jsxs)("div",{className:"dc-contract-card-items-wrapper--mobile",children:[(0,l.jsxs)("div",{className:"dc-contract-card-items-wrapper-group",children:[(0,l.jsx)(th,{header:b,children:(0,l.jsx)(e2.Z,{amount:o,currency:a})}),(0,l.jsx)(th,{header:j,children:c&&(0,m.oC5)(c)})]}),(0,l.jsxs)("div",{className:"dc-contract-card-items-wrapper-group",children:[(0,l.jsxs)(th,{header:p,children:[(0,l.jsx)("div",{className:U()({"dc-contract-card--profit":Number(x)>0,"dc-contract-card--loss":0>Number(x)}),children:(0,l.jsx)(e2.Z,{amount:h,currency:a})}),!n&&(0,l.jsx)(tn,{className:"dc-contract-card__indicative--movement",value:u||h})]}),(0,l.jsx)(th,{header:v,children:_&&(0,m.oC5)(_)})]}),n?(0,l.jsx)(tm,{getCardLabels:s,is_contract_won:"won"===(0,m.efd)(t)}):r,(0,l.jsxs)(th,{className:"dc-contract-card-item__total-profit-loss",header:y,is_crypto:(0,m.oS6)(a),is_loss:0>Number(x),is_won:Number(x)>0,children:[(0,l.jsx)(e2.Z,{amount:x,currency:a}),!n&&(0,l.jsx)(tn,{className:"dc-contract-card__indicative--movement",value:x})]})]})})]})}),tU=e=>{let{contract_info:t,getCardLabels:a,is_sell_requested:s,onClickSell:n}=e,r=(0,m.iBr)(t);return((0,m._mr)(t)||(0,m.s0r)((null==t?void 0:t.shortcode)??"",t.purchase_time))&&(0,m.FJ7)(t)?(0,l.jsx)(i.Fragment,{children:r?(0,l.jsx)(tv.z,{className:U()("dc-btn--sell",{"dc-btn--loading":s}),"data-testid":"dt_contract_card_sell",disabled:s,onClick:e=>{null==n||n(t.contract_id),e.stopPropagation(),e.preventDefault()},variant:"outlined",children:a().SELL}):(0,l.jsx)("div",{className:"dc-contract-card__no-resale-msg",children:a().RESALE_NOT_OFFERED})}):null},tZ=e=>{let{className:t,contract_info:a,getCardLabels:s,is_sell_requested:n,onClickCancel:r,onClickSell:o,server_time:d}=e,{contract_id:c,cancellation:{date_expiry:_}={},profit:u}=a,x=(0,m.Dlf)(a);return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(tv.z,{id:`dc_contract_card_${c}_button`,className:U()(t,{"dc-btn--loading":n}),disabled:n||0>Number(u)&&x,onClick:e=>{o(c),e.stopPropagation(),e.preventDefault()},variant:"outlined",children:s().CLOSE}),x&&(0,l.jsxs)(tv.z,{id:`dc_contract_card_${c}_cancel_button`,className:"dc-btn--cancel",disabled:Number(u)>=0,onClick:e=>{r(c),e.stopPropagation(),e.preventDefault()},variant:"outlined",children:[s().CANCEL,_&&(0,l.jsx)(to,{end_time:_,format:"mm:ss",getCardLabels:s,start_time:d})]})]})},tF=e=>{let{current_tick:t,getCardLabels:a,ticks_count:s}=e,n=Array.from(Array(s).keys());return(0,l.jsxs)("div",{className:"dc-progress-slider__ticks",children:[(0,l.jsxs)(ea.Z,{styles:{lineHeight:"18px"},size:"xxs",className:"dc-progress-slider__ticks-caption",children:[a().TICK," ",t]}),(0,l.jsx)("div",{className:"dc-progress-slider__ticks-wrapper",children:n.map(e=>(0,l.jsx)("div",{className:U()("dc-progress-slider__ticks-step",{"dc-progress-slider__ticks-step--marked":e+1<=Number(t)})},e))})]})},tz=e=>{let{className:t,current_tick:a,expiry_time:s,getCardLabels:n,is_loading:r,server_time:o,start_time:d,ticks_count:c}=e,_=(0,m.dq6)(o,Number(d),Number(s));return(0,l.jsx)("div",{className:U()("dc-progress-slider",t),children:c?(0,l.jsx)(tF,{current_tick:a,getCardLabels:n,ticks_count:c}):(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(ea.Z,{size:"xxxs",className:"dc-progress-slider__remaining-time",children:(0,l.jsx)(to,{end_time:s,getCardLabels:n,start_time:o})}),r||_<1?(0,l.jsx)("div",{className:"dc-progress-slider__infinite-loader",children:(0,l.jsx)("div",{className:"dc-progress-slider__infinite-loader--indeterminate"})}):(0,l.jsx)("div",{className:"dc-progress-slider__track",children:(0,l.jsx)("div",{className:U()("dc-progress-slider__line",{"dc-progress-slider__line--green":_>=50,"dc-progress-slider__line--yellow":_<50&&_>=20,"dc-progress-slider__line--red":_<20}),style:{width:`${_}%`}})})]})})},tP=e=>{let{displayed_trade_param:t,getContractTypeDisplay:a,is_high_low:s,is_multipliers:n,is_turbos:i,type:r=""}=e,o="";return s&&(o="CALL"===r?"HIGHER":"LOWER"),(0,l.jsxs)("div",{className:"dc-contract-type",children:[(0,l.jsx)("div",{className:"dc-contract-type__type-wrapper",children:(0,l.jsx)(V,{type:s&&!(0,m.Yeo)(r)?o:r,className:"category-type",size:"md"})}),(0,l.jsxs)("div",{className:U()("dc-contract-type__type-label",{"dc-contract-type__type-label--smarttrader-contract":(0,m.xGd)(r),"dc-contract-type__type-label--lookbacks-contract":(0,m.vxy)(r),"dc-contract-type__type-label--multipliers":n}),children:[(0,l.jsx)("div",{children:a(r,{isHighLow:s,showMainTitle:n||i})||""}),t&&(0,l.jsx)("div",{className:"dc-contract-type__type-label-trade-param",children:t})]})]})},tB=i.memo(e=>{let{current_tick:t,label:a}=e;return(0,l.jsx)("div",{className:"dc-tick-counter-bar__container",children:(0,l.jsx)("div",{className:"dc-tick-counter-bar__track",children:(0,l.jsx)(ea.Z,{size:"xxs",weight:"bold",align:"center",color:"profit-success",className:"dc-tick-counter-bar__text",children:`${t} ${a}`})})})}),tX=e=>{let{currency:t,contract_id:a,getCardLabels:s,getContractPath:n,is_positions:r,is_visible:o,onClickRemove:d,payout_info:c,result:_}=e,u="won"===_;return(0,l.jsx)(i.Fragment,{children:(0,l.jsx)(eT.Z,{in:o,timeout:250,classNames:{enter:"dc-contract-card__result--enter",enterDone:"dc-contract-card__result--enter-done",exit:"dc-contract-card__result--exit"},unmountOnExit:!0,children:(0,l.jsxs)("div",{id:`dc_contract_card_${a}_result`,className:U()("dc-contract-card__result",{"dc-result__positions-overlay":r,"dc-contract-card__result--won":u,"dc-contract-card__result--lost":!u}),children:[r&&(0,l.jsx)("span",{id:`dc_contract_card_${a}_result_close_icon`,className:"dc-result__close-btn",onClick:()=>{a&&(null==d||d(a))}}),n&&(0,l.jsx)(ed.OL,{className:"dc-result__caption-wrapper",to:n(a)}),(0,l.jsxs)("div",{className:"dc-result__content",children:[(0,l.jsx)(tm,{getCardLabels:s,is_contract_won:u}),(0,l.jsx)(ea.Z,{weight:"bold",size:"s",lineHeight:"2xl",color:u?"profit-success":"loss-danger",children:(0,l.jsx)(e2.Z,{amount:c,currency:t,has_sign:!0,show_currency:!0})})]})]})})})},t$=e=>{let{children:t,contract_info:a,getCardLabels:s,getContractPath:n,is_multiplier:r,is_positions:o,onClickRemove:d,profit_loss:c,result:_,should_show_result_overlay:u}=e,x=r?(0,te.vM)(a):c;return(0,l.jsxs)(i.Fragment,{children:[u&&(0,l.jsx)(tt.Z,{children:(0,l.jsx)(tX,{contract_id:a.contract_id,currency:a.currency,getCardLabels:s,getContractPath:n,is_multiplier:r,is_visible:!!a.is_sold,onClickRemove:d,payout_info:x,result:_||(c>=0?"won":"lost"),is_positions:o})}),t]})};t$.Header=e=>{var t;let{contract_info:a,display_name:s,getCardLabels:n,getContractTypeDisplay:r,has_progress_slider:o,id:d,is_sell_requested:c,is_sold:_,is_valid_to_sell:u,onClickSell:x,server_time:h}=e,p=a.tick_count?(0,m.v3q)(a):null,{growth_rate:j,underlying:b,multiplier:v,contract_type:y,shortcode:g,purchase_time:f,date_expiry:C,tick_count:k,tick_passed:w}=a,T=!!a.is_sold||_,E=(0,m.XtD)(y),S=(0,m.xGd)(y),{isMobile:I}=(0,N.F)(),A=(0,m.MOe)(y),R=(0,m.L8o)(y),L=(0,m.CY$)({shortcode:g}),O=(null==(t=i.useMemo(()=>[{is_param_displayed:R,displayed_param:`${r(y??"",{isHighLow:L})} x${v}`.trim()},{is_param_displayed:E,displayed_param:`${(0,m.dR9)(j||0)}%`},{is_param_displayed:A,displayed_param:(0,m.Lp7)(y)}],[y,j,v,E,R,A,L]).find(e=>e.is_param_displayed))?void 0:t.displayed_param)||"";return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:U()("dc-contract-card__grid","dc-contract-card__grid-underlying-trade",{"dc-contract-card__grid-underlying-trade--trader":!1,"dc-contract-card__grid-underlying-trade--trader--accumulator":(I,!1),"dc-contract-card__grid-underlying-trade--trader--sold":(E||A||R)&&T}),children:[(0,l.jsxs)("div",{id:"dc-contract_card_underlying_label",className:U()("dc-contract-card__underlying-name",{"dc-contract-card__underlying-name--accumulator":E}),children:[(0,l.jsx)(X,{type:b??"",size:"md"}),(0,l.jsx)(ea.Z,{size:"xxs",className:U()("dc-contract-card__symbol",{"dc-contract-card__symbol--smarttrader-contract":S}),weight:"bold",children:s||a.display_name})]}),(0,l.jsx)("div",{id:"dc-contract_card_type_label",className:U()("dc-contract-card__type",{"dc-contract-card__type--accumulators":E}),children:(0,l.jsx)(tP,{displayed_trade_param:O,getContractTypeDisplay:r,is_high_low:L,is_multipliers:R,is_turbos:A,type:y})}),(0,l.jsx)(eG.Z,{children:u?(0,l.jsx)(eT.Z,{in:!!u,timeout:250,classNames:{enter:"dc-contract-card__sell-button--enter",enterDone:"dc-contract-card__sell-button--enter-done",exit:"dc-contract-card__sell-button--exit"},unmountOnExit:!0,children:(0,l.jsx)("div",{className:"dc-contract-card__sell-button-mobile",children:(0,l.jsx)(tv.z,{id:`dc_contract_card_${d}_button`,className:U()("dc-btn--sell",{"dc-btn--loading":c}),disabled:!u||c,onClick:()=>x(d),variant:"outlined",children:n().SELL})})}):null})]}),!T&&E&&(0,l.jsx)(tB,{current_tick:w,label:n().TICKS}),(0,l.jsx)(eG.Z,{children:(0,l.jsx)("div",{className:"dc-progress-slider--completed"})}),(0,l.jsxs)(tt.Z,{children:[(!o||!!T)&&(0,l.jsx)("div",{className:"dc-progress-slider--completed"}),o&&!T&&!E&&(0,l.jsx)(tz,{current_tick:p,expiry_time:C,getCardLabels:n,is_loading:!1,server_time:h,start_time:f,ticks_count:k})]})]})},t$.Body=e=>{let t,{addToast:a,contract_info:s,contract_update:n,currency:r,current_focus:o,error_message_alignment:d,getCardLabels:c,getContractById:_,has_progress_slider:u,is_accumulator:x,is_mobile:h,is_multiplier:p,is_positions:j,is_sold:b,is_turbos:v,is_vanilla:y,is_lookbacks:g,onMouseLeave:f,removeToast:N,server_time:C,setCurrentFocus:k,should_show_cancellation_warning:w,toggleCancellationWarning:T}=e,E=(0,m.Kq_)(s),{buy_price:S,sell_price:I,payout:A,profit:R,tick_count:L,date_expiry:O,purchase_time:M}=s,D=L?(0,m.v3q)(s):null,{CONTRACT_VALUE:Z,POTENTIAL_PAYOUT:F,TOTAL_PROFIT_LOSS:z,STAKE:P}=c(),B=(0,l.jsx)(tu,{current_tick:D,expiry_time:O,getCardLabels:c,is_loading:!1,server_time:C,start_time:M,ticks_count:L}),X={addToast:a,current_focus:o,error_message_alignment:d,getContractById:_,onMouseLeave:f,removeToast:N,setCurrentFocus:k,totalProfit:p&&!isNaN(Number(R))?(0,m.vMw)(s):Number(R)};return t=p?(0,l.jsx)(tO,{contract_info:s,contract_update:n,currency:r,getCardLabels:c,has_progress_slider:u,progress_slider:B,is_mobile:h,is_sold:b,should_show_cancellation_warning:w,toggleCancellationWarning:T,...X}):x?(0,l.jsx)(tA,{contract_info:s,contract_update:n,currency:r,getCardLabels:c,indicative:E,is_sold:b,is_positions:j,...X}):v?(0,l.jsx)(tM,{contract_info:s,contract_update:n,currency:r,getCardLabels:c,is_sold:b,progress_slider_mobile_el:B,...X}):y?(0,l.jsx)(tD,{contract_info:s,currency:r,getCardLabels:c,is_sold:b,progress_slider:B}):g?(0,l.jsx)(tR,{contract_info:s,currency:r,is_sold:b,indicative:E,progress_slider_mobile_el:B}):(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:"dc-contract-card-items-wrapper",children:[(0,l.jsxs)(th,{header:z,is_crypto:(0,m.oS6)(r),is_loss:0>Number(R),is_won:Number(R)>0,children:[(0,l.jsx)(e2.Z,{amount:R,currency:r}),!b&&(0,l.jsx)(tn,{className:"dc-contract-card__indicative--movement",value:R})]}),(0,l.jsxs)(th,{header:Z,children:[(0,l.jsx)("div",{className:U()({"dc-contract-card--profit":Number(R)>0,"dc-contract-card--loss":0>Number(R)}),children:(0,l.jsx)(e2.Z,{currency:r,amount:Number(I||E)})}),!b&&(0,l.jsx)(tn,{className:"dc-contract-card__indicative--movement",value:Number(I||E)})]}),(0,l.jsx)(th,{header:P,children:(0,l.jsx)(e2.Z,{amount:S,currency:r})}),(0,l.jsx)(th,{header:F,children:(0,l.jsx)(e2.Z,{currency:r,amount:A})})]}),(0,l.jsx)(eG.Z,{children:(0,l.jsx)("div",{className:"dc-contract-card__status",children:b?(0,l.jsx)(tm,{getCardLabels:c,is_contract_won:"won"===(0,m.efd)(s)}):B})})]}),(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(tl,{currency:r}),(0,l.jsx)(tt.Z,{children:t}),(0,l.jsx)(eG.Z,{children:(0,l.jsx)("div",{className:U()("dc-contract-card__separatorclass",{"dc-contract-card__body-wrapper":!p&&!v&&!g}),children:t})})]})},t$.Footer=e=>{let{contract_info:t,getCardLabels:a,is_multiplier:s,is_positions:n,is_sell_requested:r,is_lookbacks:o,onClickCancel:d,onClickSell:c,onFooterEntered:_,server_time:u,should_show_transition:x}=e,{in_prop:h}=(0,m.hwq)(!!x),p=(0,m.Dlf)(t),j=(0,m._mr)(t)&&(0,m.FJ7)(t),b=o&&(0,m.iBr)(t)&&j;return j?(0,l.jsx)(eT.Z,{in:h,timeout:250*!!x,classNames:x?{enter:"dc-contract-card__sell-button--enter",enterDone:"dc-contract-card__sell-button--enter-done",exit:"dc-contract-card__sell-button--exit"}:{},onEntered:_,unmountOnExit:!0,children:(0,l.jsx)("div",{className:"dc-contract-card-item__footer",children:s?(0,l.jsx)("div",{className:U()("dc-contract-card__sell-button",{"dc-contract-card__sell-button--has-cancel-btn":p,"dc-contract-card__sell-button--positions":n}),children:(0,l.jsx)(tZ,{className:"dc-btn--sell",contract_info:t,getCardLabels:a,is_sell_requested:r,onClickCancel:d,onClickSell:c,server_time:u})}):(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("div",{className:U()("dc-contract-card__sell-button",{"dc-contract-card__sell-button--positions":n}),children:(0,l.jsx)(tU,{contract_info:t,is_sell_requested:r,getCardLabels:a,onClickSell:c})}),b&&(0,l.jsx)(ea.Z,{as:"div",size:"xxxs",color:"less-prominent",lineHeight:"s",className:"lookbacks--note",children:(0,l.jsx)(f.Xx,{i18n_default_text:"<0>Note:</0> Contract will be sold at the prevailing market price when the request is received by our servers. This price may differ from the indicated price.",components:[(0,l.jsx)("strong",{},0)]})})]})})}):null},t$.Loader=e6,t$.ContractTypeCell=tP,t$.MultiplierCloseActions=tZ,t$.Sell=tU;let tH=(0,r.Pi)(e=>{let{contract_info:t,is_contract_loading:a,is_bot_running:s}=e,{summary_card:n,run_panel:r,ui:o,common:d}=(0,j.oR)(),{is_contract_completed:c,is_contract_inactive:_,is_multiplier:u,is_accumulator:x,setIsBotRunning:h}=n,{onClickSell:p,is_sell_requested:b,contract_stage:v}=r,{addToast:y,current_focus:g,removeToast:C,setCurrentFocus:k}=o,{server_time:w}=d,{isDesktop:T}=(0,N.F)();i.useEffect(()=>h(),[a]);let E=(0,l.jsx)(t$.Header,{contract_info:t,getCardLabels:m.gk9,getContractTypeDisplay:e7.h8,has_progress_slider:!u,is_sold:c,server_time:w}),S=(0,l.jsx)(t$.Body,{addToast:y,contract_info:t,currency:(null==t?void 0:t.currency)??"",current_focus:g,error_message_alignment:"left",getCardLabels:m.gk9,getContractById:()=>n,is_mobile:!T,is_multiplier:u,is_accumulator:x,is_sold:c,removeToast:C,server_time:w,setCurrentFocus:k}),I=(0,l.jsx)(t$.Footer,{contract_info:t,getCardLabels:m.gk9,is_multiplier:u,is_sell_requested:b,onClickSell:p}),A=(0,l.jsxs)(i.Fragment,{children:[E,S,I]});return(0,l.jsxs)("div",{className:U()("db-summary-card",{"db-summary-card--mobile":!T,"db-summary-card--inactive":_&&!a&&!t,"db-summary-card--completed":c,"db-summary-card--completed-mobile":c&&!T,"db-summary-card--delayed-loading":s}),"data-testid":"dt_mock_summary_card",children:[a&&!s&&(0,l.jsx)(e6,{speed:2}),s&&(0,l.jsx)(e6,{speed:2,contract_stage:v}),!a&&t&&!s&&(0,l.jsx)(t$,{contract_info:t,getCardLabels:m.gk9,is_multiplier:u,profit_loss:t.profit,should_show_result_overlay:!0,children:(0,l.jsx)("div",{className:U()("dc-contract-card",{"dc-contract-card--green":t.profit>0,"dc-contract-card--red":t.profit<0}),children:A})}),!a&&!t&&!s&&(0,l.jsxs)(ea.Z,{as:"p",align:"center",lineHeight:"s",size:"xs",children:[(0,f.NC)("When youre ready to trade, hit "),(0,l.jsx)("strong",{className:"summary-panel-inactive__strong",children:(0,f.NC)("Run")}),(0,f.NC)(". Youll be able to track your bots performance here.")]})]})}),tV=(0,r.Pi)(e=>{let{is_drawer_open:t}=e,{dashboard:a,summary_card:s}=(0,j.oR)(),{is_contract_loading:n,contract_info:i,is_bot_running:r}=s,{active_tour:o}=a,{isDesktop:d}=(0,N.F)();return(0,l.jsx)("div",{className:U()({"run-panel-tab__content":d,"run-panel-tab__content--mobile":!d&&t,"run-panel-tab__content--summary-tab":d&&t||o}),"data-testid":"mock-summary",children:(0,l.jsx)(er.Z,{className:U()({summary:!n&&!i||r,"summary--loading":!d&&n||!d&&!n&&i}),children:(0,l.jsx)(tH,{is_contract_loading:n,contract_info:i,is_bot_running:r})})})});var tq=a(71766),tG=a(54176);let tY=e=>{let{profit:t}=e,a=t>=0;return(0,l.jsx)("div",{className:U()("db-contract-card__result",{"db-contract-card__result--won":a,"db-contract-card__result--lost":!a}),children:(0,l.jsx)(ea.Z,{weight:"bold",className:"db-contract-card__result-caption",children:a?(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(f.Xx,{i18n_default_text:"Won"}),(0,l.jsx)(tq.Z,{className:"db-contract-card__result-icon",color:"green"})]}):(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(f.Xx,{i18n_default_text:"Lost"}),(0,l.jsx)(tG.Z,{className:"db-contract-card__result-icon",color:"red"})]})})})};var tK=a(92947),tW=a(16854),tJ=a(67109),tQ=a(513);let t0=e=>{let{className:t}=e;return(0,l.jsxs)("div",{className:U()("circular-wrapper",t),children:[(0,l.jsx)("span",{className:"static-circle"}),(0,l.jsx)("span",{className:"dynamic-circle"})]})},t1=Object.freeze({NOT_RUNNING:"Bot is not running",STARTING:"Bot is starting",RUNNING:"Bot running",PURCHASE_SENT:"Buying contract",PURCHASE_RECEIVED:"Contract bought",IS_STOPPING:"Bot is stopping",CONTRACT_CLOSED:"Contract closed"}),t8=e=>{let{contract_stage:t}=e;switch(void 0!==t?t:es.K.NOT_RUNNING){case es.K.STARTING:return(0,l.jsx)(f.Xx,{i18n_default_text:t1.STARTING});case es.K.RUNNING:return(0,l.jsx)(f.Xx,{i18n_default_text:t1.RUNNING});case es.K.PURCHASE_SENT:return(0,l.jsx)(f.Xx,{i18n_default_text:t1.PURCHASE_SENT});case es.K.PURCHASE_RECEIVED:return(0,l.jsx)(f.Xx,{i18n_default_text:t1.PURCHASE_RECEIVED});case es.K.IS_STOPPING:return(0,l.jsx)(f.Xx,{i18n_default_text:t1.IS_STOPPING});case es.K.CONTRACT_CLOSED:return(0,l.jsx)(f.Xx,{i18n_default_text:t1.CONTRACT_CLOSED});case es.K.NOT_RUNNING:default:return(0,l.jsx)(f.Xx,{i18n_default_text:t1.NOT_RUNNING})}},t2=(0,r.Pi)(e=>{let{className:t,should_show_overlay:a}=e,{dashboard:s,run_panel:n,summary_card:r,blockly_store:o}=(0,j.oR)(),{client:d}=(0,j.oR)(),{active_tab:c}=s,{has_active_bot:_,has_saved_bots:u}=o,{isMobile:x}=(0,N.F)(),{is_contract_completed:m,profit:h}=r,{contract_stage:p,is_stop_button_visible:b,is_stop_button_disabled:v,onRunButtonClick:y,onStopBotClick:g,performSelfExclusionCheck:C}=n,{account_status:k}=d,w=null==k?void 0:k.cashier_validation,[T,E]=i.useState(!1),S=null==w?void 0:w.includes("WithdrawServiceUnavailableForPA");i.useEffect(()=>{C()},[]);let{load_modal:I}=(0,j.oR)(),{dashboard_strategies:A,is_delete_modal_open:R}=I,L=i.useRef(R);i.useEffect(()=>{(async()=>{await o.checkForSavedBots()})()},[A,R,b]),i.useEffect(()=>{L.current&&!R&&(async()=>{await new Promise(e=>setTimeout(e,100)),await o.checkForSavedBots(),b||(E(!0),setTimeout(()=>E(!1),0))})(),L.current=R},[R,b]),i.useEffect(()=>{T&&setTimeout(()=>{E(!1)},1e3)},[T,b]);let O=["","",""],M=p===es.K.PURCHASE_SENT,D=p===es.K.PURCHASE_RECEIVED,Z=p-(M||D?2:3);if(Z>=0){Z<O.length&&(O[Z]="active"),m&&(Z+=1);for(let e=0;e<Z-1;e++)O[e]="completed"}let F=!_&&!u,z=c===tK.ve.BOT_BUILDER,P=!b&&(T||F&&!z),B=!b&&!z&&F,X=i.useMemo(()=>b&&!v?{id:"db-animation__stop-button",class:"animation__stop-button",text:(0,l.jsx)(f.Xx,{i18n_default_text:"Stop"}),icon:(0,l.jsx)(tW.Z,{fill:"#fff"})}:{id:"db-animation__run-button",class:"animation__run-button",text:(0,l.jsx)(f.Xx,{i18n_default_text:"Run"}),icon:(0,l.jsx)(tJ.Z,{fill:"#fff"})},[b]),$=a&&m,H="number"==typeof c?c:0;return(0,l.jsxs)("div",{className:U()("animation__wrapper",t),children:[B?(0,l.jsxs)("div",{className:"run__button_wrapper",children:[(0,l.jsx)(tN,{alignment:(()=>{if(x)return"top";try{let e=document.querySelector(".run__button_wrapper");if(e){let t=e.getBoundingClientRect(),a="number"==typeof t.bottom?t.bottom:0,s="number"==typeof window.innerHeight?window.innerHeight:0;return a>s-150?"top":"left"}}catch(e){console.error("Error determining tooltip position:",e)}return"left"})(),message:(0,f.NC)("The Run button is disabled because no Bot has been created yet."),icon:"info",className:"qs__tooltip"}),(0,l.jsx)("div",{style:{opacity:.5,marginLeft:"8px"},children:(0,l.jsx)(eA.Z,{is_disabled:!0,className:X.class,id:X.id,icon:X.icon,onClick:()=>{},has_effect:!0,...b||!S?{primary:!0}:{green:!0},children:X.text})})]}):(0,l.jsx)(eA.Z,{is_disabled:P&&!S||3===p,className:X.class,id:X.id,icon:X.icon,onClick:()=>{if(E(!0),b)return void g();y(),(0,tQ.GE)({subpage_name:H})},has_effect:!0,...b||!S?{primary:!0}:{green:!0},children:X.text}),(0,l.jsxs)("div",{className:U()("animation__container",t,{"animation--running":p>0,"animation--completed":$,"animation--disabled":P}),children:[$&&(0,l.jsx)(tY,{profit:h}),(0,l.jsx)("span",{className:"animation__text",children:(0,l.jsx)(t8,{contract_stage:p})}),(0,l.jsxs)("div",{className:"animation__progress",children:[(0,l.jsx)("div",{className:"animation__progress-line",children:(0,l.jsx)("div",{className:`animation__progress-bar animation__progress-${p}`})}),O.map((e,t)=>(0,l.jsx)(t0,{className:e},`status_class-${e}-${t}`))]})]})]})}),t3=i.memo(e=>{var t,a;let{className:s,column:n,is_footer:i,passthrough:r,row:o}=e;if(!n)return null;let{col_index:d,title:c}=n,_=null==o?void 0:o[d],u=(0,m.MOe)(null==o||null==(t=o.contract_info)?void 0:t.contract_type),x=(0,m.Yeo)(null==o||null==(a=o.contract_info)?void 0:a.contract_type);return(0,l.jsxs)("div",{className:U()(s,n.col_index),children:[!i&&(0,l.jsx)("div",{className:U()(`${n.col_index}__row-title`,"data-list__row-title"),children:n.renderHeader?n.renderHeader({title:c,is_vanilla:x}):c}),(0,l.jsx)("div",{className:"data-list__row-content",children:n.renderCellContent?n.renderCellContent({cell_value:_,is_footer:i,passthrough:r,row_obj:o,is_vanilla:x,is_turbos:u}):_})]})}),t7=i.memo(e=>{let{action_desc:t,destination_link:a,row_gap:s,row_key:n,rowRenderer:r,measure:o,is_dynamic_height:d,...c}=e,[_,u]=i.useState(!1),x=(0,m.tmR)(),h=e_(()=>u(!1),5e3),p=()=>{t&&(u(!_),h())},j=e=>{(0,m.K9$)(p,e)};return i.useEffect(()=>{x()&&d&&(null==o||o())},[_,d,o]),(0,l.jsx)("div",{className:"data-list__row--wrapper",style:{paddingBottom:`${s||0}px`},children:a?(0,l.jsx)(ed.OL,{className:"data-list__item--wrapper",id:`dt_reports_contract_${n}`,to:{pathname:a,state:{from_table_row:!0}},children:(0,l.jsx)("div",{className:"data-list__item",children:r({measure:o,...c})})}):(0,l.jsx)("div",{className:U()("data-list__item--wrapper",{"data-list__item--dynamic-height-wrapper":d}),children:t?(0,l.jsx)("div",{className:"data-list__item",onClick:j,onKeyDown:j,children:_?(0,l.jsx)("div",{className:"data-list__desc--wrapper",children:t.component&&(0,l.jsx)("div",{children:t.component})}):r({measure:o,...c})}):(0,l.jsx)("div",{className:"data-list__item",children:r({measure:o,...c})})})})}),t9=ei.aV,t5=ei.qj,t4=ei.Z8,t6=i.memo(e=>{let{children:t,className:a,data_source:s,footer:n,getRowSize:r,keyMapper:o,onRowsRendered:d,onScroll:c,setListRef:_,overscanRowCount:u,...x}=e,[h,p]=i.useState(!0),[j,b]=i.useState(!1),[v,y]=i.useState(0),g=i.useRef(),f=i.useRef(null),N=i.useRef({}),C=i.useRef(null);C.current=s;let k=!r,w=i.useCallback(()=>{s.forEach((e,t)=>{let a=(null==o?void 0:o(e))||`${t}-0`;N.current[a]=!0})},[s,o]);i.useEffect(()=>{k&&(g.current=new ei.t1({fixedWidth:!0,keyMapper:e=>(null==C?void 0:C.current)&&e<(null==C?void 0:C.current.length)&&(null==o?void 0:o(C.current[e]))||e})),w(),p(!1)},[]),i.useEffect(()=>{if(k){var e,t;null==(t=f.current)||null==(e=t.recomputeGridSize)||e.call(t,{columnIndex:0,rowIndex:0})}w()},[s,k,w]);let T=e=>{let{style:t,index:a,key:n,parent:i}=e,{getRowAction:r,passthrough:d,row_gap:c}=x,_=s[a],{action_type:u,shortcode:h,purchase_time:p,transaction_time:b,id:v}=_;if((0,m.JIr)(u,h,p||b)){let e=!!(null==s?void 0:s.find(e=>"sell"===e.action_type&&e.id===v));_={..._,is_sold:e}}let y=r&&r(_),f="string"==typeof y?y:void 0,C="object"==typeof y?y:void 0,w=(null==o?void 0:o(_))||n,T=function(){let{measure:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.jsx)(t7,{action_desc:C,destination_link:f,is_new_row:!N.current[w],is_scrolling:j,measure:e,passthrough:d,row_gap:c,row_key:w,row:_,rowRenderer:x.rowRenderer,is_dynamic_height:k})};return k&&g.current?(0,l.jsx)(t4,{cache:g.current,columnIndex:0,rowIndex:a,parent:i,children:e=>{let{measure:a}=e;return(0,l.jsx)("div",{style:t,children:T({measure:a})})}},w):(0,l.jsx)("div",{style:t,children:T()},w)},E=e=>{let t;clearTimeout(t),j||b(!0),t=setTimeout(()=>{h||b(!1)},200),y(e.target.scrollTop),"function"==typeof c&&c(e)},S=e=>{f.current=e,null==_||_(e)};return h?(0,l.jsx)("div",{}):(0,l.jsxs)("div",{"data-testid":"dt_data_list",className:U()(a,"data-list",{[`${a}__data-list`]:a}),children:[(0,l.jsxs)("div",{className:"data-list__body-wrapper",children:[(0,l.jsx)("div",{className:U()("data-list__body",{[`${a}__data-list-body`]:a}),children:(0,l.jsx)(t5,{children:e=>{var t,n;let{width:i,height:o}=e;return(0,l.jsx)(el.Z,{style:{height:o,width:i},children:(0,l.jsx)(er.Z,{onScroll:E,autohide:!0,is_bypassed:(0,m.tqC)(),children:(0,l.jsx)(t9,{className:a,deferredMeasurementCache:null==g?void 0:g.current,height:o,onRowsRendered:d,overscanRowCount:u||1,ref:e=>S(e),rowCount:s.length,rowHeight:k&&(null==g||null==(t=g.current)?void 0:t.rowHeight)?null==g||null==(n=g.current)?void 0:n.rowHeight:r||0,rowRenderer:T,scrollingResetTimeInterval:0,width:i,...(0,m.nIE)()?{scrollTop:v,autoHeight:!0}:{onScroll:e=>E({target:e})}})})})}})}),t]}),n&&(0,l.jsx)("div",{className:U()("data-list__footer",{[`${a}__data-list-footer`]:a}),children:(0,l.jsx)(i.Fragment,{children:x.rowRenderer({row:n,is_footer:!0})})})]})});t6.displayName="DataList",t6.Cell=t3;let ae=Object.freeze({QUICK_STRATEGY:99999,TOOLBAR:100,TRANSACTION:10,SUMMARY_TOOLTIPS:5,RUN_PANEL:8});var at=a(62017),aa=a(49355);let as=e=>{let{icon:t,title:a,message:s,className:n}=e;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)($.Z,{className:U()(n,"transactions__icon"),alignment:(0,P.rK)()?"right":"left",message:a,zIndex:ae.TRANSACTION.toString(),children:t}),s]})},an=()=>(0,l.jsx)(Z.ZP,{className:"transactions__loader-text",height:10,width:80,speed:3,backgroundColor:"var(--general-section-2)",foregroundColor:"var(--general-hover)",children:(0,l.jsx)("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"100",height:"12"})}),al=()=>(0,l.jsx)(Z.ZP,{className:"transactions__loader-icon",speed:3,width:24,height:24,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)",children:(0,l.jsx)("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"24",height:"24"})}),ai=e=>{let{icon:t,title:a,children:s}=e;return(0,l.jsxs)("div",{className:"transactions__popover-item",children:[t&&(0,l.jsx)("div",{className:"transaction__popover-icon",children:t}),(0,l.jsxs)("div",{className:"transactions__popover-details",children:[(0,l.jsx)("div",{className:"transactions__popover-title",children:a}),s]})]})},ar=e=>{let{contract:t}=e;return(0,l.jsxs)("div",{className:"transactions__popover-content",children:[t.transaction_ids&&(0,l.jsxs)(ai,{title:(0,l.jsx)(f.Xx,{i18n_default_text:"Reference IDs"}),children:[t.transaction_ids.buy&&(0,l.jsx)("div",{className:"transactions__popover-value",children:`${t.transaction_ids.buy} ${(0,f.NC)("(Buy)")}`}),t.transaction_ids.sell&&(0,l.jsx)("div",{className:"transactions__popover-value",children:`${t.transaction_ids.sell} ${(0,f.NC)("(Sell)")}`})]}),t.tick_count&&(0,l.jsx)(ai,{title:(0,f.NC)("Duration"),children:(0,l.jsx)("div",{className:"transactions__popover-value",children:`${t.tick_count} ${(0,f.NC)("ticks")}`})}),t.barrier&&(0,l.jsx)(ai,{title:(0,f.NC)("Barrier"),children:(0,l.jsx)("div",{className:"transactions__popover-value",children:t.barrier})})||t.high_barrier&&t.low_barrier&&(0,l.jsxs)(ai,{title:(0,f.NC)("Barriers"),children:[(0,l.jsx)("div",{className:"transactions__popover-value",children:`${t.high_barrier} ${(0,f.NC)("(High)")}`}),(0,l.jsx)("div",{className:"transactions__popover-value",children:`${t.low_barrier} ${(0,f.NC)("(Low)")}`})]}),t.date_start&&(0,l.jsx)(ai,{title:(0,f.NC)("Start time"),children:(0,l.jsx)("div",{className:"transactions__popover-value",children:(0,m.fcq)(t.date_start,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]")})}),t.entry_tick&&(0,l.jsxs)(ai,{title:(0,f.NC)("Entry spot"),children:[(0,l.jsx)("div",{className:"transactions__popover-value",children:t.entry_tick}),t.entry_tick_time&&(0,l.jsx)("div",{className:"transactions__popover-value",children:(0,m.fcq)(t.entry_tick_time,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]")})]}),t.exit_tick&&t.exit_tick_time&&(0,l.jsxs)(ai,{title:(0,f.NC)("Exit spot"),children:[(0,l.jsx)("div",{className:"transactions__popover-value",children:t.exit_tick}),(0,l.jsx)("div",{className:"transactions__popover-value",children:(0,m.fcq)(t.exit_tick_time,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]")})]})||t.exit_tick&&(0,l.jsx)(ai,{title:(0,f.NC)("Exit time"),children:(0,l.jsx)("div",{className:"transactions__popover-value",children:t.exit_tick})})]})},ao=e=>{var t;let{contract:a,active_transaction_id:s,onClickTransaction:n}=e;return(0,l.jsx)($.Z,{zIndex:ae.TRANSACTION.toString(),alignment:(0,P.rK)()?"right":"left",className:"transactions__item-wrapper",is_open:!!(a&&s===(null==a||null==(t=a.transaction_ids)?void 0:t.buy)),message:a&&(0,l.jsx)(ar,{contract:a}),children:(0,l.jsxs)("div",{"data-testid":"dt_transactions_item",className:"transactions__item",onClick:()=>{var e;return n&&n((null==a||null==(e=a.transaction_ids)?void 0:e.buy)||null)},children:[(0,l.jsxs)("div",{className:"transactions__cell transactions__trade-type",children:[(0,l.jsx)("div",{className:"transactions__loader-container",children:a?(0,l.jsx)(as,{icon:(0,l.jsx)(X,{type:a.underlying}),title:a.display_name||""}):(0,l.jsx)(al,{})}),(0,l.jsx)("div",{className:"transactions__loader-container",children:a?(0,l.jsx)(as,{icon:(0,l.jsx)(V,{type:a.contract_type||"",size:"sm"}),title:(0,z.getContractTypeName)(a)}):(0,l.jsx)(al,{})})]}),(0,l.jsx)("div",{className:"transactions__cell transactions__entry-spot",children:(0,l.jsx)(as,{icon:(0,l.jsx)(at.Z,{height:10,width:10}),title:(0,f.NC)("Entry spot"),message:(null==a?void 0:a.entry_tick)??(0,l.jsx)(an,{})})}),(0,l.jsx)("div",{className:"transactions__cell transactions__exit-spot",children:(0,l.jsx)(as,{icon:(0,l.jsx)(aa.C,{height:10,width:10}),title:(0,f.NC)("Exit spot"),message:(null==a?void 0:a.exit_tick)??(0,l.jsx)(an,{})})}),(0,l.jsx)("div",{className:"transactions__cell transactions__stake",children:a?(0,l.jsx)(e2.Z,{amount:a.buy_price,currency:a.currency,show_currency:!0}):(0,l.jsx)(an,{})}),(0,l.jsx)("div",{className:"transactions__cell transactions__profit",children:(null==a?void 0:a.is_completed)?(0,l.jsx)("div",{className:U()({"transactions__profit--win":(null==a?void 0:a.profit)&&(null==a?void 0:a.profit)>=0,"transactions__profit--loss":(null==a?void 0:a.profit)&&(null==a?void 0:a.profit)<0}),children:(0,l.jsx)(e2.Z,{amount:Math.abs(a.profit||0),currency:a.currency,show_currency:!0})}):(0,l.jsx)(an,{})})]})})},ad=e=>{let{row:t=!1,onClickTransaction:a,active_transaction_id:s}=e;switch(t.type){case F.i.CONTRACT:{let{data:e}=t;return(0,l.jsx)(ao,{contract:e,onClickTransaction:a,active_transaction_id:s})}case F.i.DIVIDER:return(0,l.jsx)("div",{className:"transactions__divider",children:(0,l.jsx)("div",{className:"transactions__divider-line"})});default:return null}},ac=(0,r.Pi)(e=>{let{is_drawer_open:t}=e,[a,s]=i.useState(null),{run_panel:n,transactions:r}=(0,j.oR)(),{contract_stage:o}=n,{transactions:d,toggleTransactionDetailsModal:c,recoverPendingContracts:_}=r,{isDesktop:u}=(0,N.F)();i.useEffect(()=>(window.addEventListener("click",x),_(),()=>{window.removeEventListener("click",x)}),[]),i.useEffect(()=>{a&&s(null)},[null==d?void 0:d.length]);let x=e=>{((null==e?void 0:e.composedPath())||[]).some(e=>{var t;return null==(t=e.classList)?void 0:t.contains("transactions__item-wrapper")})||s(null)},m=e=>{e&&a===e?s(null):s(e)};return(0,l.jsxs)("div",{className:U()("transactions",{"run-panel-tab__content":u,"run-panel-tab__content--mobile":!u&&t}),children:[(0,l.jsxs)("div",{className:"download__container transaction-details__button-container",children:[(0,l.jsx)(eR,{tab:"transactions"}),(0,l.jsx)(eA.Z,{id:"download__container__view-detail-button",className:"download__container__view-detail-button",disabled:!(null==d?void 0:d.length),onClick:()=>{c(!0)},secondary:!0,children:(0,l.jsx)(f.Xx,{i18n_default_text:"View Detail"})})]}),(0,l.jsxs)("div",{className:"transactions__header",children:[(0,l.jsx)("span",{className:"transactions__header-column transactions__header-type",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Type"})}),(0,l.jsx)("span",{className:"transactions__header-column transactions__header-spot",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Entry/Exit spot"})}),(0,l.jsx)("span",{className:"transactions__header-column transactions__header-profit",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Buy price and P/L"})})]}),(0,l.jsx)("div",{className:U()({transactions__content:u,"transactions__content--mobile":!u}),children:(0,l.jsx)("div",{className:"transactions__scrollbar",children:(null==d?void 0:d.length)?(0,l.jsx)(t6,{className:"transactions",data_source:d,rowRenderer:e=>(0,l.jsx)(ad,{onClickTransaction:m,active_transaction_id:a,...e}),keyMapper:e=>{switch(e.type){case F.i.CONTRACT:return e.data.transaction_ids.buy;case F.i.DIVIDER:return e.data;default:return null}},getRowSize:e=>{let{index:t}=e;switch((null==d?void 0:d[t]).type){case F.i.CONTRACT:return 50;case F.i.DIVIDER:return 21;default:return 0}}}):(0,l.jsx)(l.Fragment,{children:o>=es.K.STARTING?(0,l.jsx)(ao,{contract:null}):(0,l.jsx)(er.Z,{children:(0,l.jsx)("div",{className:"transactions-empty-box",children:(0,l.jsxs)("div",{className:"transactions-empty",children:[(0,l.jsx)("div",{className:"transactions-empty__icon-box",children:(0,l.jsx)(en.Z,{height:"64px",width:"64px",className:"transactions-empty__icon icon-general-fill-g-path",color:"secondary",fill:"var(--text-general)"})}),(0,l.jsx)(ea.Z,{as:"h4",size:"xs",weight:"bold",align:"center",color:"less-prominent",lineHeight:"xxs",className:"transactions-empty__header",children:(0,l.jsx)(f.Xx,{i18n_default_text:"There are no transactions to display"})}),(0,l.jsxs)("div",{className:"transactions-empty__message",children:[(0,l.jsx)(ea.Z,{size:"xxs",color:"less-prominent",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Here are the possible reasons:"})}),(0,l.jsxs)("ul",{className:"transactions-empty__list",children:[(0,l.jsx)("li",{children:(0,l.jsx)(ea.Z,{size:"xs",color:"less-prominent",children:(0,l.jsx)(f.Xx,{i18n_default_text:"The bot is not running"})})}),(0,l.jsx)("li",{children:(0,l.jsx)(ea.Z,{size:"xs",color:"less-prominent",children:(0,l.jsx)(f.Xx,{i18n_default_text:"The stats are cleared"})})})]})]})]})})})})})})]})}),a_=e=>{let{content:t,contentClassName:a,title:s}=e;return(0,l.jsxs)("div",{className:"run-panel__tile",children:[(0,l.jsx)("div",{className:"run-panel__tile-title",children:s}),(0,l.jsx)("div",{className:U()("run-panel__tile-content",a),children:t})]})},au=e=>{let{currency:t,is_mobile:a,lost_contracts:s,number_of_runs:n,total_stake:i,total_payout:r,toggleStatisticsInfoModal:o,total_profit:d,won_contracts:c}=e;return(0,l.jsxs)("div",{className:U()("run-panel__stat",{"run-panel__stat--mobile":a}),children:[(0,l.jsx)("div",{className:"run-panel__stat--info",onClick:o,children:(0,l.jsx)("div",{className:"run-panel__stat--info-item",children:(0,l.jsx)(f.Xx,{i18n_default_text:"What's this?"})})}),(0,l.jsxs)("div",{className:"run-panel__stat--tiles",children:[(0,l.jsx)(a_,{title:(0,f.NC)("Total stake"),alignment:"top",content:(0,l.jsx)(e2.Z,{amount:i,currency:t,show_currency:!0})}),(0,l.jsx)(a_,{title:(0,f.NC)("Total payout"),alignment:"top",content:(0,l.jsx)(e2.Z,{amount:r,currency:t,show_currency:!0})}),(0,l.jsx)(a_,{title:(0,f.NC)("No. of runs"),alignment:"top",content:n}),(0,l.jsx)(a_,{title:(0,f.NC)("Contracts lost"),alignment:"bottom",content:s}),(0,l.jsx)(a_,{title:(0,f.NC)("Contracts won"),alignment:"bottom",content:c}),(0,l.jsx)(a_,{title:(0,f.NC)("Total profit/loss"),content:(0,l.jsx)(e2.Z,{amount:d,currency:t,has_sign:!0,show_currency:!0}),alignment:"bottom",contentClassName:U()("run-panel__stat-amount",{"run-panel__stat-amount--positive":d>0,"run-panel__stat-amount--negative":d<0})})]})]})},ax=e=>{let{is_clear_stat_disabled:t,is_mobile:a,is_drawer_open:s,onClearStatClick:n}=e;return a&&s&&(0,l.jsx)(eA.Z,{id:"db-run-panel__clear-button",className:"run-panel__clear-button",disabled:t,text:(0,f.NC)("Reset"),onClick:n,secondary:!0})},am=e=>{let{active_index:t,is_drawer_open:a,active_tour:s,setActiveTabIndex:n,...r}=e,{isDesktop:o}=(0,N.F)();return i.useEffect(()=>(!o&&a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e3.Z,{active_index:t,onTabItemClick:n,top:!0,children:[(0,l.jsx)("div",{id:"db-run-panel-tab__summary",label:(0,l.jsx)(f.Xx,{i18n_default_text:"Summary"}),children:(0,l.jsx)(tV,{is_drawer_open:a})}),(0,l.jsx)("div",{id:"db-run-panel-tab__transactions",label:(0,l.jsx)(f.Xx,{i18n_default_text:"Transactions"}),children:(0,l.jsx)(ac,{is_drawer_open:a})}),(0,l.jsx)("div",{id:"db-run-panel-tab__journal",label:(0,l.jsx)(f.Xx,{i18n_default_text:"Journal"}),children:(0,l.jsx)(eM,{})})]}),(a&&2!==t||s)&&(0,l.jsx)(au,{...r})]})},ah=e=>{let{is_clear_stat_disabled:t,onClearStatClick:a}=e;return(0,l.jsx)("div",{className:"run-panel__footer",children:(0,l.jsx)(eA.Z,{id:"db-run-panel__clear-button",className:"run-panel__footer-button",disabled:t,onClick:a,has_effect:!0,secondary:!0,children:(0,l.jsx)("span",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Reset"})})})})},ap=()=>(0,l.jsx)("div",{className:"controls__section",children:(0,l.jsx)("div",{className:"controls__buttons",children:(0,l.jsx)(t2,{className:"controls__animation",should_show_overlay:!0})})}),aj=e=>{let{is_mobile:t,is_statistics_info_modal_open:a,toggleStatisticsInfoModal:s}=e;return(0,l.jsx)(C.Z,{className:U()("statistics__modal",{"statistics__modal--mobile":t}),title:(0,f.NC)("What's this?"),is_open:a,toggleModal:s,width:"440px",children:(0,l.jsx)(C.Z.Body,{children:(0,l.jsx)("div",{className:U()("statistics__modal-body",{"statistics__modal-body--mobile":t}),children:(0,l.jsxs)(er.Z,{className:"statistics__modal-scrollbar",children:[(0,l.jsx)(ea.Z,{as:"p",weight:"bold",className:"statistics__modal-body--content no-margin",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Total stake"})}),(0,l.jsx)(ea.Z,{as:"p",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Total stake since you last cleared your stats."})}),(0,l.jsx)(ea.Z,{as:"p",weight:"bold",className:"statistics__modal-body--content",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Total payout"})}),(0,l.jsx)(ea.Z,{as:"p",children:(0,f.NC)("Total payout since you last cleared your stats.")}),(0,l.jsx)(ea.Z,{as:"p",weight:"bold",className:"statistics__modal-body--content",children:(0,l.jsx)(f.Xx,{i18n_default_text:"No. of runs"})}),(0,l.jsx)(ea.Z,{as:"p",children:(0,l.jsx)(f.Xx,{i18n_default_text:"The number of times your bot has run since you last cleared your stats. Each run includes the execution of all the root blocks."})}),(0,l.jsx)(ea.Z,{as:"p",weight:"bold",className:"statistics__modal-body--content",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Contracts lost"})}),(0,l.jsx)(ea.Z,{as:"p",children:(0,l.jsx)(f.Xx,{i18n_default_text:"The number of contracts you have lost since you last cleared your stats."})}),(0,l.jsx)(ea.Z,{as:"p",weight:"bold",className:"statistics__modal-body--content",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Contracts won"})}),(0,l.jsx)(ea.Z,{as:"p",children:(0,l.jsx)(f.Xx,{i18n_default_text:"The number of contracts you have won since you last cleared your stats."})}),(0,l.jsx)(ea.Z,{as:"p",weight:"bold",className:"statistics__modal-body--content",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Total profit/loss"})}),(0,l.jsx)(ea.Z,{as:"p",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Your total profit/loss since you last cleared your stats. It is the difference between your total payout and your total stake."})})]})})})})},ab=(0,r.Pi)(()=>{let{run_panel:e,dashboard:t,transactions:a}=(0,j.oR)(),{client:s}=(0,j.oR)(),{isDesktop:n}=(0,N.F)(),{currency:r}=s,{active_index:o,is_drawer_open:d,is_statistics_info_modal_open:c,is_clear_stat_disabled:_,onClearStatClick:u,onMount:x,onRunButtonClick:m,onUnmount:h,setActiveTabIndex:p,toggleDrawer:b,toggleStatisticsInfoModal:v}=e,{statistics:y}=a,{active_tour:g,active_tab:f}=t,{total_payout:C,total_profit:k,total_stake:w,won_contracts:T,lost_contracts:E,number_of_runs:S}=y,{BOT_BUILDER:I,CHART:A}=tK.ve;i.useEffect(()=>(x(),()=>h()),[x,h]),i.useEffect(()=>{n||b(!1)},[]);let R=(0,l.jsx)(am,{active_index:o,currency:r,is_drawer_open:d,is_mobile:!n,lost_contracts:E,number_of_runs:S,setActiveTabIndex:p,toggleStatisticsInfoModal:v,total_payout:C,total_profit:k,total_stake:w,won_contracts:T,active_tour:g}),L=(0,l.jsx)(ah,{is_clear_stat_disabled:_,onClearStatClick:u}),O=(0,l.jsx)(ax,{is_clear_stat_disabled:_,is_mobile:!n,is_drawer_open:d,onClearStatClick:u});return!([I,A].includes(f)||g)&&n||"bot_builder"===g?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:!n&&d?"run-panel__container--mobile":"run-panel",children:[(0,l.jsx)(e8,{anchor:"right",className:U()("run-panel",{"run-panel__container":n,"run-panel__container--tour-active":n&&g}),contentClassName:"run-panel__content",header:O,footer:n&&L,is_open:d,toggleDrawer:b,width:366,zIndex:ae.RUN_PANEL,children:R}),!n&&(0,l.jsx)(ap,{})]}),(0,l.jsx)(eQ,{onRunButtonClick:m}),(0,l.jsx)(aj,{is_mobile:!n,is_statistics_info_modal_open:c,toggleStatisticsInfoModal:v})]})}),av=e=>{let{body_className:t,className:a,should_header_stick_body:s,header:n,header_background_color:r,height_offset:o="0px",is_flex:d,is_popup:c,is_modal_open:_,onClickClose:u,renderPageFooterChildren:x,page_footer_className:m,page_footer_parent:h,page_footer_parent_className:p,page_header_className:j,page_header_text:b,renderPageHeaderTrailingIcon:v,pageHeaderReturnFn:y,renderPageHeader:g,renderPageHeaderElement:f,children:N,container_children:C}=e;return(0,l.jsx)(e$,{is_visible:_,className:U()("dc-mobile-full-page-modal",a),keyname:`${a}__wrapper`,children:(0,l.jsx)(eW,{header:n,onClickClose:u,children:(0,l.jsxs)(eF.Z,{className:U()("dc-mobile-full-page-modal",{"dc-mobile-full-page-modal--flex":d,"dc-mobile-full-page-modal--popup":c}),height_offset:o,children:[(g||b||f)&&(0,l.jsxs)("div",{className:U()("dc-mobile-full-page-modal__header",{"dc-mobile-full-page-modal__header--border-bottom":!s,...j?{[j]:!!j}:{}}),style:{background:r},children:[y&&(0,l.jsx)("div",{className:"dc-mobile-full-page-modal__header-return",children:(0,l.jsx)(eK.Z,{onClick:y,"data-testid":"dt_mobile_full_page_return_icon"})}),g&&g(),(0,l.jsx)("div",{className:"dc-mobile-full-page-modal__header-text",children:f??(0,l.jsx)(ea.Z,{as:"p",color:"prominent",lineHeight:"m",size:"s",weight:"bold",children:b})}),v&&(0,l.jsx)("div",{className:"dc-mobile-full-page-modal__header-trailing-icon",children:v()})]}),(0,l.jsx)("div",{className:U()("dc-mobile-full-page-modal__body",t),children:N}),x&&(0,l.jsxs)(i.Fragment,{children:[h&&(0,l.jsx)("div",{className:U()("dc-mobile-full-page-modal__footer-parent",p),children:h}),(0,l.jsx)("div",{className:U()("dc-mobile-full-page-modal__footer",m),children:x()})]}),C]})})})},ay="transaction-details-modal-mobile",ag=()=>(0,l.jsx)(Z.ZP,{className:"transactions__loader-text","data-testid":"transaction_details_card_cell_loader",height:10,width:80,speed:3,foregroundColor:"var(--general-section-2)",backgroundColor:"var(--general-hover)",children:(0,l.jsx)("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"100",height:"12"})}),af=e=>{let{label:t="",large_title:a=!1,right_aligned:s=!1,title:n="",loader:i=!1}=e;return(0,l.jsxs)("div",{className:U()(`${ay}__card__column`,{[`${ay}__right-align`]:s}),children:[n&&(0,l.jsx)("div",{className:U()({[`${ay}__small-title`]:!a,[`${ay}__large-title`]:a}),children:(0,f.NC)(n)}),(0,l.jsx)("div",{className:`${ay}__label`,children:i?(0,l.jsx)(ag,{}):t})]})},aN=e=>{let{message:t,icon:a}=e;return(0,l.jsx)("div",{className:U()(`${ay}__table-cell`,`${ay}__table-cell__icon-wrapper`),children:t&&(0,l.jsx)($.Z,{alignment:(0,P.rK)()?"left":"right",message:t,zIndex:"7",children:a})})};function aC(e){var t;let{transaction:a}=e;return(0,l.jsxs)("div",{className:`${ay}__card`,"data-testid":"dt_mobile_transaction_card",children:[(0,l.jsx)("div",{className:`${ay}__card__row`,children:(0,l.jsx)(af,{label:(0,l.jsxs)("div",{className:`${ay}__icon-wrapper`,children:[(0,l.jsx)(aN,{message:null==a?void 0:a.display_name,icon:(0,l.jsx)(X,{type:null==a?void 0:a.underlying,size:"md"})}),(0,l.jsx)(aN,{message:(0,z.getContractTypeName)(a),icon:(0,l.jsx)(V,{type:null==a?void 0:a.contract_type,size:"md"})})]})})}),(0,l.jsx)("div",{className:`${ay}__card__row`,children:(0,l.jsx)(af,{title:"Ref. ID",label:null==a||null==(t=a.transaction_ids)?void 0:t.buy})}),(0,l.jsxs)("div",{className:`${ay}__card__row`,children:[(0,l.jsx)(af,{title:"Timestamp",label:(0,m.fcq)(null==a?void 0:a.date_start,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]")}),(0,l.jsx)(af,{title:"Entry Spot",label:null==a?void 0:a.entry_tick,right_aligned:!0,loader:!a.entry_tick})]}),(0,l.jsxs)("div",{className:`${ay}__card__row`,children:[(0,l.jsx)(af,{title:"Buy Price",label:Math.abs((null==a?void 0:a.buy_price)??0).toFixed(2)}),(0,l.jsx)(af,{title:"Exit Spot",label:null==a?void 0:a.exit_tick,right_aligned:!0,loader:!a.exit_tick})]}),(0,l.jsxs)("div",{className:`${ay}__card__row`,children:[(0,l.jsx)(af,{title:"Profit / Loss",large_title:!0}),(0,l.jsx)(af,{label:(0,l.jsx)("div",{className:U()({[`${ay}__card__profit--win`]:(null==a?void 0:a.profit)>0,[`${ay}__card__profit--loss`]:(null==a?void 0:a.profit)<0}),children:Math.abs((null==a?void 0:a.profit)??0).toFixed(2)}),right_aligned:!0,loader:!a.is_completed})]})]})}let ak=(0,r.Pi)(()=>{let{client:e}=(0,j.oR)(),{transactions:t,run_panel:a}=(0,j.oR)(),{toggleTransactionDetailsModal:s,is_transaction_details_modal_open:n,transactions:i,statistics:r}=t,{toggleStatisticsInfoModal:o}=a;return(0,l.jsxs)(av,{is_modal_open:n,className:"transaction-details-modal-mobile",header:(0,f.NC)("Transactions detailed summary"),onClickClose:()=>{s(!1)},height_offset:"80px",children:[(0,l.jsx)("div",{className:"transaction-details-modal-mobile__wrapper","data-testid":"transaction_details_cards",children:null==i?void 0:i.map(e=>{var t;let{data:a,type:s}=e;return s===F.i.CONTRACT?(0,l.jsx)(aC,{transaction:a},null==a||null==(t=a.transaction_ids)?void 0:t.buy):(0,l.jsx)("div",{className:"transaction-details-modal-mobile__divider",children:(0,l.jsx)("div",{className:"transactions__divider-line"})},`transaction-row-divider-${a}`)})}),(0,l.jsx)("div",{className:"transaction-details-modal-mobile__card__footer",children:(0,l.jsx)(au,{is_mobile:!0,currency:null==e?void 0:e.currency,lost_contracts:(null==r?void 0:r.lost_contracts)??0,number_of_runs:(null==r?void 0:r.number_of_runs)??0,total_payout:(null==r?void 0:r.total_payout)??0,total_profit:(null==r?void 0:r.total_profit)??0,total_stake:(null==r?void 0:r.total_stake)??0,won_contracts:(null==r?void 0:r.won_contracts)??0,toggleStatisticsInfoModal:o})})]})}),aw=(0,r.Pi)(()=>{let{isDesktop:e}=(0,N.F)();return(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(w.a,{}),children:e?(0,l.jsx)(et,{}):(0,l.jsx)(ak,{})})});var aT=a(65711),aE=a(13126),aS=a(76124),aI=a(6654),aA=a(6388);let{TRACKJS_TOKEN:aR}={TRACKJS_TOKEN:void 0},aL=()=>({initTrackJS:e=>{try{if(!aA.t.isInstalled()){var t;aA.t.install({application:"standalone-deriv-bot",dedupe:!1,enabled:!1,token:aR,userId:e,version:(null==(t=document.querySelector("meta[name=version]"))?void 0:t.content)??"undefined"})}}catch(e){console.error("Failed to initialize TrackJS",e)}}});a(23318);let aO=e=>{};var aM=a(72576);let aD=e=>{!function(t,a,s,n){t.hj=t.hj||function(){(t.hj.q=t.hj.q||[]).push(arguments)},t._hjSettings={hjid:3050531,hjsv:6};let l=a.getElementsByTagName("head")[0],i=a.createElement("script");i.async=1,i.src=s+t._hjSettings.hjid+n+t._hjSettings.hjsv,l.appendChild(i);let r=e.loginid,o=e.is_virtual?"Demo":"Real",d=e.account_open_date?(0,aM.vk)(e.account_open_date):void 0;window.hj("identify",r,{"Account created":d?(0,aM.gb)(d).format("YYYY-MM-DD"):"","Account type":o,"User country":e.clients_country})}(window,document,"https://static.hotjar.com/c/hotjar-",".js?sv=")};var aU=a(47494),aZ=a(44740);let aF=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("audio",{id:"announcement","aria-label":"audio",src:`${window.__webpack_public_path__}assets/media/announcement.mp3`}),(0,l.jsx)("audio",{id:"earned-money","aria-label":"audio",src:`${window.__webpack_public_path__}assets/media/coins.mp3`}),(0,l.jsx)("audio",{id:"job-done","aria-label":"audio",src:`${window.__webpack_public_path__}assets/media/job-done.mp3`}),(0,l.jsx)("audio",{id:"error","aria-label":"audio",src:`${window.__webpack_public_path__}assets/media/out-of-bounds.mp3`}),(0,l.jsx)("audio",{id:"severe-error","aria-label":"audio",src:`${window.__webpack_public_path__}assets/media/i-am-being-serious.mp3`})]}),az=(0,r.Pi)(()=>{let{blockly_store:e}=(0,j.oR)(),{is_loading:t}=e;return(0,l.jsx)(l.Fragment,{children:t&&(0,l.jsxs)("div",{className:"bot__loading","data-testid":"blockly-loader",children:[(0,l.jsx)(w.a,{}),(0,l.jsx)("div",{children:"Loading Blockly..."})]})})});var aP=a(68030);let aB=(0,r.Pi)(()=>{let{dashboard:e}=(0,j.oR)(),{is_web_socket_intialised:t}=e,a=()=>{location.reload()};return(0,l.jsxs)(aP.Z,{is_visible:!t,is_mobile_full_width:!0,className:"dc-dialog bot-stopped-dialog",cancel_button_text:(0,f.NC)("Go to Reports"),confirm_button_text:(0,f.NC)("Back to Bot"),onCancel:()=>window.location.href=m.xOw.positions,onConfirm:()=>location.reload(),children:[(0,l.jsxs)("div",{className:"dc-dialog__content__header",children:[(0,l.jsx)(ea.Z,{"data-testid":"data-title",weight:"bold",as:"p",align:"left",size:"s",color:"prominent",children:(0,l.jsx)(f.Xx,{i18n_default_text:"You're back online"})}),(0,l.jsx)("div",{"data-testid":"data-close-button",onClick:a,onKeyDown:e=>{"Enter"===e.key&&a()},tabIndex:0,children:(0,l.jsx)(S.Z,{height:"20px",width:"20px",fill:"var(--text-general)"})})]}),(0,l.jsx)(ea.Z,{as:"p",align:"left",size:"xs",color:"prominent",children:(0,l.jsx)(f.Xx,{i18n_default_text:"The bot has stopped, but your trade may still be running. You can check it on the Reports page."})})]})});var aX=a(61101),a$=a(42474),aH=a(29313),aV=a(83571),aq=a(51998);let aG=e=>{let{load_strategy_tab:t}=e;aV.Analytics.trackEvent("ce_bot_form",{action:aq.om.SWITCH_LOAD_STRATEGY_TAB,form_name:aq.oH,load_strategy_tab:t,subform_name:"load_strategy",subpage_name:"bot_builder"})};var aY=a(64334),aK=a(16909),aW=a(97909);let aJ=(0,r.Pi)(()=>{let{google_drive:e,load_modal:t}=(0,j.oR)(),{is_authorised:a,signIn:s,signOut:n}=e,{is_open_button_loading:r,onDriveOpen:o}=t,{isDesktop:d}=(0,N.F)(),c=d?"128":"96";return(0,l.jsx)("div",{className:"load-strategy__container","data-testid":"dt_google_drive",children:(0,l.jsxs)("div",{className:"load-strategy__google-drive",children:[(0,l.jsx)(aW.Z,{className:U()("load-strategy__google-drive-icon",{"load-strategy__google-drive-icon--disabled":!a}),height:c,width:c}),(0,l.jsx)("div",{className:"load-strategy__google-drive-connected-text",children:a?(0,l.jsx)(f.Xx,{i18n_default_text:"You are connected to Google Drive"}):"Google Drive"}),a?(0,l.jsxs)(eA.Z.Group,{children:[(0,l.jsx)(eA.Z,{onClick:()=>{n(),(0,tQ.z9)()},has_effect:!0,secondary:!0,large:!0,children:(0,l.jsx)(f.Xx,{i18n_default_text:"Disconnect"})}),(0,l.jsx)(eA.Z,{onClick:()=>{o()},is_loading:r,has_effect:!0,primary:!0,large:!0,children:(0,l.jsx)(f.Xx,{i18n_default_text:"Open"})})]}):(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:"load-strategy__google-drive-terms",children:[(0,l.jsx)("div",{className:"load-strategy__google-drive-text",children:(0,l.jsx)(f.Xx,{i18n_default_text:"To import your bot from your Google Drive, you'll need to sign in to your Google account."})}),(0,l.jsx)("div",{className:"load-strategy__google-drive-text",children:(0,l.jsx)(f.Xx,{i18n_default_text:"To know how Google Drive handles your data, please review Derivs <0>Privacy policy.</0>",components:[(0,l.jsx)(aK.Z,{className:"link",href:"tnc/security-and-privacy.pdf",is_document:!0},0)]})})]}),(0,l.jsx)(eA.Z,{onClick:()=>{s(),(0,tQ.df)()},has_effect:!0,primary:!0,large:!0,children:(0,l.jsx)(f.Xx,{i18n_default_text:"Sign in"})})]})]})})});var aQ=a(81593),a0=a(73446),a1=a(91047);let a8=(0,r.Pi)(()=>{let{load_modal:e,dashboard:t}=(0,j.oR)(),{is_open_button_loading:a,is_open_button_disabled:s,loadStrategyOnBotBuilder:n,setLoadedLocalFile:r,saveStrategyToLocalStorage:o,toggleLoadModal:d}=e,{setOpenSettings:c,setPreviewOnPopup:_}=t,{isDesktop:u}=(0,N.F)(),x=u?i.Fragment:eA.Z.Group;return(0,l.jsxs)(x,{children:[!u&&(0,l.jsx)(eA.Z,{text:(0,f.NC)("Cancel"),onClick:()=>r(null),has_effect:!0,secondary:!0,large:!0}),(0,l.jsx)(eA.Z,{text:(0,f.NC)("Open"),onClick:()=>{n(),o(),r(null),d(),_(!1),c(a$.tx.BOT_IMPORT)},is_loading:a,has_effect:!0,primary:!0,large:!0,disabled:s})]})}),a2=e=>{let{icon:t,message:a,className:s}=e;return(0,l.jsxs)("div",{className:s,children:[t&&(0,l.jsx)("span",{className:"icon",children:t}),(0,l.jsx)("span",{className:"text",children:(0,l.jsx)(ea.Z,{size:"xs",children:a})})]})};var a3=a(19405),a7=a(97613);let a9=(0,r.Pi)(e=>{let{mockZoomInOut:t}=e,{dashboard:a}=(0,j.oR)(),{onZoomInOutClick:s}=a;return(0,l.jsxs)("div",{className:"load-strategy__preview-workspace-controls",children:[(0,l.jsx)(a3.Z,{className:"load-strategy__preview-workspace-icon",onClick:()=>{t?t(!0):s(!0)},"data-testid":"zoom-in",fill:"var(--text-general)"}),(0,l.jsx)(a7.Z,{className:"load-strategy__preview-workspace-icon",onClick:()=>{t?t(!1):s(!1)},"data-testid":"zoom-out",fill:"var(--text-general)"})]})}),a5=(0,r.Pi)(()=>{let{dashboard:e,load_modal:t,blockly_store:a}=(0,j.oR)(),{active_tab:s,active_tour:n}=e,{handleFileChange:r,loaded_local_file:o,setLoadedLocalFile:d,imported_strategy_type:c,is_open_button_loading:_}=t,u=i.useRef(null),[x,m]=i.useState(!0),{isDesktop:h}=(0,N.F)(),{is_loading:p}=a;return(i.useEffect(()=>{o&&x&&"pending"!==c&&!p&&"old"===c&&(0,aX.J)((0,a$.xG)().strategy_conversion,void 0,{closeButton:!1})},[o,x,c,_,p]),o&&x)?(0,l.jsxs)("div",{className:"load-strategy__container load-strategy__container--has-footer",children:[(0,l.jsxs)("div",{className:U()("load-strategy__local-preview",{"load-strategy__local-preview--active":1===s&&n}),children:[(0,l.jsx)("div",{className:"load-strategy__title",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Preview"})}),(0,l.jsx)("div",{className:"load-strategy__preview-workspace",children:(0,l.jsxs)("div",{id:"load-strategy__blockly-container",style:{height:"100%"},children:[(0,l.jsx)("div",{className:"load-strategy__local-preview-close",children:(0,l.jsx)(S.Z,{onClick:()=>{d(null)},"data-testid":"dt_load-strategy__local-preview-close",height:"20px",width:"20px"})}),(0,l.jsx)(a9,{})]})})]}),!h&&(0,l.jsx)("div",{className:"load-strategy__local-footer",children:(0,l.jsx)(a8,{})})]}):(0,l.jsx)("div",{className:"load-strategy__container",children:(0,l.jsxs)("div",{className:"load-strategy__local-dropzone",children:[(0,l.jsx)("input",{type:"file",ref:u,accept:"application/xml, text/xml",style:{display:"none"},onChange:e=>{let t=r(e,!1);t||(0,aX.J)((0,a$.xG)().xml_import_error,void 0,{className:"error-toast"}),m(t)},"data-testid":"dt-load-strategy-file-input"}),(0,l.jsx)(a2,{message:(0,f.NC)("Importing XML files from Binary Bot and other third-party platforms may take longer."),icon:(0,l.jsx)(a1.Z,{fill:"#e18d00",iconSize:"xs"}),className:"load-strategy__section_message"}),(0,l.jsxs)("div",{"data-testid":"dt__local-dropzone-area",className:"load-strategy__local-dropzone-area",onDrop:e=>{r(e,!1)},children:[h?(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(a0.Z,{height:"128px",width:"128px",className:"load-strategy__local-icon"}),(0,l.jsx)("div",{className:"load-strategy__local-title",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Drag your XML file here"})}),(0,l.jsx)("div",{className:"load-strategy__local-description",children:(0,l.jsx)(f.Xx,{i18n_default_text:"or, if you prefer..."})})]}):(0,l.jsx)(aQ.Z,{height:"96px",width:"96px",className:"load-strategy__local-icon"}),(0,l.jsx)(eA.Z,{text:x?(0,f.NC)("Select an XML file from your device"):(0,f.NC)("Please upload an XML file"),"data-testid":"dt_load-strategy__local-upload",onClick:()=>{var e;return null==u||null==(e=u.current)?void 0:e.click()},has_effect:!0,primary:!0,large:!0})]})]})})});var a4=a(45845),a6=a(69021),se=a(39590);let st=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e||"string"==typeof e?({[a6.R.UNSAVED]:(0,l.jsx)(se.Z,{iconSize:"xs",fill:"var(--text-general)",className:"icon-general-fill-g-path"}),[a6.R.LOCAL]:(0,l.jsx)(a0.Z,{height:"16px",width:"16px",fill:"var(--text-general)"}),[a6.R.GOOGLE_DRIVE]:(0,l.jsx)(aW.Z,{className:t,height:"16px",width:"16px",fill:"var(--text-general)"})})[e]:(0,l.jsx)(se.Z,{iconSize:"xs",fill:"var(--text-general)"})},sa=(0,r.Pi)(e=>{let{workspace:t}=e,{load_modal:a,blockly_store:s}=(0,j.oR)(),{setLoading:n}=s,{getSaveType:i,loadStrategyOnModalRecentPreview:r,selected_strategy_id:o,updateXmlValuesOnStrategySelection:d}=a;return(0,l.jsxs)("div",{className:U()("load-strategy__recent-item",{"load-strategy__recent-item--selected":o===t.id}),onClick:()=>{o!==t.id&&(n(!0),r(t.id),d())},"data-testid":"dt_recent_workspace_item",children:[(0,l.jsxs)("div",{className:"load-strategy__recent-item-text",children:[(0,l.jsx)("div",{className:"load-strategy__recent-item-title",title:t.name,children:t.name}),(0,l.jsx)("div",{className:"load-strategy__recent-item-time",children:(0,z.timeSince)(t.timestamp)})]}),(0,l.jsxs)("div",{className:"load-strategy__recent-item-location",children:[st(t.save_type,"load-strategy__recent-icon--active"),(0,l.jsx)("div",{className:"load-strategy__recent-item-saved",children:i(t.save_type)})]})]},t.id)}),ss=(0,r.Pi)(()=>{let{load_modal:e}=(0,j.oR)(),{is_explanation_expand:t,recent_strategies:a,toggleExplanationExpand:s}=e;return a.length?(0,l.jsx)("div",{className:"load-strategy__container load-strategy__container--has-footer",children:(0,l.jsxs)("div",{className:"load-strategy__recent",children:[(0,l.jsx)("div",{className:"load-strategy__recent__files",children:a.map(e=>(0,l.jsx)(sa,{workspace:e},e.id))}),(0,l.jsxs)("div",{className:"load-strategy__recent__preview",children:[(0,l.jsx)("div",{className:"load-strategy__title load-strategy__recent-preview-title",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Preview"})}),(0,l.jsx)("div",{className:"load-strategy__preview-workspace",children:(0,l.jsx)("div",{id:"load-strategy__blockly-container",style:{height:"100%"},children:(0,l.jsx)(a9,{})})})]})]})}):(0,l.jsx)("div",{className:"load-strategy__container",children:(0,l.jsxs)("div",{className:"load-strategy__recent__empty","data-testid":"dt-load-strategy__recent__empty",children:[(0,l.jsx)("div",{className:"load-strategy__recent__empty-icon",children:(0,l.jsx)(a4.Z,{height:"128px",width:"128px"})}),(0,l.jsx)("div",{className:"load-strategy__recent__empty-title",children:(0,l.jsx)(f.Xx,{i18n_default_text:"You do not have any recent bots"})}),(0,l.jsx)("div",{className:"load-strategy__recent__empty-description",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Create one or upload one from your local drive or Google Drive."})}),(0,l.jsx)("div",{tabIndex:0,className:"load-strategy__recent__empty-expand","data-testid":"dt-load-strategy__recent__empty-expand",onClick:s,onKeyDown:e=>{"Enter"===e.key&&s()},children:(0,l.jsx)(f.Xx,{i18n_default_text:"Why can't I see my recent bots?"})}),(0,l.jsxs)("div",{"data-testid":t?"dt-empty-explanation-list--open":"dt-empty-explanation-list--close",className:U()("load-strategy__recent__empty-explanation",{"load-strategy__recent__empty-explanation--show":t}),children:[(0,l.jsx)("div",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"If you've recently used bots but don't see them in this list, it may be because you:"})}),(0,l.jsxs)("ol",{className:"load-strategy__recent__empty-explanation-list",children:[(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"1. Logged in from a different device"})}),(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"2. Logged in from a different browser"})}),(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"3. Cleared your browser cache"})})]})]})]})})}),sn=(0,r.Pi)(()=>{let{load_modal:e,dashboard:t}=(0,j.oR)(),{is_open_button_loading:a,is_open_button_disabled:s,loadStrategyOnBotBuilder:n,toggleLoadModal:i}=e,{setOpenSettings:r}=t;return(0,l.jsx)(eA.Z,{text:(0,f.NC)("Open"),onClick:()=>{n(),i(),r(a$.tx.BOT_IMPORT)},is_loading:a,has_effect:!0,primary:!0,large:!0,disabled:s})}),sl=(0,r.Pi)(()=>{let{load_modal:e,dashboard:t}=(0,j.oR)(),{active_index:a,is_load_modal_open:s,loaded_local_file:n,onEntered:i,recent_strategies:r,setActiveTabIndex:o,toggleLoadModal:d,tab_name:c}=e,{setPreviewOnPopup:_}=t,{isDesktop:u}=(0,N.F)(),x=(0,f.NC)("Load strategy"),m=e=>{o(e),aG({load_strategy_tab:aY.yO[e+ +!u]})};if(!u)return(0,l.jsx)(av,{is_modal_open:s,className:"load-strategy__wrapper",header:x,onClickClose:()=>{_(!1),d(),(0,tQ._W)({subform_name:"load_strategy",load_strategy_tab:aY.yO[a+1]})},height_offset:"80px",page_overlay:!0,children:(0,l.jsxs)(e3.Z,{active_index:a,onTabItemClick:m,top:!0,children:[(0,l.jsx)("div",{label:(0,f.NC)("Local"),children:(0,l.jsx)(a5,{})}),(0,l.jsx)("div",{label:"Google Drive",children:(0,l.jsx)(aJ,{})})]})});let h=!!n&&c===aH.y.TAB_LOCAL,p=r.length>0&&c===aH.y.TAB_RECENT;return(0,l.jsxs)(C.Z,{title:x,className:"load-strategy",width:"1000px",height:"80vh",is_open:s,toggleModal:()=>{d(),(0,tQ._W)({subform_name:"load_strategy",load_strategy_tab:aY.yO[a+ +!u]})},onEntered:i,elements_to_ignore:[document.querySelector(".injectionDiv")],children:[(0,l.jsx)(C.Z.Body,{children:(0,l.jsxs)(e3.Z,{active_index:a,onTabItemClick:m,top:!0,header_fit_content:!0,children:[(0,l.jsx)("div",{label:(0,f.NC)("Recent"),children:(0,l.jsx)(ss,{})}),(0,l.jsx)("div",{label:(0,f.NC)("Local"),children:(0,l.jsx)(a5,{})}),(0,l.jsx)("div",{label:"Google Drive",children:(0,l.jsx)(aJ,{})})]})}),p&&(0,l.jsx)(C.Z.Footer,{has_separator:!0,children:(0,l.jsx)(sn,{})}),h&&(0,l.jsx)(C.Z.Footer,{has_separator:!0,children:(0,l.jsx)(a8,{})})]})}),si=e=>{let{children:t,should_wrap_items:a}=e;return a?(0,l.jsx)("div",{className:"dc-radio-group__item-wrapper",children:t}):(0,l.jsx)(i.Fragment,{children:t})},sr=e=>{let{className:t,name:a,onToggle:s,required:n,selected:r,should_wrap_items:o,children:d}=e,[c,_]=i.useState(r);i.useEffect(()=>{_(r)},[r]);let u=e=>{_(e.target.value),s(e)};return(0,l.jsx)("div",{className:U()("dc-radio-group",t),children:Array.isArray(d)&&d.filter(e=>!e.props.hidden).map(e=>(0,l.jsx)(si,{should_wrap_items:o,children:(0,l.jsxs)("label",{className:U()("dc-radio-group__item",t,{"dc-radio-group__item--selected":c===e.props.value}),children:[(0,l.jsx)("input",{id:e.props.id,name:a,className:"dc-radio-group__input",type:"radio",value:e.props.value,checked:c===e.props.value,onChange:u,disabled:e.props.disabled,required:n}),(0,l.jsx)("span",{className:U()("dc-radio-group__circle",{"dc-radio-group__circle--selected":c===e.props.value,"dc-radio-group__circle--disabled":e.props.disabled,"dc-radio-group__circle--error":e.props.has_error})}),(0,l.jsx)(ea.Z,{size:"xs",className:U()("dc-radio-group__label",{"dc-radio-group__label--disabled":e.props.disabled,"dc-radio-group__label--error":e.props.has_error}),children:e.props.label})]})},e.props.value))})};sr.Item=e=>{let{children:t,hidden:a=!1,...s}=e;return(0,l.jsx)("div",{hidden:a,...s,children:t})};let so=e=>{let{icon:t,text:a,google_drive_connected:s}=e,n="Google Drive"===a;return(0,l.jsx)("div",{className:"save-type__container",children:(0,l.jsxs)("div",{className:"save-type__radio",children:[t&&i.cloneElement(t,{className:U()("save-type__icon",{"save-type__icon--active":n&&s,"save-type__icon--disabled":n&&!s},t.props.className)}),(0,l.jsx)(ea.Z,{as:"p",align:"center",size:"xxs",color:n&&!s?"disabled":"prominent",lineHeight:"s",className:"save-type__radio-text",children:(0,f.NC)(a)})]})})},sd=e=>{let{bot_name:t,button_status:a,is_authorised:s,onConfirmSave:n,onDriveConnect:i,validateBotName:r,toggleSaveModal:o,is_mobile:d,is_onscreen_keyboard_active:c,setCurrentFocus:_}=e;return(0,l.jsx)(eD.J9,{initialValues:{is_local:!0,save_as_collection:!1,bot_name:t===(0,z.config)().default_file_name?"":t},validate:r,onSubmit:n,children:e=>{let{values:{is_local:t},setFieldValue:n,touched:r,errors:u}=e;return(0,l.jsx)(er.Z,{height:d?"calc(100%)":"500px",autohide:!0,children:(0,l.jsxs)(eD.l0,{className:U()({"form--active-keyboard":c}),children:[(0,l.jsxs)("div",{className:"modal__content",children:[(0,l.jsxs)(ea.Z,{size:"xs",lineHeight:"l",children:[(0,f.NC)("Enter your bot name, choose to save on your computer or Google Drive, and hit "),(0,l.jsx)("strong",{children:(0,f.NC)("Save.")})]}),(0,l.jsx)("div",{className:"modal__content-row",children:(0,l.jsx)(eD.gN,{name:"bot_name",children:e=>{let{field:t}=e;return(0,l.jsx)(eq,{className:"save-type__input",type:"text",placeholder:(0,f.NC)("Untitled Strategy"),error:r[t.name]&&u[t.name],label:(0,f.NC)("Bot name"),onFocus:e=>_(e.currentTarget.value),onBlur:()=>_(""),...t,max_characters:25})}})}),(0,l.jsx)("div",{className:"modal__content-row",children:(0,l.jsxs)(sr,{className:"radio-group__save-type",name:"is_local",selected:()=>s&&!t?z.save_types.GOOGLE_DRIVE:z.save_types.LOCAL,onToggle:()=>n("is_local",!t),children:[(0,l.jsx)(sr.Item,{id:"local",label:(0,l.jsx)(so,{text:(0,f.NC)("Local"),icon:d?(0,l.jsx)(aQ.Z,{height:"48px",width:"48px"}):(0,l.jsx)(a0.Z,{height:"48px",width:"48px"})}),value:z.save_types.LOCAL}),(0,l.jsx)(sr.Item,{id:"drive",label:(0,l.jsx)(so,{text:"Google Drive",icon:(0,l.jsx)(aW.Z,{height:"48px",width:"48px"}),google_drive_connected:s,onDriveConnect:i}),value:z.save_types.GOOGLE_DRIVE,disabled:!s,className:U()({"dc-radio-group__item-disabled":!s})})]})})]}),(0,l.jsxs)("div",{className:U()("modal__footer",{"modal__footer--active-keyboard":c}),children:[(0,l.jsx)(eA.Z,{type:"button",className:"modal__footer--button",text:(0,f.NC)("Cancel"),onClick:o,secondary:!0}),(0,l.jsx)(eA.Z,{className:"modal__footer--button",type:"submit",is_loading:1===a,is_submit_success:2===a,text:(0,f.NC)("Save"),primary:!0})]})]})})}})},sc=(0,r.Pi)(()=>{let{save_modal:e,google_drive:t,dashboard:a,load_modal:s,ui:n}=(0,j.oR)(),{dashboard_strategies:r}=s,{button_status:o,bot_name:d,is_save_modal_open:c,onConfirmSave:_,toggleSaveModal:u,updateBotName:x,validateBotName:m}=e,{is_authorised:h,onDriveConnect:p}=t,{is_onscreen_keyboard_active:b,setCurrentFocus:v}=n,{isMobile:y}=(0,N.F)(),{active_tab:g}=a;return(0,i.useEffect)(()=>{if(1===g){var e;x((null==r||null==(e=r[0])?void 0:e.name)??"")}},[g,r,x]),y?(0,l.jsx)(av,{is_modal_open:c,className:"save-modal__wrapper",header:(0,f.NC)("Save strategy"),onClickClose:u,height_offset:"80px",page_overlay:!0,children:(0,l.jsx)(sd,{bot_name:d,button_status:o,is_authorised:h,onConfirmSave:_,onDriveConnect:p,validateBotName:m,toggleSaveModal:u,is_mobile:y,is_onscreen_keyboard_active:b,setCurrentFocus:v})}):(0,l.jsx)(C.Z,{title:(0,f.NC)("Save strategy"),className:"modal--save",width:"32.8rem",height:"50rem",is_open:c,toggleModal:u,children:(0,l.jsx)(sd,{bot_name:d,button_status:o,is_authorised:h,onConfirmSave:_,onDriveConnect:p,validateBotName:m,toggleSaveModal:u,setCurrentFocus:v})})});var s_=a(11488),su=a(13323);let sx={fontWeight:"700",fontSize:"1.4rem",height:"4rem",padding:"1rem 1.6rem"},sm=e=>{let{steps:t,styles:a,handleCallback:s,...n}=e;return(0,l.jsx)(su.ZP,{steps:t,continuous:!0,callback:s,locale:{back:(0,f.NC)("Previous"),next:(0,f.NC)("Next")},...n,styles:{options:{arrowColor:"var(--general-main-2)",backgroundColor:"var(--general-main-2)",primaryColor:"var(--brand-red-coral)",textColor:"var(--text-general)",spotlightShadow:"0 0 15px rgba(0, 0, 0, 0.5)",width:440},buttonBack:{border:"0.2rem solid var(--text-less-prominent)",marginInlineEnd:"1rem",borderRadius:"0.4rem",color:"var(--text-general)",...sx},buttonNext:{...sx},buttonClose:{insetInlineEnd:"0px",right:"unset"},overlay:{height:"100%"},...a}})},sh=(0,r.Pi)(()=>{let{dashboard:e}=(0,j.oR)(),{is_tour_dialog_visible:t,setTourDialogVisibility:a}=e,{isDesktop:s}=(0,N.F)();return(0,l.jsx)("div",{children:(0,l.jsxs)(aP.Z,{is_visible:t,confirm_button_text:(0,f.NC)("OK"),onConfirm:()=>{a(!1)},is_mobile_full_width:!0,className:"dc-dialog tour-dialog",has_close_icon:!1,children:[(0,l.jsx)("div",{className:"dc-dialog__content__header",children:(0,l.jsx)(ea.Z,{weight:"bold",color:"prominent",size:s?"s":"xs",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Congratulations"})})}),(0,l.jsx)("div",{className:"dc-dialog__content__description",children:(0,l.jsx)(ea.Z,{size:s?"xs":"xxs",color:"prominent",children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"dc-dialog__content__description__text","data-testid":"tour-success-message",children:(0,l.jsx)(f.Xx,{i18n_default_text:"You have successfully created your bot using a simple strategy."},0)}),(0,l.jsx)("div",{className:"dc-dialog__content__description__text",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Now, <0>run the bot</0> to test out the strategy.",components:[(0,l.jsx)("strong",{},0)]},0)}),(0,l.jsx)("div",{className:"dc-dialog__content__description__text",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Note: If you wish to learn more about the Bot Builder, you can proceed to the <0>Tutorials</0> tab.",components:[(0,l.jsx)("strong",{},0)]},0)})]})})})]})})});var sp=a(74131),sj=a(63430),sb=a(58398);let sv=(0,r.Pi)(e=>{let{content:t,media:a,label:s,step_index:n,has_localize_component:r=!1,show_actions:o=!0}=e;return(0,l.jsx)(i.Fragment,{children:(0,l.jsxs)("div",{className:"onboard",children:[o&&(0,l.jsx)("div",{className:"onboard__header",children:(0,l.jsxs)(ea.Z,{color:"less-prominent",lineHeight:"l",children:[n,"/6"]})}),(0,l.jsxs)("div",{className:"onboard__steps",children:[(0,l.jsx)("div",{className:"onboard__label",children:(0,l.jsx)(ea.Z,{as:"p",lineHeight:"l",weight:"bold",children:s})}),a&&(0,l.jsx)("video",{autoPlay:!0,loop:!0,controls:!0,preload:"auto",playsInline:!0,disablePictureInPicture:!0,controlsList:"nodownload",style:{width:"100%"},src:a}),(0,l.jsx)("div",{className:"onboard__content",children:(0,l.jsx)(l.Fragment,{children:t.map(e=>r?e:(0,l.jsx)("div",{className:"onboard__content__block",children:(0,l.jsx)(ea.Z,{align:"left",as:"p",size:"xs",lineHeight:"l",children:e})},`onboard--${(0,sb.Fs)()}`))})})]})]})})}),sy={showProgress:!1,spotlightClicks:!1,disableBeacon:!0,disableOverlay:!0,disableCloseOnEsc:!0},sg=[{target:"#id-bot-builder",content:(0,l.jsx)(sv,{label:(0,l.jsx)(f.Xx,{i18n_default_text:"Build from scratch"}),content:[(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Create your bot using our drag-and-drop blocks or click Quick Strategy to choose from the ready-to-use bot templates."})}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(f.Xx,{i18n_default_text:"We also provide a guide on the Tutorial tab to show you how you can build and execute a simple strategy."})})],media:"/assets/videos/dbot-onboarding-tour-step-1.mp4",step_index:1}),...sy,disableOverlay:!1},{target:"#id-charts",content:(0,l.jsx)(sv,{label:(0,l.jsx)(f.Xx,{i18n_default_text:"Monitor the market"}),content:[(0,l.jsx)(f.Xx,{i18n_default_text:"View the market price of your favourite assets."},"view the market")],media:"/assets/videos/dbot-onboarding-tour-step-2.mp4",step_index:2}),...sy,disableOverlay:!1},{target:"#id-tutorials",content:(0,l.jsx)(sv,{label:(0,l.jsx)(f.Xx,{i18n_default_text:"Learn more with our tutorials"}),content:[(0,l.jsx)(f.Xx,{i18n_default_text:"Explore the video guides and FAQs to build your bot in the tutorials tab."},"explore tutorials")],media:"/assets/videos/dbot-onboarding-tour-step-3.mp4",step_index:3}),...sy,disableOverlay:!1},{target:"#tab__dashboard__table__tiles",content:(0,l.jsx)(sv,{label:(0,l.jsx)(f.Xx,{i18n_default_text:"Use these shortcuts"}),content:[(0,l.jsx)(f.Xx,{i18n_default_text:"You can also import or build your bot using any of these shortcuts."},"use shortcuts")],step_index:4}),placement:(0,P.rK)()?"left":"right",...sy,disableOverlay:!1},{target:".dc-drawer__container",content:(0,l.jsx)(sv,{label:(0,l.jsx)(f.Xx,{i18n_default_text:"Check your bots performance"}),content:[(0,l.jsx)(f.Xx,{i18n_default_text:"See how your bot is doing in real-time."},"check bot performance")],media:"/assets/videos/dbot-onboarding-tour-step-5.mp4",step_index:5}),placement:(0,P.rK)()?"right":"left",...sy,disableOverlay:!1},{target:".animation__wrapper",content:(0,l.jsx)(sv,{label:(0,l.jsx)(f.Xx,{i18n_default_text:"Run your bot"}),content:[(0,l.jsx)(f.Xx,{i18n_default_text:"Click <0>Run</0> when you want to start trading, and click <0>Stop</0> when you want to stop.",components:[(0,l.jsx)("strong",{},0)]},"run your bot")],media:"/assets/videos/dbot-onboarding-tour-step-6.mp4",step_index:6}),...sy,disableOverlay:!1},{target:"#id-tutorials",content:(0,l.jsx)(sv,{label:(0,l.jsx)(f.Xx,{i18n_default_text:"Want to retake the tour?"}),content:[(0,l.jsx)(ea.Z,{as:"p",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Head to the Tutorials tab to do so."})},"0-id-tutorials")],step_index:7,show_actions:!1,has_localize_component:!0}),locale:{last:(0,f.NC)("Got it, thanks!")},...sy,hideBackButton:!0,disableOverlay:!1}],sf=[{target:".animation__wrapper",content:(0,l.jsx)(e=>{let{show_label:t=!1}=e;return(0,l.jsxs)("div",{className:"joyride-content",children:[t&&(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Step 1 :"})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(f.Xx,{i18n_default_text:"First, set the <0>Trade parameters</0> block.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("div",{className:"joyride-content__left joyride-content__sub-title",children:(0,l.jsx)(f.Xx,{i18n_default_text:"<0>1. Trade parameters:<0>",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"First, set <0>Market</0> to Derived > Continuous Indices > Volatility 100 (1s) Index.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Then, set <0>Trade type</0> to Up/Down > Rise/Fall.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"For <0>Contract type,</0> set it to Both.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"For <0>Default candle interval,</0> set it to 1 minute",components:[(0,l.jsx)("strong",{},0)]})})]})})]})},{show_label:!0}),placement:(0,P.rK)()?"bottom":"right",...sy},{target:".animation__wrapper",content:(0,l.jsx)(()=>(0,l.jsxs)("div",{className:"joyride-content",children:[(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(f.Xx,{i18n_default_text:"For <0>Trade options</0>, set it as below:",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"<0>Duration</0>: Ticks 1",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"<0>Stake: USD</0> 10 (min: 0.35 - max: 50000)",components:[(0,l.jsx)("strong",{},0)]})})]})})]}),{}),placement:(0,P.rK)()?"bottom":"right",...sy},{target:".animation__wrapper",content:(0,l.jsx)(e=>{let{show_label:t=!1}=e;return(0,l.jsxs)("div",{className:"joyride-content",children:[t&&(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Step 2 :"})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Then, set the <0>Purchase conditions</0> block.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("div",{className:"joyride-content__left joyride-content__sub-title",children:(0,l.jsx)(f.Xx,{i18n_default_text:"<0>2. Purchase conditions</0>:",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)("ul",{children:(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"<0>Purchase</0>: Rise",components:[(0,l.jsx)("strong",{},0)]})})})})]})},{show_label:!0}),placement:(0,P.rK)()?"bottom":"right",...sy},{target:".animation__wrapper",content:(0,l.jsx)(e=>{let{show_label:t=!1}=e;return(0,l.jsxs)("div",{className:"joyride-content",children:[t&&(0,l.jsx)("div",{className:"joyride-content__left joyride-content__left__step-three",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Step 3 :"})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(f.Xx,{i18n_default_text:"The third block is <0>optional</0>. You may use this block if you want to sell your contract before it expires. For now, leave the block as it is. ",components:[(0,l.jsx)("strong",{},0)]})})]})},{show_label:!0}),placement:(0,P.rK)()?"bottom":"right",...sy},{target:".animation__wrapper",content:(0,l.jsx)(e=>{let{show_label:t=!1}=e;return(0,l.jsxs)("div",{className:"joyride-content",children:[t&&(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Step 4 :"})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Next, go to <0>Utility tab</0> under the Blocks menu. Tap the drop-down arrow and hit <0>Loops</0>.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsxs)("div",{className:"joyride-content__left",children:[(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Look for the <0>Repeat While/Until</0>, and click the + icon to add the block to the workspace area.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Choose <0>until</0> as the repeat option.",components:[(0,l.jsx)("strong",{},0)]})})]}),(0,l.jsxs)("div",{className:"joyride-content__left joyride-content__with-icon",children:[(0,l.jsx)("div",{className:"joyride-content__with-icon__left",children:(0,l.jsx)(sj.Z,{className:"db-contract-card__result-icon",fill:"#4bb4b3"})}),(0,l.jsx)("div",{className:"joyride-content__with-icon__right",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Pro tip: You can also click and drag out the desired block",components:[(0,l.jsx)("strong",{},0)]})})]})]}),(0,l.jsx)("div",{children:(0,l.jsx)("video",{autoPlay:!0,loop:!0,controls:!0,playsInline:!0,preload:"auto",disablePictureInPicture:!0,controlsList:"nodownload",children:(0,l.jsx)("source",{src:"/assets/videos/bot-builder-tour-step-4.mp4",type:"video/mp4"})})})]})},{show_label:!0}),placement:(0,P.rK)()?"bottom":"right",...sy},{target:".animation__wrapper",content:(0,l.jsx)(e=>{let{show_label:t=!1}=e;return(0,l.jsxs)("div",{className:"joyride-content",children:[t&&(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Step 5 :"})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Now, tap the <0>Analysis</0> drop-down arrow and hit <0>Contract</0>.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Go to the <0>Last trade result</0> block and click + icon to add the <0>Result is Win</0> block to the workspace.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Then, drag the <0>Result is win</0> into the empty slot next to <0>repeat until</0> block.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Now, go to the <0>Restart trading conditions</0> block.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Drag the <0>Trade again</0> block and add it into the <0>do</0> part of the <0>Repeat until</0> block.",components:[(0,l.jsx)("strong",{},0)]})})]})}),(0,l.jsx)("div",{children:(0,l.jsx)("video",{autoPlay:!0,loop:!0,controls:!0,playsInline:!0,preload:"auto",disablePictureInPicture:!0,controlsList:"nodownload",children:(0,l.jsx)("source",{src:"/assets/videos/bot-builder-tour-step-5.mp4",type:"video/mp4"})})})]})},{show_label:!0}),placement:(0,P.rK)()?"bottom":"right",...sy},{target:".animation__wrapper",content:(0,l.jsx)(e=>{let{show_label:t=!1}=e;return(0,l.jsxs)("div",{className:"joyride-content",children:[t&&(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Step 6 :"})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Finally, drag and add the whole <0>Repeat</0> block to the <0>Restart trading conditions</0> block.",components:[(0,l.jsx)("strong",{},0)]})})]})},{show_label:!0}),locale:{last:(0,f.NC)("Next")},...sy}],sN=[{header:(0,l.jsx)(f.Xx,{i18n_default_text:"Step 1"}),content:[(0,l.jsx)("span",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"First, click the Import icon on the tool bar."},"step-1")},"step-1-wrapper")],tour_step_key:1},{header:(0,l.jsx)(f.Xx,{i18n_default_text:"Step 2"}),content:[(0,l.jsx)("span",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Next, import your bot directly from your mobile device or from Google Drive."},"step-2")},"step-2-wrapper")],tour_step_key:2},{header:(0,l.jsx)(f.Xx,{i18n_default_text:"Step 3"}),content:[(0,l.jsx)("span",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Once imported, you will see a preview of the bot on the workspace. Click run to start trading with this bot."},"step-3")},"step-3-wrapper")],tour_step_key:3}],sC=[{header:(0,l.jsx)(f.Xx,{i18n_default_text:"Get started on Deriv Bot"}),content:[(0,l.jsx)("span",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Hi! Hit <0>Start</0> for a quick tour.",components:[(0,l.jsx)("strong",{},0)]},"get-started-on-deriv-bot")},"get-started-on-deriv-bot-wrapper")],tour_step_key:1},{header:(0,l.jsx)(f.Xx,{i18n_default_text:"Import or choose your bot"}),content:[(0,l.jsx)("span",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Import your bot or tap Quick Strategies to choose from the ready-to-use bot templates."},"import-or-choose-your-bot")},"import-or-choose-your-bot-wrapper")],media:"/assets/videos/dbot-mobile-onboarding-step-1.mp4",tour_step_key:2},{header:(0,l.jsx)(f.Xx,{i18n_default_text:"Monitor the market"}),content:[(0,l.jsx)("span",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"View the market price of your favourite assets."},"monitor-the-market")},"monitor-the-market-wrapper")],media:"/assets/videos/dbot-mobile-onboarding-step-2.mp4",tour_step_key:3},{header:(0,l.jsx)(f.Xx,{i18n_default_text:"Learn more with our tutorials"}),content:[(0,l.jsx)("span",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Explore the video guides and FAQs to build your bot in the tutorials tab."},"learn-more-with-our-tutorials")},"learn-more-with-our-tutorials-wrapper")],media:"/assets/videos/dbot-mobile-onboarding-step-3.mp4",tour_step_key:4},{header:(0,l.jsx)(f.Xx,{i18n_default_text:"Use these shortcuts"}),img:(0,sp.oY)("dbot-mobile-onboarding-step-4.png"),content:[(0,l.jsx)("span",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"You can also import or build your bot using any of these shortcuts."},"use-these-shortcuts")},"use-these-shortcuts-wrapper")],tour_step_key:5},{header:(0,l.jsx)(f.Xx,{i18n_default_text:"Check your bots performance"}),media:"/assets/videos/dbot-mobile-onboarding-step-5.mp4",content:[(0,l.jsxs)("span",{children:[(0,l.jsx)(f.Xx,{i18n_default_text:"See how your bot is doing in real-time."},"check-your-bots-performance"),","]},"check-your-bots-performance-wrapper")],tour_step_key:6},{header:(0,l.jsx)(f.Xx,{i18n_default_text:"Run your bot"}),media:"/assets/videos/dbot-mobile-onboarding-step-6.mp4",content:[(0,l.jsx)("span",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Click <0>Run</0> when you want to start trading, and click <0>Stop</0> when you want to stop.",components:[(0,l.jsx)("strong",{},0)]},"run-your-bot")},"run-your-bot-wrapper")],tour_step_key:7},{header:(0,l.jsx)(f.Xx,{i18n_default_text:"Want to retake the tour?"}),img:(0,sp.oY)("dbot-mobile-onboarding-step-7.png"),content:[(0,l.jsx)("span",{children:(0,l.jsx)(f.Xx,{i18n_default_text:"Head to the Tutorials tab to do so."},"want-to-retake-the-tour")},"want-to-retake-the-tour-wrapper")],tour_step_key:8}],sk=e=>e?(0,l.jsx)(f.Xx,{i18n_default_text:"Heres a quick guide on how to use Deriv Bot on the go."},"tour-dialog-info-mobile"):(0,l.jsx)(f.Xx,{i18n_default_text:"Learn how to build your bot from scratch using a simple strategy."},"tour-dialog-info-desktop"),sw=e=>e?(0,l.jsx)(f.Xx,{i18n_default_text:"You can import a bot from your mobile device or from Google drive, see a preview in the bot builder, and start trading by running the bot."},"tour-dialog-action-mobile"):(0,l.jsx)(f.Xx,{i18n_default_text:"Hit the <0>Start</0> button to begin and follow the tutorial.",components:[(0,l.jsx)("strong",{},0)]},"tour-dialog-action-desktop"),sT=(0,l.jsx)(f.Xx,{i18n_default_text:"Get started on Deriv Bot"},"onboarding-tour-header"),sE=e=>e?(0,l.jsx)(f.Xx,{i18n_default_text:"Bot Builder guide"},"tour_header-mobile"):(0,l.jsx)(f.Xx,{i18n_default_text:"Let's build a Bot!"},"tour_header-desktop");var sS=a(41786);let sI=(0,r.Pi)(()=>{let{dashboard:e}=(0,j.oR)(),{active_tab:t,is_tour_dialog_visible:a,setTourDialogVisibility:s,setActiveTour:n,setShowMobileTourDialog:r}=e,{isDesktop:o}=(0,N.F)(),d=0===t?"onboard_tour_token":"bot_builder_token",c=()=>{o||r(!1),s(!1),n(""),(0,sS.X7)(new Date().getTime(),d)},_=t===tK.ve.DASHBOARD,u=sk(!o),x=sw(!o),[m,h]=i.useState(!1),p=b();i.useEffect(()=>{p?h(!1):a?h(!0):h(!1)},[p,a]);let v=0===t?sT:sE(!o);return(0,l.jsx)("div",{children:(0,l.jsxs)(aP.Z,{is_visible:m,cancel_button_text:(0,f.NC)("Skip"),onCancel:()=>c(),confirm_button_text:(0,f.NC)("Start"),onConfirm:()=>{n(sS.TJ[t]),o||r(!1),s(!1),(0,sS.X7)(new Date().getTime(),d)},is_mobile_full_width:!0,className:"dc-dialog tour-dialog",has_close_icon:!1,portal_element_id:"modal_root",children:[(0,l.jsx)("div",{className:"dc-dialog__content__header",children:(0,l.jsx)(ea.Z,{weight:"bold",color:"prominent",size:o?"s":"xs",children:v})}),(0,l.jsx)("div",{className:"dc-dialog__content__description",children:(0,l.jsx)(ea.Z,{size:o?"xs":"xxs",color:"prominent",children:(0,l.jsx)(l.Fragment,{children:_?(0,l.jsx)(f.Xx,{i18n_default_text:"Hi! Hit <0>Start</0> for a quick tour.",components:[(0,l.jsx)("strong",{},0)]},0):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"dc-dialog__content__description__text",children:u}),(0,l.jsx)("div",{className:"dc-dialog__content__description__text",children:x}),(0,l.jsx)("div",{className:"dc-dialog__content__description__text",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Note: You can also find this tutorial in the <0>Tutorials</0> tab.",components:[(0,l.jsx)("strong",{},0)]},0)})]})})})})]})})}),sA=()=>{let[e,t]=(0,i.useState)(!1),[a,s]=(0,i.useState)(!1);return{is_finished:e,handleJoyrideCallback:e=>{let{action:a,status:n}=e;"finished"===n?t(!0):("close"===a||"skip"===a)&&s(!0)},setIsFinished:t,is_close_tour:a,setIsCloseTour:s}},sR=(0,r.Pi)(()=>{let{is_close_tour:e,is_finished:t,handleJoyrideCallback:a,setIsCloseTour:s}=sA(),{dashboard:n,load_modal:r}=(0,j.oR)(),{active_tab:o,active_tour:d,setActiveTour:c,setTourDialogVisibility:_}=n,{is_load_modal_open:u}=r;return(0,s_.$8)("bot_builder_token")||1!==o||_(!0),i.useEffect(()=>{t?(_(!0),c("")):e&&(c(""),s(!1))},[e,t,c,s,_]),(0,l.jsxs)(l.Fragment,{children:[t?(0,l.jsx)(sh,{}):u?null:(0,l.jsx)(sI,{}),d&&(0,l.jsx)(sm,{handleCallback:a,steps:sf,disableCloseOnEsc:!0,disableOverlay:!1,disableOverlayClose:!0,styles:{options:{arrowColor:"transparent",backgroundColor:"var(--general-main-2)",primaryColor:"var(--brand-red-coral)",textColor:"var(--text-general)"}}})]})}),sL=e=>{let{step:t,steps_list:a,is_transition:s=!1,onStepChange:n}=e;return(0,l.jsx)("div",{className:"dc-progress-bar-tracker",children:a.map((e,a)=>{let i=t===a+1;return(0,l.jsx)("div",{onClick:()=>{n(a+1)},className:U()({"dc-progress-bar-tracker-rectangle":i,"dc-progress-bar-tracker-circle":!i,"dc-progress-bar-tracker-transition":s})},e)})})},sO=e=>{let{label:t,type:a="default",...s}=e;return t?(0,l.jsx)("button",{className:a,...s,children:(0,l.jsx)(ea.Z,{color:"prominent",align:"center",weight:"bold",as:"span",lineHeight:"s",size:"xs",children:t})}):null},sM=(0,r.Pi)(()=>{let{dashboard:e,load_modal:t,quick_strategy:a}=(0,j.oR)(),{toggleTourLoadModal:s}=t,{onTourEnd:n,setTourActiveStep:r,active_tour:o,show_mobile_tour_dialog:d,active_tab:c,setShowMobileTourDialog:_,setTourDialogVisibility:u}=e,{is_open:x}=a,[m,h]=i.useState(1),p=sN.find(e=>{let{tour_step_key:t}=e;return t===m}),b=3===m?"finish-bot-builder-tour":"next-bot-builder-tour";i.useEffect(()=>{r(m),d||(0,sS._y)(o,m),2===m?s(!0):""!==o&&s(!1),(0,s_.$8)("bot_builder_token")||1!==c||(x?u(!1):u(!0),_(!0))},[m,d]);let v=3===m?(0,f.NC)("Finish"):(0,f.NC)("Next"),y="onboarding"===o;return(0,l.jsxs)(l.Fragment,{children:[d&&(0,l.jsx)(sI,{}),o&&!d&&(0,l.jsxs)("div",{"data-testid":"botbuilder-tour-mobile",className:"dbot-slider dbot-slider__bot-builder-tour",children:[(0,l.jsx)("div",{className:"dbot-slider__label",children:(0,l.jsx)(ea.Z,{as:"span",size:"xs",weight:"bold",children:null==p?void 0:p.header})}),(0,l.jsx)("div",{className:"dbot-slider__content",children:(0,l.jsx)(ea.Z,{as:"span",lineHeight:"s",size:"xs",children:null==p?void 0:p.content})}),(0,l.jsxs)("div",{className:"dbot-slider__status",children:[(0,l.jsx)("div",{className:"dbot-slider__progress-bar",children:(0,l.jsx)(sL,{step:m,steps_list:sN.map(e=>e.tour_step_key.toString()),onStepChange:h})}),(0,l.jsxs)("div",{className:"dbot-slider__button-group",children:[1!==m&&(0,l.jsx)(sO,{onClick:()=>{h(m-1)},label:(0,f.NC)("Previous"),"data-testid":"prev-bot-builder-tour"}),(0,l.jsx)(sO,{type:"danger",onClick:()=>{h(m+1),n(m,y)},label:v,"data-testid":b})]})]})]})]})}),sD=(0,r.Pi)(e=>{let{is_mobile:t}=e;return(0,l.jsx)(l.Fragment,{children:t?(0,l.jsx)(sM,{}):(0,l.jsx)(sR,{})})});var sU=a(16310);let sZ=e=>{let{form_values:t,selected_strategy:a}=e;aV.Analytics.trackEvent("ce_bot_form",{action:aq.om.RUN_QUICK_STRATEGY,form_name:aq.oH,subform_name:"quick_strategy",strategy_name:(0,aY.gc)(a),...(0,aY.qc)({form_values:t,selected_strategy:a})})},sF=e=>{let{form_values:t,selected_strategy:a}=e;aV.Analytics.trackEvent("ce_bot_form",{action:aq.om.EDIT_QUICK_STRATEGY,form_name:aq.oH,subform_name:"quick_strategy",strategy_name:(0,aY.gc)(a),...(0,aY.qc)({form_values:t,selected_strategy:a})})};var sz=a(37192),sP=a(53890),sB=a(81624),sX=((n={})[n.StrategySelect=0]="StrategySelect",n[n.StrategyVerified=1]="StrategyVerified",n[n.StrategyCompleted=2]="StrategyCompleted",n);let s$=Object.freeze({ALL:0,ACCUMULATORS:1,OPTIONS:2}),sH=[(0,f.NC)("All"),(0,f.NC)("Accumulators"),(0,f.NC)("Options")],sV=[{name:"MARTINGALE",display_name:(0,sz.j)().MARTINGALE.label,id:0,parent:[(0,f.NC)("Options")]},{name:"D_ALEMBERT",display_name:(0,sz.j)().D_ALEMBERT.label,id:1,parent:[(0,f.NC)("Options")]},{name:"REVERSE_MARTINGALE",display_name:(0,sz.j)().REVERSE_MARTINGALE.label,id:2,parent:[(0,f.NC)("Options")]},{name:"REVERSE_D_ALEMBERT",display_name:(0,sz.j)().REVERSE_D_ALEMBERT.label,id:3,parent:[(0,f.NC)("Options")]},{name:"OSCARS_GRIND",display_name:(0,sz.j)().OSCARS_GRIND.label,id:4,parent:[(0,f.NC)("Options")]},{name:"STRATEGY_1_3_2_6",display_name:(0,sz.j)().STRATEGY_1_3_2_6.label,id:5,parent:[(0,f.NC)("Options")]},{name:"ACCUMULATORS_MARTINGALE",display_name:(0,sz.j)().ACCUMULATORS_MARTINGALE.label,id:6,parent:[(0,f.NC)("Accumulators")]},{name:"ACCUMULATORS_MARTINGALE_ON_STAT_RESET",display_name:(0,sz.j)().ACCUMULATORS_MARTINGALE_ON_STAT_RESET.label,id:7,parent:[(0,f.NC)("Accumulators")]},{name:"ACCUMULATORS_DALEMBERT",display_name:(0,sz.j)().ACCUMULATORS_DALEMBERT.label,id:8,parent:[(0,f.NC)("Accumulators")]},{name:"ACCUMULATORS_DALEMBERT_ON_STAT_RESET",display_name:(0,sz.j)().ACCUMULATORS_DALEMBERT_ON_STAT_RESET.label,id:9,parent:[(0,f.NC)("Accumulators")]},{name:"ACCUMULATORS_REVERSE_MARTINGALE",display_name:(0,sz.j)().ACCUMULATORS_REVERSE_MARTINGALE.label,id:10,parent:[(0,f.NC)("Accumulators")]},{name:"ACCUMULATORS_REVERSE_MARTINGALE_ON_STAT_RESET",display_name:(0,sz.j)().ACCUMULATORS_REVERSE_MARTINGALE_ON_STAT_RESET.label,id:11,parent:[(0,f.NC)("Accumulators")]},{name:"ACCUMULATORS_REVERSE_DALEMBERT",display_name:(0,sz.j)().ACCUMULATORS_REVERSE_DALEMBERT.label,id:12,parent:[(0,f.NC)("Accumulators")]},{name:"ACCUMULATORS_REVERSE_DALEMBERT_ON_STAT_RESET",display_name:(0,sz.j)().ACCUMULATORS_REVERSE_DALEMBERT_ON_STAT_RESET.label,id:13,parent:[(0,f.NC)("Accumulators")]}],sq=e=>{let{current_step:t,is_mobile:a=!1}=e,s=t===sX.StrategyCompleted?100:50;return a?(0,l.jsx)(sB.D,{percentage:s,label:"",danger_limit:101,is_loading:!1,warning_limit:0}):(0,l.jsx)("div",{className:"qs-stepper",children:(0,l.jsx)(sP.t,{currentStep:t,labels:[(0,f.NC)("Default"),(0,f.NC)("Strategy template"),(0,f.NC)("Trade parameters")]})})};var sG=a(42683),sY=a(95975),sK=a(35371),sW=a(51667);let sJ=e=>{let{title:t,items:a,onSelectStrategy:s}=e;return a.length>0?(0,l.jsxs)("div",{className:"strategy-template-picker__strategy",children:[(0,l.jsx)("div",{className:"strategy-template-picker__title",children:(0,l.jsx)(ea.Z,{size:"xs",weight:"bold",children:t})}),a.map((e,a)=>(0,l.jsx)("div",{className:"strategy-template-picker__links",children:(0,l.jsx)(y.r,{hasChevron:!0,size:"sm",onClick:()=>s(e.name,t),children:e.display_name})},a))]}):null},sQ=e=>{let{selector_chip_value:t,search_value:a,is_searching:s,onSelectStrategy:n}=e,i=[],r=!1,o=e=>(r=e.toLowerCase().includes(a.toLowerCase()),s&&r||!s);sV.filter(e=>e.parent.some(e=>o(e))||e.display_name.toLowerCase().includes(a.toLowerCase())).forEach(e=>{let t={...e};if(s&&""!==a)if(e.display_name.toLowerCase().includes(a.toLowerCase()))t.parent=[...e.parent];else{let s=t.parent.filter(e=>e.toLowerCase().includes(a.toLowerCase()));t.parent=s.length>0?s:e.parent}else t.parent=[...e.parent];i.push(t)});let d=i.filter(e=>e.parent.includes(sH[s$.OPTIONS])),c=i.filter(e=>e.parent.includes(sH[s$.MULTIPLIERS])),_=i.filter(e=>e.parent.includes(sH[s$.ACCUMULATORS])),u=sH[t],x=[{type:(0,f.NC)("Accumulators"),items:_},{type:(0,f.NC)("Options"),items:d},{type:(0,f.NC)("Multipliers"),items:c}],m=e=>u===(0,f.NC)("All")||u===e,h=x.filter(e=>{let{type:t}=e;return m(t)}),p=h.some(e=>{let{items:t}=e;return t.length>0});return i.length>0&&p?(0,l.jsx)("div",{className:"strategy-template-picker__strategies",children:h.map(e=>{let{type:t,items:a}=e;return(0,l.jsx)(sJ,{title:t,items:a,onSelectStrategy:n},t)})}):(0,l.jsx)("div",{className:"no-results",children:(0,l.jsx)(ea.Z,{size:"xs",children:(0,f.NC)("No results found")})})},s0=(0,r.Pi)(e=>{let{setCurrentStep:t,setSelectedTradeType:a}=e,{dashboard:s,quick_strategy:n}=(0,j.oR)(),{setActiveTabTutorial:r,setActiveTab:o,setFAQSearchValue:d,filterTuotrialTab:c}=s,{setFormVisibility:_,setSelectedStrategy:u}=n,[x,m]=i.useState(0),[h,p]=i.useState(!1),[b,v]=i.useState(""),y=e=>{m(e)};return(0,l.jsxs)("div",{className:"strategy-template-picker",children:[(0,l.jsxs)("div",{className:"strategy-template-picker__panel",children:[(0,l.jsx)(sK.U,{onChange:e=>{v(e.target.value),p(!0),d(e.target.value),c(e.target.value)},placeholder:(0,f.NC)("Search"),type:"text",value:b,inputSize:"sm"}),(0,l.jsx)("button",{className:"strategy-template-picker__icon",onClick:()=>{o(tK.ve.TUTORIAL),r(2),_(!1),setTimeout(()=>{let e=document.getElementById("id-tutorials");e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})},100)},children:(0,l.jsx)(sY.Z,{iconSize:"sm"})})]}),(0,l.jsx)("div",{className:"strategy-template-picker__chips",children:sH.map((e,t)=>(0,l.jsx)(sW.A.Selectable,{onClick:()=>y(t),selected:t==x,size:"sm",label:e},t))}),(0,l.jsx)(sQ,{selector_chip_value:x,search_value:b,is_searching:h,onSelectStrategy:(e,s)=>{u(e),a(s),t(sX.StrategyVerified)}})]})}),s1=()=>{let{client:e}=(0,j.oR)(),{currency:t,balance:a,is_logged_in:s}=e,{submitForm:n,setFieldValue:l,values:i,isValid:r,validateForm:o}=(0,eD.u6)(),{quick_strategy:d,run_panel:c}=(0,j.oR)(),{toggleStopBotDialog:_,setLossThresholdWarningData:u,loss_threshold_warning_data:x,onSubmit:m}=d,h=async()=>{c.is_running?(await l("action","EDIT"),o(),n(),_()):(await l("action","RUN"),o(),n().then(e=>{r&&e&&m(e)}))};return{handleSubmit:async()=>{var e;let n=Number((null==i?void 0:i.loss)??0),l=Number((null==i?void 0:i.profit)??0),r=JSON.parse((null==(e=localStorage)?void 0:e.getItem("qs-dont-show-loss-threshold-warning"))??"false");!x.already_shown&&(n>.5*Number(a??0)||n>2*l)&&s&&!r?u({show:!0,loss_amount:n,currency:t,already_shown:!0}):h()},proceedFormSubmission:h}},s8=e=>{let{selected_trade_type:t,selected_startegy_label:a,children:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"qs__selected-options",children:[(0,l.jsxs)("div",{className:"qs__selected-options__item",children:[(0,l.jsx)(ea.Z,{size:"xs",lineHeight:"s",children:(0,f.NC)("Trade type")}),(0,l.jsx)(ea.Z,{size:"xs",weight:"bold",lineHeight:"s",children:t})]}),(0,l.jsxs)("div",{className:"qs__selected-options__item",children:[(0,l.jsx)(ea.Z,{size:"xs",lineHeight:"s",children:(0,f.NC)("Strategy")}),(0,l.jsx)(ea.Z,{className:"qs__selected-options__item__description",weight:"bold",lineHeight:"s",children:a})]})]}),(0,l.jsx)(sG.Z,{formfields:s,active_tab:"TRADE_PARAMETERS"})]})},s2=(0,r.Pi)(e=>{let{children:t,current_step:a,setCurrentStep:s,onClickClose:n,selected_trade_type:r,setSelectedTradeType:o}=e,d=i.useRef(null),{submitForm:c,isValid:_,setFieldValue:u,validateForm:x,values:m}=(0,eD.u6)(),{quick_strategy:h}=(0,j.oR)(),{selected_strategy:p,onSubmit:b,is_stop_bot_dialog_open:v}=h,{handleSubmit:y}=s1(),g=(0,sz.j)()[p].label,N=a===sX.StrategySelect;i.useEffect(()=>{_&&a===sX.StrategyVerified&&s(sX.StrategyCompleted),_||a!==sX.StrategyCompleted||s(sX.StrategyVerified)},[_,a]),i.useEffect(()=>{x()},[p,x]);let C=async()=>{await u("action","EDIT"),x(),c().then(e=>{_&&e&&(sF({form_values:m,selected_strategy:p}),b(e))})},k=()=>{y()},w=i.useCallback(()=>{switch(a){case sX.StrategySelect:return(0,l.jsx)(s0,{setCurrentStep:s,setSelectedTradeType:o});case sX.StrategyVerified:case sX.StrategyCompleted:return(0,l.jsx)(s8,{selected_trade_type:r,selected_startegy_label:g,children:t});default:return null}},[a,r,g,t,s,o]);return!v&&(0,l.jsxs)("div",{className:"qs",children:[(0,l.jsxs)("div",{className:"qs__head",children:[(0,l.jsx)("div",{className:"qs__head__title",children:(0,l.jsx)(ea.Z,{weight:"bold",children:(0,f.NC)("Quick Strategy")})}),(0,l.jsx)("div",{className:"qs__head__action",children:(0,l.jsx)("span",{"data-testid":"qs-desktop-close-button",onClick:n,tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&n()},children:(0,l.jsx)(S.Z,{height:"20px",width:"20px"})})})]}),(0,l.jsxs)("div",{className:"qs__body",children:[(0,l.jsxs)("div",{className:"qs__body__sidebar",children:[(0,l.jsx)("div",{className:"qs__body__sidebar__subtitle",children:(0,l.jsx)(ea.Z,{size:"xs",children:(0,f.NC)("Choose a template below and set your trade parameters.")})}),(0,l.jsx)(sq,{current_step:a})]}),(0,l.jsxs)("div",{className:"qs__body__content",children:[(0,l.jsx)(er.Z,{className:"qs__form__container qs__form__container--footer",autohide:!1,refSetter:d,children:w()}),!N&&(0,l.jsxs)("div",{className:"qs__body__content__footer",children:[(0,l.jsx)(eA.Z,{transparent:!0,classNameSpan:"qs__body__content__footer--back",disabled:N,onClick:()=>{s(sX.StrategySelect)},children:(0,f.NC)("Back")}),(0,l.jsx)(eA.Z,{secondary:!0,disabled:!_,onClick:C,children:(0,f.NC)("Load")}),(0,l.jsx)(eA.Z,{"data-testid":"qs-run-button",primary:!0,onClick:e=>{e.preventDefault(),k()},disabled:!_,children:(0,f.NC)("Run")})]})]})]})]})}),s3=i.memo(s2),s7=(0,r.Pi)(e=>{let{children:t,current_step:a,selected_trade_type:s,setCurrentStep:n,setSelectedTradeType:r}=e,{isValid:o,validateForm:d}=(0,eD.u6)(),{quick_strategy:c}=(0,j.oR)(),{selected_strategy:_}=c,u=(0,sz.j)()[_].label,x=a===sX.StrategyVerified||a===sX.StrategyCompleted,m=a===sX.StrategySelect;return i.useEffect(()=>{d()},[_,d]),i.useEffect(()=>{o&&a===sX.StrategyVerified&&n(sX.StrategyCompleted),o||a!==sX.StrategyCompleted||n(sX.StrategyVerified)},[o,a]),(0,l.jsx)("div",{className:"qs",children:(0,l.jsx)("div",{className:"qs__body",children:(0,l.jsx)("div",{className:"qs__body__content",children:(0,l.jsxs)(er.Z,{className:U()("qs__form__container qs__form__container--footer",{"qs__form__container--template":m}),autohide:!1,children:[(0,l.jsx)(sq,{setCurrentStep:n,current_step:a,isValid:o,is_mobile:!0}),m&&(0,l.jsx)(s0,{setSelectedTradeType:r,setCurrentStep:n}),x&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"qs__selected-options",children:[(0,l.jsxs)("div",{className:"qs__selected-options__item",children:[(0,l.jsx)(ea.Z,{size:"xs",children:(0,f.NC)("Trade type")}),(0,l.jsx)(ea.Z,{size:"xs",weight:"bold",children:s})]}),(0,l.jsxs)("div",{className:"qs__selected-options__item",children:[(0,l.jsx)(ea.Z,{size:"xs",children:(0,f.NC)("Strategy")}),(0,l.jsx)(ea.Z,{className:"qs__selected-options__item__description",size:"xs",weight:"bold",children:u})]})]}),(0,l.jsx)(sG.Z,{formfields:t,active_tab:"TRADE_PARAMETERS"})]})]})})})})}),s9=(0,r.Pi)(e=>{let{current_step:t,setCurrentStep:a}=e,{quick_strategy:s}=(0,j.oR)(),{selected_strategy:n}=s,{isValid:i,values:r}=(0,eD.u6)(),{handleSubmit:o}=s1(),d=t===sX.StrategyVerified||t===sX.StrategyCompleted,c=t===sX.StrategySelect,_=()=>{sZ({form_values:r,selected_strategy:n}),o()};return(0,l.jsx)(l.Fragment,{children:d&&(0,l.jsxs)("div",{className:"qs__body__content__footer",children:[(0,l.jsx)(eA.Z,{secondary:!0,disabled:c,onClick:()=>{a(sX.StrategySelect)},children:(0,f.NC)("Back")}),(0,l.jsx)(eA.Z,{primary:!0,"data-testid":"qs-run-button",type:"submit",onClick:e=>{e.preventDefault(),_()},disabled:!i,children:(0,f.NC)("Run")})]})})}),s5="loss-threshold-warning-dialog",s4=(0,r.Pi)(()=>{let{quick_strategy:e}=(0,j.oR)(),{loss_threshold_warning_data:t,setLossThresholdWarningData:a,initializeLossThresholdWarningData:s}=e,{proceedFormSubmission:n}=s1();return(0,l.jsxs)(aP.Z,{portal_element_id:"modal_root",title:(0,f.NC)("Are you sure you want to continue?"),is_visible:t.show,confirm_button_text:(0,f.NC)("Yes, continue"),onConfirm:()=>{s(),n()},cancel_button_text:(0,f.NC)("Edit the amount"),onCancel:()=>{a({show:!1,highlight_field:["loss"]})},is_mobile_full_width:!1,has_close_icon:!1,className:s5,children:[(0,l.jsx)("div",{className:`${s5}__body-text`,children:(0,l.jsx)(f.Xx,{i18n_default_text:"Please confirm that your loss threshold amount is {{loss_amount}} {{currency}}.",values:{loss_amount:null==t?void 0:t.loss_amount,currency:null==t?void 0:t.currency}})}),(0,l.jsx)(ey,{defaultChecked:!1,label:(0,f.NC)("Do not show this message again."),onChange:()=>{var e,t;let a=JSON.parse((null==(e=localStorage)?void 0:e.getItem("qs-dont-show-loss-threshold-warning"))??"false");null==(t=localStorage)||t.setItem("qs-dont-show-loss-threshold-warning",`${!a}`)}})]})});var s6=a(67026),ne=a(56181);let nt=e=>{let{parent_rect:t,child_height:a=0}=e;return((null==t?void 0:t.top)||0)+((null==t?void 0:t.height)||0)+a},na=e=>{let{parent_rect:t,child_height:a=0}=e;return Number(null==t?void 0:t.top)-a},ns=e=>{let{preferred_alignment:t="bottom",child_el:a,parent_el:s,should_consider_parent_height:n=!0}=e,l=null==s?void 0:s.getBoundingClientRect(),i=null==a?void 0:a.clientHeight,r=document.body.getBoundingClientRect(),{top:o,bottom:d,left:c,width:_}=l||{top:0,bottom:0,left:0,width:0},u=nt({parent_rect:l,child_height:i}),x={bottom:r.bottom-(n?o:d)+8,insetInlineStart:c,width:_,transformOrigin:"bottom"},m={top:n?d:o,insetInlineStart:c,width:_,transformOrigin:"top"};if("bottom"===t&&u<=r.height)return{style:m,placement:"bottom"};let h=na({parent_rect:l,child_height:i});return"top"===t&&h>=0?{style:x,placement:"top"}:u-r.height<0-h?{style:m,placement:"bottom"}:{style:x,placement:"top"}};var nn=a(2895);let nl=e=>{i.useEffect(()=>{if(!e)return;let t=e=>e?e.classList.contains("dc-themed-scrollbars")&&e.scrollHeight>e.clientHeight?e:t(e.parentElement):null,a=t(e.current),s=navigator.userAgent.indexOf("Firefox")>-1;return a&&(a.style.overflow="hidden",a.style.width=s?"100%":"calc(100% - 5px)"),()=>{a&&(a.style.removeProperty("overflow"),a.style.removeProperty("width"))}},[e])};var ni=a(33716),nr=a(87247);let no=e=>{let{is_active:t,is_disabled:a,index:s,item:n,child_ref:i,onItemSelection:r,setActiveIndex:o}=e;return(0,l.jsx)("div",{ref:i,onMouseDown:e=>{e.stopPropagation(),r(n),o(s)},className:U()("dc-dropdown-list__item",{"dc-dropdown-list__item--active":t,"dc-dropdown-list__item--disabled":a}),children:"object"==typeof n?n.component||n.text:n})},nd=i.forwardRef((e,t)=>{let{active_index:a,list_items:s,is_object_list:n,onItemSelection:r,setActiveIndex:o,not_found_text:d}=e;if(null==s?void 0:s.some(e=>"object"==typeof e&&!!e.group)){let e={};s.forEach(t=>{let a="object"==typeof t&&t.group||"?";e[a]||(e[a]=[]),e[a].push(t)});let d=Object.keys(e),c=-1;return(0,l.jsx)(l.Fragment,{children:d.map((s,_)=>{let u=e[s],x=!!d[_+1];return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("div",{className:"dc-dropdown-list__group-header",children:s}),u.map(e=>(c++,(0,l.jsx)(no,{item:e,index:c,is_active:c===a,onItemSelection:r,setActiveIndex:o,is_object_list:n,is_disabled:"object"==typeof e&&"DISABLED"===e.disabled,child_ref:c===a?t:null},c))),x&&(0,l.jsx)("div",{className:"dc-dropdown-list__separator"})]},`group${_}`)})})}return(0,l.jsx)(l.Fragment,{children:(null==s?void 0:s.length)?s.map((e,s)=>(0,l.jsx)(no,{item:e,index:s,is_active:s===a,onItemSelection:r,is_object_list:n,setActiveIndex:o,child_ref:s===a?t:null},s)):(0,l.jsx)("div",{className:"dc-dropdown-list__item dc-dropdown-list__item--not-found",children:d})})});nd.displayName="ListItems";let nc=e=>{let{dropdown_ref:t,list_item_ref:a,list_wrapper_ref:s}=e.dropdown_refs||{},{active_index:n,is_visible:i,list_items:r,list_height:o,onScrollStop:d,onItemSelection:c,setActiveIndex:_,style:u,not_found_text:x,portal_id:m}=e;if((null==r?void 0:r.length)&&"string"!=typeof r[0]&&"object"!=typeof r[0])throw Error("Dropdown received wrong data structure");let h=!Array.isArray(r)&&"object"==typeof r,p=(null==r?void 0:r.length)&&"string"==typeof r[0],j=(0,l.jsx)(eT.Z,{appear:i,in:i,timeout:100,classNames:{enter:"dc-dropdown-list--enter",enterDone:"dc-dropdown-list--enter-done",exit:"dc-dropdown-list--exit"},unmountOnExit:!0,children:(0,l.jsx)("div",{style:u,className:"dc-dropdown-list",ref:s,children:(0,l.jsx)(nr.Z,{height:o||"220px",refSetter:t,onScroll:d,children:h?Object.keys(r).map((e,t)=>(0,l.jsx)(nd,{not_found_text:x,active_index:n,list_items:r[e],ref:a,onItemSelection:c,setActiveIndex:_},t)):(0,l.jsx)(nd,{not_found_text:x,active_index:n,list_items:r,ref:a,onItemSelection:c,is_object_list:!p,setActiveIndex:_})})})});if(m){let e=document.getElementById(m);return e&&eY.createPortal(j,e)}return j};nc.displayName="DropdownList";let n_={ENTER:13,ESCAPE:27,TAB:9,KEYDOWN:40,KEYUP:38},nu=e=>"string"==typeof e,nx=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=e.toLowerCase();return t.filter(e=>(nu(e)?e.toLowerCase():(e.text||"").toLowerCase()).includes(s)).sort((e,t)=>(nu(e)?e:e.text||"").toLowerCase().indexOf(s)-(nu(t)?t:t.text||"").toLowerCase().indexOf(s)).filter(t=>{let s=nu(t)?t:t.text||"",n=s.toLowerCase(),l=(0,nn._v)(n);return a?(0,nn.pp)(s,e):l.includes(e)||n.includes(e)})},nm=i.memo(e=>{let t,a=(0,ne.Re)(),{autoComplete:s,className:n,data_testid:r,dropdown_offset:o,error:d,has_updating_list:c=!0,hide_list:_=!1,historyValue:u,input_id:x,is_alignment_top:m,is_list_visible:h=!1,list_items:p,list_portal_id:j,not_found_text:b=a,onHideDropdownList:v,onItemSelection:y,onSearch:g,onScrollStop:f,onShowDropdownList:N,should_filter_by_char:C,show_list:k=!1,value:w,...T}=e,E=i.useRef(null),S=i.useRef(null),I=i.useRef(null),A=i.useRef(null),[R,L]=i.useState(!1),[O,M]=i.useState(""),[D,Z]=i.useState(-1),[F,z]=i.useState(p),[P,B]=i.useState({});nl(j&&R?A:void 0);let X=null;i.useEffect(()=>{if(c){let e=[];if(z(e=h?"function"==typeof g?g(w.toLowerCase(),p):nx(w.toLowerCase(),p):p),u){let t=e.findIndex(e=>("object"==typeof e?e.text:e)===u);M(u),Z(t)}else M(""),Z(-1)}},[p,c,u]),i.useEffect(()=>{h&&Z(F.findIndex(e=>("object"==typeof e?e.text:e)===u))},[F]),i.useEffect(()=>{if(k&&G(),_&&Y(),R&&I.current){var e;let t=I.current.offsetTop;null==(e=E.current)||e.scrollTo({top:t,behavior:"smooth"})}},[k,_,R,I]),i.useEffect(()=>{S.current&&j&&R&&B(ns({preferred_alignment:m?"top":"bottom",parent_el:A.current,child_el:S.current}).style)},[R,m,j,null==F?void 0:F.length]);let $=()=>{if(-1!==D){var e,t,a,s,n,l,i;let r=D-1;if(r<0){let a=null==(e=E.current)?void 0:e.clientHeight;Z(F.length-1),null==(t=E.current)||t.scrollTo({top:a,behavior:"smooth"})}else{let e=Number(null==(a=I.current)?void 0:a.getBoundingClientRect().height);if(!H(Math.floor(Number(null==(n=I.current)||null==(s=n.getBoundingClientRect())?void 0:s.top))-e)){let t=Number(null==(l=I.current)?void 0:l.offsetTop)-e;null==(i=E.current)||i.scrollTo({top:t,behavior:"smooth"})}Z(r)}}},H=e=>{var t,a,s;let n=Number(null==(t=E.current)?void 0:t.clientHeight),l=Math.floor(Number(null==(a=S.current)?void 0:a.getBoundingClientRect().top));return!(e>=Math.floor(Number(null==(s=S.current)?void 0:s.getBoundingClientRect().top))+n)&&e>l},V=()=>{if(-1!==D&&I.current){if("number"==typeof D){var e,t,a,s;let n=D+1;if(n>=F.length)Z(0),null==(e=E.current)||e.scrollTo({top:0,behavior:"smooth"});else{let e=I.current.getBoundingClientRect().height,l=Math.floor(I.current.getBoundingClientRect().top)+e+e/2,i=Number(null==(t=E.current)?void 0:t.clientHeight);if(!H(l)){let t=I.current.offsetTop-(i/e-2)*e;null==(s=E.current)||null==(a=s.scrollTo)||a.call(s,{top:t,behavior:"smooth"})}Z(n)}}}else Z(0)},q=e=>{e&&(M(("object"==typeof e?e.text:e)||""),null==y||y(e))},G=()=>{L(!0),null==N||N()},Y=()=>{L(!1),null==v||v()};return(0,l.jsxs)("div",{"data-testid":r,className:U()("dc-autocomplete",n),children:[(0,l.jsx)("div",{ref:A,className:"dc-autocomplete__input-field",children:(0,l.jsx)(eq,{...T,className:"dc-autocomplete__field",error:d,autoComplete:s,onKeyDown:e=>{switch(e.keyCode){case n_.ENTER:e.preventDefault(),Y(),q(F[D]);break;case n_.TAB:R&&(Y(),q(F[D]));break;case n_.ESCAPE:e.preventDefault(),Y();break;case n_.KEYDOWN:R||G(),V();break;case n_.KEYUP:R?$():G();break;default:R||G()}},onInput:e=>{let t=e.target.value.toLowerCase(),a=[];(a="function"==typeof g?g(t,p):nx(t,p,C)).length||M(""),z(a)},input_id:x,onClick:()=>{R?Y():G()},onBlur:e=>{e.preventDefault(),Y(),h||z(p),""===O&&(null==y||y({text:b,value:""})),"function"==typeof T.onBlur&&T.onBlur(e)},value:"function"==typeof y?w:O,trailing_icon:T.trailing_icon?T.trailing_icon:(0,l.jsx)(ni.Z,{className:(0,s6.Z)("dc-autocomplete__trailing-icon",{"dc-autocomplete__trailing-icon--opened":R,"dc-autocomplete__trailing-icon--disabled":T.disabled}),height:"24px",width:"24px"})})}),(0,l.jsx)(nc,{dropdown_refs:{dropdown_ref:E,list_item_ref:I,list_wrapper_ref:S},active_index:D,style:{width:A.current?`${A.current.offsetWidth}px`:"100%",...P||{marginTop:o?`calc(-${o} + 8px)`:"8px"}},is_visible:R||h,list_items:F,list_height:T.list_height,onItemSelection:q,setActiveIndex:Z,onScrollStop:e=>{if(!f)return;let a=e.currentTarget;a.scrollTop==a.scrollTop&&clearTimeout(t),t=setTimeout(()=>{null==f||f()},150)},not_found_text:b,portal_id:j})]})});nm.displayName="Autocomplete";let nh=["ACCUMULATORS_MARTINGALE","ACCUMULATORS_DALEMBERT","ACCUMULATORS_MARTINGALE_ON_STAT_RESET","ACCUMULATORS_DALEMBERT_ON_STAT_RESET","ACCUMULATORS_REVERSE_MARTINGALE","ACCUMULATORS_REVERSE_MARTINGALE_ON_STAT_RESET","ACCUMULATORS_REVERSE_DALEMBERT","ACCUMULATORS_REVERSE_DALEMBERT_ON_STAT_RESET"],np=e=>{let{symbol:t}=e;return(0,l.jsxs)("div",{className:"qs__select__option",children:[(0,l.jsx)(X,{type:t.value,size:"sm"}),(0,l.jsx)(ea.Z,{className:"qs__select__option__text",size:"xs",color:"prominent",children:t.text})]},t.value)},nj=()=>{let{quick_strategy:e}=(0,j.oR)(),{isDesktop:t}=(0,N.F)(),{setValue:a,selected_strategy:s}=e,[n,r]=i.useState([]),[o,d]=(0,i.useState)(!1),[c,_]=(0,i.useState)({text:"",value:""}),[u,x]=(0,i.useState)({text:"",value:""}),{setFieldValue:m,values:h}=(0,eD.u6)(),p=nh.includes(s),b=(0,i.useMemo)(()=>n.map(e=>({component:(0,l.jsx)(np,{symbol:e},e.text),...e})).filter(e=>{var t;return!p||(null==e||null==(t=e.group)?void 0:t.startsWith("Continuous Indices"))}),[n,p]);(0,i.useEffect)(()=>{var e,t,s;let{active_symbols:n}=(null===z.ApiHelpers||void 0===z.ApiHelpers?void 0:z.ApiHelpers.instance)??{},l=null==n||null==(e=n.getSymbolsForBot)?void 0:e.call(n);r(l),(null==l?void 0:l.find(e=>(null==e?void 0:e.value)===(null==h?void 0:h.symbol)))||(m("symbol",null==l||null==(t=l[0])?void 0:t.value),a("symbol",null==l||null==(s=l[0])?void 0:s.value))},[]),(0,i.useEffect)(()=>{let e=b.find(e=>e.value===h.symbol);e&&_({text:e.text,value:e.value})},[b,h.symbol,_]);let v=()=>{t&&!o&&d(!0)},y=e=>{_({...c,text:e.target.value})},g=e=>{if(null==e?void 0:e.value){let{value:t}=e;m("symbol",t),a("symbol",t),d(!1)}},f=()=>{if(t){let e=b.find(e=>e.value===h.symbol);e&&e.text!==c.text&&(_({text:e.text,value:e.value}),x({text:e.text,value:e.value}),d(!1)),e||(_({text:u.text,value:u.value}),d(!1))}};return(0,l.jsx)("div",{className:"qs__form__field qs__form__field__input",children:(0,l.jsx)(eD.gN,{name:"symbol",id:"asset",children:e=>{let{field:{...a}}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(nm,{...a,readOnly:!t,inputMode:"none","data-testid":"dt_qs_symbol",autoComplete:"off",className:"qs__autocomplete",value:c.text,list_items:b,onItemSelection:g,onChange:y,onFocus:v,onHideDropdownList:f,leading_icon:(0,l.jsx)(X,{type:c.value,size:"sm"})})})}},"asset")})},nb=e=>{let{trade_type:{value:t,icon:a,text:s}}=e;return(0,l.jsxs)("div",{className:"qs__select__option",children:[(null==a?void 0:a.length)?a.map((e,t)=>(0,l.jsx)(V,{type:e,className:"qs__select__option__icon",size:"sm"},`${e}id-${t}`)):null,(0,l.jsx)(ea.Z,{className:"qs__select__option__text",size:"xs",color:"prominent",children:s})]},t)},nv=()=>{let[e,t]=i.useState([]),{setFieldValue:a,values:s,validateForm:n}=(0,eD.u6)(),{quick_strategy:r}=(0,j.oR)(),{setValue:o,selected_strategy:d}=r,c=nh.includes(d);i.useEffect(()=>{if(null==s?void 0:s.symbol){let e=null==s?void 0:s.tradetype,l=c?"ACCU":"",{contracts_for:i}=(null===z.ApiHelpers||void 0===z.ApiHelpers?void 0:z.ApiHelpers.instance)??{};(async()=>{var n,r;let d=await (null==i||null==(n=i.getTradeTypesForQuickStrategy)?void 0:n.call(i,null==s?void 0:s.symbol,l));(null==d?void 0:d.some(t=>t.value===e))||(null==d||null==(r=d[0])?void 0:r.value)===e||(null==a||a("tradetype",(null==d?void 0:d[0].value)||""),o("tradetype",null==d?void 0:d[0].value)),t(d)})(),n()}},[null==s?void 0:s.symbol]);let _=i.useMemo(()=>e.map(e=>({component:(0,l.jsx)(nb,{trade_type:e},e.text),...e})),[e]);return(0,l.jsx)("div",{className:"qs__form__field qs__form__field__input qs__form__field__group-icons",children:(0,l.jsx)(eD.gN,{name:"tradetype",id:"tradetype",children:e=>{var t,s;let{field:n}=e,i=null==_?void 0:_.find(e=>e.value===n.value),r=c?"Buy":null==i?void 0:i.text;return(0,l.jsx)(nm,{...n,readOnly:!0,inputMode:"none","data-testid":"dt_qs_tradetype",autoComplete:"off",className:"qs__autocomplete",value:r||"",list_items:_,onItemSelection:e=>{let t=null==e?void 0:e.value,s=null==e?void 0:e.text;t&&s&&(null==a||a("tradetype",t),o("tradetype",t))},leading_icon:(0,l.jsxs)(ea.Z,{children:[(0,l.jsx)(V,{type:(null==i||null==(t=i.icon)?void 0:t[0])||"CALL",size:"sm"}),(0,l.jsx)(V,{type:(null==i||null==(s=i.icon)?void 0:s[1])||"PUT",size:"sm"})]})})}},"tradetype")})},ny=(0,r.Pi)(e=>{let{name:t}=e,{isDesktop:a}=(0,N.F)(),[s,n]=i.useState([]),{quick_strategy:r}=(0,j.oR)(),{setValue:o}=r,{setFieldValue:d,values:c}=(0,eD.u6)(),{symbol:_,tradetype:u}=c;i.useEffect(()=>{if(u&&_){let e=null==c?void 0:c.type;(async()=>{var a,s,l;let{contracts_for:i}=(null===z.ApiHelpers||void 0===z.ApiHelpers?void 0:z.ApiHelpers.instance)??{},r=await (null==i||null==(a=i.getContractTypes)?void 0:a.call(i,u));n(r),(null==r?void 0:r.some(t=>t.value===e))||(null==d||d(t,null==r||null==(s=r[0])?void 0:s.value),o(t,null==r||null==(l=r[0])?void 0:l.value))})()}},[_,u]);let x=e=>{null==d||d(t,e),o(t,e)},m=`qs-contract-type-${t}`;return(0,l.jsx)("div",{className:"qs__form__field qs__form__field__input no-top-spacing",children:(0,l.jsx)(eD.gN,{name:t,id:m,children:e=>{let{field:t}=e,n=null==s?void 0:s.find(e=>(null==e?void 0:e.value)===(null==t?void 0:t.value));return a?(0,l.jsx)(nm,{...t,readOnly:!0,inputMode:"none","data-testid":"dt_qs_contract_type",autoComplete:"off",className:"qs__select contract-type",value:(null==n?void 0:n.text)||"",list_items:s,onItemSelection:e=>{let{value:t}=e;t&&x(t)}}):(0,l.jsx)("ul",{className:"qs__form__field__list","data-testid":"dt_qs_contract_types",children:s.map(e=>{let t=(null==n?void 0:n.value)===(null==e?void 0:e.value);return(0,l.jsx)("li",{className:U()("qs__form__field__list__item",{"qs__form__field__list__item--active":t}),onClick:()=>{x(null==e?void 0:e.value)},children:(0,l.jsx)(ea.Z,{size:"xs",color:"prominent",weight:t?"bold ":"normal",children:null==e?void 0:e.text})},null==e?void 0:e.value)})})}},m)})}),ng=e=>{let{attached:t}=e,[a,s]=i.useState([]),[n,r]=i.useState(""),[o,d]=i.useState(""),{quick_strategy:c}=(0,j.oR)(),{setValue:_,setCurrentDurationMinMax:u,current_duration_min_max:x}=c,{setFieldValue:m,validateForm:h,values:p}=(0,eD.u6)(),{symbol:b,tradetype:v}=p;return i.useEffect(()=>{v&&b&&(async()=>{var e,t,a,l,i,c;let{contracts_for:x}=(null===z.ApiHelpers||void 0===z.ApiHelpers?void 0:z.ApiHelpers.instance)??{},h=await (null==x||null==(e=x.getDurations)?void 0:e.call(x,b,v)),j=null==h?void 0:h.map(e=>({text:e.display??"",value:e.unit??"",min:e.min,max:e.max}));s(j);let y=null==p?void 0:p.durationtype;if((null==j?void 0:j.some(e=>e.value===y))&&n===b&&o===v){let e=null==j?void 0:j.find(e=>e.value===y);u(null==e?void 0:e.min,null==e?void 0:e.max)}else u(null==h||null==(t=h[0])?void 0:t.min,null==h||null==(a=h[0])?void 0:a.max),null==m||m("durationtype",null==h||null==(l=h[0])?void 0:l.unit,!0),null==m||m("duration",null==h||null==(i=h[0])?void 0:i.min,!0),_("durationtype",(null==h||null==(c=h[0])?void 0:c.unit)??"");r(b),d(v)})()},[b,v]),(0,i.useEffect)(()=>{h()},[x,h]),(0,l.jsx)("div",{className:U()("qs__form__field qs__form__field__input",{"no-top-border-radius":t}),children:(0,l.jsx)(eD.gN,{name:"durationtype",id:"durationtype",children:e=>{let{field:t}=e,s=null==a?void 0:a.find(e=>e.value===t.value);return(0,l.jsx)(nm,{...t,readOnly:!0,inputMode:"none","data-testid":"dt_qs_durationtype",autoComplete:"off",className:"qs__select",value:(null==s?void 0:s.text)||"",list_items:a,onItemSelection:e=>{let{value:t,min:a,max:s}=e;t&&(u(a,s),null==m||m("durationtype",t),_("durationtype",t),null==m||m("duration",a).then(()=>{h()}),_("duration",a))}})}},"durationtype")})},nf=(0,r.Pi)(e=>{let{name:t,onChange:a,type:s="text",attached:n=!1,disabled:r=!1,min:o,max:d,has_currency_unit:c=!1}=e,{client:{currency:_}}=(0,j.oR)(),{quick_strategy:u}=(0,j.oR)(),{loss_threshold_warning_data:x}=u,[,m]=i.useState(!1),[h,p]=i.useState(null),{setFieldValue:b,setFieldTouched:v,values:y}=(0,eD.u6)(),g="number"===s;(0,i.useEffect)(()=>{if("max_stake"===t&&y.stake&&y.max_stake){let t=parseFloat(Number(y.stake).toFixed(2)),s=parseFloat(Number(y.max_stake).toFixed(2));if(console.log(`useEffect max_stake comparing: initial_stake=${t}, max_stake=${s}`),t>s){p("Initial stake cannot be greater than max stake");let t=document.querySelector('input[name="max_stake"]');if(t){var e,a;null==(e=t.closest(".qs__input"))||e.classList.add("error");let s=null==(a=t.closest(".qs__form__field__input"))?void 0:a.querySelector(".qs__warning-bubble");s&&s.setAttribute("data-show","true")}}else p(null)}if("stake"===t&&y.stake&&y.max_stake){let e=parseFloat(Number(y.stake).toFixed(2)),t=parseFloat(Number(y.max_stake).toFixed(2));if(console.log(`useEffect stake comparing: initial_stake=${e}, max_stake=${t}`),e>t){let e=document.querySelector('input[name="max_stake"]');if(e){let t=e.closest(".qs__input");t&&t.classList.add("error");let a=document.querySelector('[data-testid="max_stake-popover"]');if(a){a.setAttribute("data-force-show","true");let e=a.querySelector(".qs__warning-bubble div");e&&(e.textContent="Initial stake cannot be greater than max stake");let t=a.querySelector(".qs__warning-bubble");t&&(t.style.display="block",t.style.opacity="1",t.style.visibility="visible",t.style.position="absolute",t.style.zIndex="9999")}b("max_stake",y.max_stake),v("max_stake",!0,!0);let s="Initial stake cannot be greater than max stake";document.querySelectorAll('input[name="max_stake"]').forEach(e=>{e.setAttribute("data-has-error","true"),e.setAttribute("data-error-message",s);let t=new Event("blur",{bubbles:!0});e.dispatchEvent(t);let a=new Event("keyup",{bubbles:!0});e.dispatchEvent(a);let n=new CustomEvent("qs-error",{detail:{message:s},bubbles:!0});e.dispatchEvent(n)})}}}},[t,y.stake,y.max_stake]);let f=(e,s)=>{var n,l,i;if(null==e||e.preventDefault(),("tick_count"===t||"duration"===t&&(null==(n=u.form_data)?void 0:n.durationtype)==="t")&&(s=String(Math.floor(Number(s)))),"stake"===t){let e=(null==u||null==(l=u.additional_data)?void 0:l.min_stake)||.35,t=(null==u||null==(i=u.additional_data)?void 0:i.max_stake)||1e3;Number(s)<e?s=String(e):Number(s)>t&&(s=String(t))}a(t,s),v(t,!0,!0),b(t,s)},N=e=>{var s,n,l,i,r,o;let d=e.target.value,c=0;if(p(null),""===d||"0"===d||"0."===d){if(a(t,d),"stake"===t||"max_stake"===t){let e=(null==u||null==(n=u.additional_data)?void 0:n.min_stake)||.35;p(`Minimum stake allowed is ${e}`)}return}if(d.length>=12?(c=d.slice(0,12),c=g?Number(c):c):c=g?Number(d):d,g&&("tick_count"===t||"duration"===t&&(null==(s=u.form_data)?void 0:s.durationtype)==="t")&&!Number.isInteger(c)&&(c=Math.floor(Number(c))),g&&"number"==typeof c&&c<1&&!Number.isInteger(c)&&(c=1),"stake"===t&&g){let e=(null==u||null==(l=u.additional_data)?void 0:l.min_stake)||.35,t=(null==u||null==(i=u.additional_data)?void 0:i.max_stake)||1e3,a=Number(c);a>=e&&a<=t?p(null):a<e?p(`Minimum stake allowed is ${e}`):a>t&&p(`Maximum stake allowed is ${t}`)}if("max_stake"===t&&g){let e=(null==u||null==(r=u.additional_data)?void 0:r.min_stake)||.35,t=(null==u||null==(o=u.additional_data)?void 0:o.max_stake)||1e3,a=Number(c);a>=e&&a<=t?p(null):a<e?p(`Minimum stake allowed is ${e}`):a>t&&p(`Maximum stake allowed is ${t}`);let s=y.stake;s&&Number(s)>a&&p("Initial stake cannot be greater than max stake")}a(t,c)};return(0,l.jsx)(eD.gN,{name:t,id:t,children:e=>{var a,i,j,C,k;let{field:w,meta:T}=e,{error:E}=T;return(0,l.jsx)("div",{className:U()("qs__form__field qs__form__field__input",{"no-top-spacing":n,"no-border-top":n}),children:(0,l.jsx)("div",{"data-testid":"qs-input-container",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:(0,l.jsx)($.Z,{alignment:"bottom",message:E||h,is_open:!!(E||h)&&("stake"===t||"max_stake"===t||"loss"===t||"profit"===t||"take_profit"===t||"tick_count"===t||"size"===t),zIndex:"9999",classNameBubble:"qs__warning-bubble",has_error:!0,should_disable_pointer_events:!0,"data-testid":`${t}-popover`,children:(0,l.jsx)(eq,{data_testId:"qs-input",className:U()("qs__input",{error:(E||!!h)&&("stake"===t||"max_stake"===t||"loss"===t||"profit"===t||"take_profit"===t||"tick_count"===t)},{highlight:null==x||null==(a=x.highlight_field)?void 0:a.includes(t)}),type:s,leading_icon:g?(0,l.jsx)("button",{disabled:r||!!o&&Number(w.value)===o||"stake"===t&&Number(w.value)<=((null==u||null==(i=u.additional_data)?void 0:i.min_stake)||.35)||1>=Number(w.value),"data-testid":"qs-input-decrease",onClick:e=>{var a;let s=(null==u||null==(a=u.additional_data)?void 0:a.min_stake)||.35,n=Number(w.value),l="stake"===t?s:o||1;if(n>1){let t=n-1;f(e,String(t%1?t.toFixed(2):t));return}if(n<=1&&n>l)return void f(e,String(l));if(n<=l)return},children:"-"}):void 0,trailing_icon:g?(0,l.jsx)("button",{disabled:r||0xe8d4a50fff==w.value||!!d&&w.value>=d,"data-testid":"qs-input-increase",onClick:e=>{let t=Number(w.value)+1;f(e,String(t%1?t.toFixed(2):t))},children:"+"}):null,...w,disabled:r,onChange:e=>N(e),onBlur:e=>{if("stake"===t||"max_stake"===t){var a,s;let n=(null==u||null==(a=u.additional_data)?void 0:a.min_stake)||.35,l=(null==u||null==(s=u.additional_data)?void 0:s.max_stake)||1e3,i=e.target.value;if(""===i||"0"===i||"0."===i)p(`Minimum stake allowed is ${n}`);else{let e=Number(i);if(e<1&&!Number.isInteger(e))return void b(t,1);e<n?p(`Minimum stake allowed is ${n}`):e>l?p(`Maximum stake allowed is ${l}`):p(null)}if("stake"===t){let e=y.max_stake,t=parseFloat(Number(i).toFixed(2)),a=e?parseFloat(Number(e).toFixed(2)):0;if(e&&a<t){let t=document.querySelector('input[name="max_stake"]');if(t){b("max_stake",e),v("max_stake",!0,!0);let a=new Event("blur",{bubbles:!0});t.dispatchEvent(a);let s=new Event("keyup",{bubbles:!0});t.dispatchEvent(s)}}else if(e){let e=document.querySelector('input[name="max_stake"]');if(e){let t=new Event("keyup",{bubbles:!0});e.dispatchEvent(t)}}}else if("max_stake"===t){let e=y.stake,t=parseFloat(Number(i).toFixed(2)),a=e?parseFloat(Number(e).toFixed(2)):0;e&&a>t?p("Initial stake cannot be greater than max stake"):p(null)}}},placeholder:c?"0.00":"",bottom_label:c?_:"",max_characters:2,maxLength:2,inputMode:"tick_count"===t||"duration"===t&&(null==(j=u.form_data)?void 0:j.durationtype)==="t"?"numeric":void 0,pattern:"tick_count"===t||"duration"===t&&(null==(C=u.form_data)?void 0:C.durationtype)==="t"?"[0-9]*":void 0,onKeyPress:"tick_count"===t||"duration"===t&&(null==(k=u.form_data)?void 0:k.durationtype)==="t"?e=>{"."===e.key&&e.preventDefault()}:void 0,onKeyUp:e=>{if("stake"===t||"max_stake"===t){var a,s;let n=(null==u||null==(a=u.additional_data)?void 0:a.min_stake)||.35,l=(null==u||null==(s=u.additional_data)?void 0:s.max_stake)||1e3,i=e.currentTarget.value;if(""===i||"0"===i||"0."===i)return void p(`Minimum stake allowed is ${n}`);let r=Number(i);if(r<1&&!Number.isInteger(r))return void b(t,1);if(r>=n&&r<=l)return void p(null);if(r<n?p(`Minimum stake allowed is ${n}`):r>l&&p(`Maximum stake allowed is ${l}`),"stake"===t){let e=y.max_stake,t=parseFloat(Number(i).toFixed(2)),a=e?parseFloat(Number(e).toFixed(2)):0;if(e&&a<t){let t=document.querySelector('input[name="max_stake"]');if(t){b("max_stake",e),v("max_stake",!0,!0);let a=new Event("blur",{bubbles:!0});t.dispatchEvent(a);let s=new Event("keyup",{bubbles:!0});t.dispatchEvent(s)}}else if(e){let e=document.querySelector('input[name="max_stake"]');if(e){let t=new Event("keyup",{bubbles:!0});e.dispatchEvent(t)}}}else if("max_stake"===t){let e=y.stake,t=parseFloat(Number(i).toFixed(2)),a=e?parseFloat(Number(e).toFixed(2)):0;e&&a>t?p("Initial stake cannot be greater than max stake"):p(null)}}}})})})})}},t)}),nN=e=>{let{className:t,classNameButton:a,classNameLabel:s,handleToggle:n,id:r,is_enabled:o,name:d="toggle_switch"}=e;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("input",{"aria-label":d,className:U()("dc-toggle-switch",t),id:r,type:"checkbox",checked:o,onChange:n}),(0,l.jsx)("label",{className:U()("dc-toggle-switch__label",s),htmlFor:r,children:(0,l.jsx)("span",{className:U()("dc-toggle-switch__button",a)})})]})},nC=e=>{let{name:t,label:a,description:s,attached:n=!1,isEnabledToggleSwitch:i,setIsEnabledToggleSwitch:r}=e,{values:o,setFieldValue:d}=(0,eD.u6)(),c=async()=>{r(),await d(t,!(null==o?void 0:o[t]),!0),await d("max_stake",null==o?void 0:o.max_stake,!0)};return(0,l.jsx)(eD.gN,{name:t,children:()=>(0,l.jsx)("div",{className:U()("qs__form__field qs__form__field__input",{"no-border-bottom-radius":n}),children:(0,l.jsx)("div",{className:"qs__checkbox",children:(0,l.jsxs)("div",{className:"qs__checkbox__container",children:[(0,l.jsxs)("label",{className:"dc-checkbox",children:[(0,l.jsx)(ea.Z,{size:"xs",className:"dc-checkbox__label",children:a}),(0,l.jsx)(ea.Z,{size:"xs",children:(0,f.NC)("(optional)")})]}),(0,l.jsx)("span",{children:(0,l.jsx)($.Z,{classNameTargetIcon:"qs__checkbox__info",message:s,zIndex:"9999",alignment:"top",icon:"info"})}),(0,l.jsx)(nN,{id:"dt_mobile_drawer_theme_toggler",handleToggle:c,is_enabled:i,"data-testid":"qs-toggle-switch"})]})})})})},nk=e=>{let t,{label:a,description:s,additional_data:n}=e;return t="function"==typeof s?s(n):s,(0,l.jsx)("div",{className:"qs__form__field",children:(0,l.jsxs)("div",{className:"qs__input-label",children:[(0,l.jsx)(ea.Z,{weight:"bold",className:"qs__input-label__wrapper",size:"xs",children:a}),(0,l.jsx)("span",{children:(0,l.jsx)($.Z,{message:t,zIndex:"9999",alignment:"top",icon:"info"})})]})})};var nw=a(73628);let nT=(0,r.Pi)(e=>{let{name:t}=e,{ui:a,client:s}=(0,j.oR)(),{is_desktop:n}=a,[r,o]=i.useState([]),{quick_strategy:d}=(0,j.oR)(),{setValue:c,setAdditionalData:_}=d,{setFieldValue:u,values:x,setFieldError:m,errors:h}=(0,eD.u6)(),p=i.useRef(null),b=i.useRef(null),v=i.useRef({tick_count:null,take_profit:null});i.useEffect(()=>{o([{text:"1%",value:"0.01"},{text:"2%",value:"0.02"},{text:"3%",value:"0.03"},{text:"4%",value:"0.04"},{text:"5%",value:"0.05"}]),null==u||u("tradetype","accumulator"),c("tradetype","accumulator")},[]),i.useEffect(()=>{var e,t;x.boolean_tick_count?(u("take_profit",0),m("tick_count",(null==(e=v.current)?void 0:e.tick_count)??void 0),m("take_profit",void 0)):(u("tick_count",0),m("take_profit",(null==(t=v.current)?void 0:t.take_profit)??void 0),m("tick_count",void 0))},[x,h.take_profit,h.tick_count,x.boolean_tick_count,u,m]);let y=async e=>{var t,a,n,l,i,r,o,c,x,h,j,y,g,N,C,k,w,T;let E=Number(e.growth_rate),S=Number(e.stake),I=Number(e.take_profit),A={amount:S,currency:null==s?void 0:s.currency,growth_rate:E,symbol:e.symbol,limit_order:{...!e.boolean_tick_count&&{take_profit:I}}};p.current={...A,boolean_tick_count:e.boolean_tick_count};try{let s=await (0,nw.QT)(A,z.api_base.api),d=null==s||null==(a=s.proposal)||null==(t=a.validation_params)?void 0:t.max_ticks,u=null==s||null==(l=s.proposal)||null==(n=l.contract_details)?void 0:n.maximum_stake,x=null==s||null==(r=s.proposal)||null==(i=r.contract_details)?void 0:i.minimum_stake,h="",p="";_({max_payout:b.current,max_ticks:d,max_stake:Number(u)||1e3,min_stake:Number(x)||1}),b.current=null==s||null==(c=s.proposal)||null==(o=c.validation_params)?void 0:o.max_payout;let j=Number(e.tick_count);!isNaN(j)&&j>d?(p=`Maximum tick count is: ${d}`,m("tick_count",p),v.current.tick_count=p):!isNaN(j)&&j<1?(h="Minimum tick count is: 1",m("tick_count",h),v.current.tick_count=h):(v.current.tick_count=null,m("tick_count",void 0)),v.current.take_profit=null}catch(a){let t=(null==a?void 0:a.message)??(null==a||null==(x=a.error)?void 0:x.message);if(e.boolean_tick_count){t.includes("Please enter a stake amount that's at least")?t=(0,f.NC)("Minimum tick count allowed is 1"):t.includes("Maximum stake allowed is")&&(t=(0,f.NC)("Maximum tick count allowed is 1000")),m("tick_count",t),v.current.tick_count=t;let a=Number(e.tick_count);a>1e3?u("tick_count",1e3):a<1&&u("tick_count",1)}else if((null==a||null==(j=a.error)||null==(h=j.details)?void 0:h.field)==="take_profit"&&(t=0===Number(e.take_profit)?null==a||null==(N=a.error)?void 0:N.message:`Your total payout is ${Number(e.take_profit)+Number(e.stake)}. Enter amount less than ${b.current} ${(0,f.NC)("By changing your initial stake and/or take profit.")}`),(null==a||null==(g=a.error)||null==(y=g.details)?void 0:y.field)==="stake"){let s=null==a||null==(C=a.error)?void 0:C.message.match(/minimum stake of (\d+\.\d+)/i),n=null==a||null==(k=a.error)?void 0:k.message.match(/maximum payout of (\d+\.\d+)/i);if(s&&n){let a=s[1],l=n[1],i=Number(e.take_profit)+Number(e.stake);t=(0,f.NC)(`Minimum stake of ${a} and maximum payout of ${l}. Current payout is ${i.toFixed(2)}.`)}else if(t.includes("Maximum stake allowed is")){let e=(null==d||null==(w=d.additional_data)?void 0:w.max_stake)||"1000";t=(0,f.NC)(`Maximum stake allowed is ${e}`)}else t=`${null==a||null==(T=a.error)?void 0:T.message}`;m("stake",t)}else m("take_profit",t),v.current.take_profit=t}},g=i.useCallback(E()(y,500,{trailing:!0,leading:!1}),[]);i.useEffect(()=>{var e,t,a,n,l,i,r;((null==(e=p.current)?void 0:e.symbol)!==x.symbol||(null==(t=p.current)?void 0:t.amount)!==x.stake||(null==(n=p.current)||null==(a=n.limit_order)?void 0:a.take_profit)!==x.take_profit||(null==(l=p.current)?void 0:l.currency)!==(null==s?void 0:s.currency)||(null==(i=p.current)?void 0:i.growth_rate)!==x.growth_rate||(null==(r=p.current)?void 0:r.boolean_tick_count)!==x.boolean_tick_count)&&g(x)},[x.take_profit,x.tick_count,x.stake,x.growth_rate,null==s?void 0:s.currency,x.boolean_tick_count,x,g]);let N=async e=>{null==u||u(t,e),c(t,e)},C=`qs-contract-type-${t}`;return(0,l.jsx)("div",{className:"qs__form__field qs__form__field__input no-top-spacing",children:(0,l.jsx)(eD.gN,{name:t,id:C,children:e=>{let{field:t}=e,a=null==r?void 0:r.find(e=>(null==e?void 0:e.value)===(null==t?void 0:t.value));return n?(0,l.jsx)(nm,{...t,readOnly:!0,inputMode:"none","data-testid":"dt_qs_contract_type",autoComplete:"off",className:"qs__select contract-type",value:(null==a?void 0:a.text)||"",list_items:r,onItemSelection:e=>{let{value:t}=e;t&&N(t)}}):(0,l.jsx)("ul",{className:"qs__form__field__list","data-testid":"dt_qs_contract_types",children:r.map(e=>{let t=(null==a?void 0:a.value)===(null==e?void 0:e.value);return(0,l.jsx)("li",{className:U()("qs__form__field__list__item",{"qs__form__field__list__item--active":t}),onClick:()=>{N(null==e?void 0:e.value)},onChange:()=>{N(null==e?void 0:e.value)},children:(0,l.jsx)(ea.Z,{size:"xs",color:"prominent",weight:t?"bold ":"normal",children:null==e?void 0:e.text})},null==e?void 0:e.value)})})}},C)})}),nE=[{text:"Take Profit",value:"take_profit"},{text:"Tick Count",value:"tick_count"}],nS=e=>{let{attached:t}=e,{quick_strategy:a}=(0,j.oR)(),{setValue:s}=a,{setFieldValue:n,values:r}=(0,eD.u6)(),[o,d]=(0,i.useState)(r.boolean_tick_count?nE[1]:nE[0]),c=e=>{if(null==e?void 0:e.value){let{value:t}=e,a="take_profit"===t;s("boolean_tick_count",!a),null==n||n("boolean_tick_count",!a),d({...o,text:a?"Take Profit":"Tick Count"})}};return(0,l.jsx)("div",{className:U()("qs__form__field qs__form__field__input",{"no-top-border-radius":t}),children:(0,l.jsx)(eD.gN,{name:"sell_conditions",id:"sell_conditions",children:e=>{let{field:t}=e;return(0,l.jsx)(nm,{...t,readOnly:!0,inputMode:"none","data-testid":"dt_qs_sell_conditions",autoComplete:"off",className:"qs__select",value:o.text,list_items:nE,onItemSelection:c})}},"sell_conditions")})},nI=(0,r.Pi)(()=>{var e;let{quick_strategy:t}=(0,j.oR)(),{selected_strategy:a,setValue:s,form_data:n}=t,r=null==(e=(0,sz.j)()[a])?void 0:e.fields,{isDesktop:o}=(0,N.F)(),{values:d,setFieldTouched:c,setFieldValue:_}=(0,eD.u6)(),{current_duration_min_max:u,additional_data:x}=t,[m,h]=i.useState((null==d?void 0:d.boolean_max_stake)??!1);i.useEffect(()=>{window.addEventListener("keydown",b);let e=null;try{e=JSON.parse(localStorage.getItem("qs-fields")??"{}")}catch{e=null}return h(!!(null==e?void 0:e.boolean_max_stake)),()=>{window.removeEventListener("keydown",b)}},[]),i.useEffect(()=>{(null==d?void 0:d.boolean_max_stake)!==void 0&&h(!!d.boolean_max_stake)},[null==d?void 0:d.boolean_max_stake]),i.useEffect(()=>{!m&&(null==d?void 0:d.max_stake)&&_("max_stake",0)},[m,null==d?void 0:d.max_stake]);let p=async(e,t)=>{if(s(e,t),await c(e,!0,!0),await _(e,t,!0),"stake"===e||"max_stake"===e){if(c("stake",!0,!0),c("max_stake",!0,!0),"stake"===e){let e=document.querySelectorAll('input[name="max_stake"]');if(e.length>0){let t=new Event("keyup",{bubbles:!0});e[0].dispatchEvent(t)}}else if("max_stake"===e){let e=document.querySelectorAll('input[name="stake"]');if(e.length>0){let t=new Event("keyup",{bubbles:!0});e[0].dispatchEvent(t)}}}},b=e=>{(null==e?void 0:e.key)&&"Enter"==e.key&&(e.preventDefault(),e.stopPropagation())},v=e=>e.every(e=>{var t;let a=null==d||null==(t=d[e.key])?void 0:t.toString();return e.multiple?e.multiple.includes(a):d[e.key]===e.value}),y=()=>{h(e=>!e)};return(0,l.jsx)("div",{children:r.map((e,t)=>(null==e?void 0:e.length)?(0,l.jsx)("div",{className:"qs__body__content__form__group",children:e.map((e,t)=>{var a,s;let r=`${e.name||e.type} + ${t}`;if(!o&&(null==(a=e.hide)?void 0:a.includes("mobile"))||o&&(null==(s=e.hide)?void 0:s.includes("desktop")))return null;switch(e.type){case"number":{let t;if(!e.name)return null;let{should_have:a=[],hide_without_should_have:s=!1,has_currency_unit:l=!1}=e,d=v(a),c=1;"duration"===e.name&&u&&(c=u.min,t=u.max);let _=e.should_have;if(_&&"max_stake"===e.name&&isNaN(c=+(null==n?void 0:n.stake))&&(c=1),_&&"last_digit_prediction"===e.name&&((isNaN(+(null==n?void 0:n.last_digit_prediction))||1==+(null==n?void 0:n.last_digit_prediction))&&(c=0),+(null==n?void 0:n.last_digit_prediction)>0&&(c=+(null==n?void 0:n.last_digit_prediction)-1),t=9),null==a?void 0:a.length){if(!d&&(!o||s))return null;return(0,i.createElement)(nf,{...e,key:r,name:e.name,disabled:!d,onChange:p,min:c,max:t,has_currency_unit:l})}return(0,i.createElement)(nf,{...e,onChange:p,key:r,name:e.name,min:c,max:t,has_currency_unit:l})}case"label":{if(!e.label)return null;let{should_have:t=[],hide_without_should_have:a=!1}=e;if(!v(t)&&a)return null;return(0,l.jsx)(nk,{label:e.label,description:e.description?String(e.description):"",additional_data:x},r)}case"checkbox":return(0,l.jsx)(nC,{name:e.name,label:e.label,description:e.description?String(e.description):void 0,isEnabledToggleSwitch:!!m,setIsEnabledToggleSwitch:y},r);case"symbol":return(0,i.createElement)(nj,{...e,key:r});case"tradetype":return(0,i.createElement)(nv,{...e,key:r});case"durationtype":return(0,i.createElement)(ng,{...e,key:r});case"contract_type":return(0,i.createElement)(ny,{...e,key:r,name:e.name});case"growth_rate":return(0,i.createElement)(nT,{...e,key:r,name:e.name});case"sell_conditions":return(0,i.createElement)(nS,{...e,key:r});default:return null}})},t):null)})}),nA=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DEFAULT";return({DURATION:{MIN:(0,f.NC)("Minimum duration: {{ value }}",{value:t}),MAX:(0,f.NC)("Maximum duration: {{ value }}",{value:t})},LAST_DIGIT_PREDICTION:{MIN:(0,f.NC)("Enter a value from {{ value }} to 9.",{value:t}),MAX:(0,f.NC)("Enter a value from 0 to {{ value }}.",{value:t})},DEFAULT:{MIN:(0,f.NC)("The value must be equal or greater than {{ value }}",{value:t}),MAX:(0,f.NC)("The value must be equal or less than {{ value }}",{value:t})}})[a][e]},nR=(0,r.Pi)(e=>{var t;let{children:a}=e,{quick_strategy:s}=(0,j.oR)(),{selected_strategy:n,form_data:r,initializeLossThresholdWarningData:o}=s,d=null==(t=(0,sz.j)()[n])?void 0:t.fields,[c,_]=(0,i.useState)(sU.Ry().shape({})),u=(0,i.useRef)(!0),x=null,m=()=>{let e=null;try{e=JSON.parse(localStorage.getItem("qs-fields")??"{}")}catch{e=null}return e};i.useEffect(()=>()=>{u.current=!1},[]),i.useEffect(()=>{o()},[]);let h=e=>{let t={};d.forEach(a=>{if(!(null==a?void 0:a.length))return null;a.forEach(a=>{var n,l;if((null==a||null==(n=a.validation)?void 0:n.length)&&(null==a?void 0:a.name)&&a.validation.includes("number")){let n=sU.Rx().typeError((0,f.NC)("Must be a number")),i=0,o=10,d=nA("MIN",0),c=nA("MAX",o),_="",{current_duration_min_max:u}=s;"duration"===a.name&&u&&(i=u.min,o=u.max,d=nA("MIN",i,"DURATION"),c=nA("MAX",o,"DURATION"));let m=!a.should_have||(null==(l=a.should_have)?void 0:l.every(t=>{var a;let s=null==e||null==(a=e[t.key])?void 0:a.toString();return t.multiple?t.multiple.includes(s):(null==e?void 0:e[t.key])===t.value}));m&&"max_stake"===a.name&&(isNaN(i=+(null==r?void 0:r.stake))&&(i=+((null==x?void 0:x.stake)??0)),d=nA("MIN",i)),m&&"last_digit_prediction"===a.name&&(i=0,c=nA("MAX",o=9,"LAST_DIGIT_PREDICTION"),_="Enter a value from 0 to 9."),m&&a.validation.forEach(e=>{if("string"==typeof e)switch(e){case"required":n=n.required((0,f.NC)("Field cannot be empty"));break;case"min":n=n.min(i,d);break;case"max":n=n.max(o,c);break;case"ceil":n=n.round("ceil");break;case"floor":n=n.round("floor");break;case"integer":n=n.integer(_)}else if("object"==typeof e&&(null==e?void 0:e.type)){let t=e.getDynamicValue?e.getDynamicValue(s):e.value;n=n[e.type](t,(0,f.NC)(e.getMessage(t)))}}),t[a.name]=n}})}),u.current&&_(sU.Ry().shape(t))};return(0,l.jsx)(eD.J9,{initialValues:(()=>{let e=m();return x={symbol:(null==e?void 0:e.symbol)??(0,z.config)().QUICK_STRATEGY.DEFAULT.symbol,tradetype:(null==e?void 0:e.tradetype)??"",type:(null==e?void 0:e.type)??"",durationtype:(null==e?void 0:e.durationtype)??(0,z.config)().QUICK_STRATEGY.DEFAULT.durationtype,duration:(null==e?void 0:e.duration)??"1",stake:(null==e?void 0:e.stake)??"1",loss:(null==e?void 0:e.loss)??"",profit:(null==e?void 0:e.profit)??"",size:(null==e?void 0:e.size)??String((0,z.config)().QUICK_STRATEGY.DEFAULT.size),unit:(null==e?void 0:e.unit)??String((0,z.config)().QUICK_STRATEGY.DEFAULT.unit),action:(null==e?void 0:e.action)??"RUN",max_stake:(null==e?void 0:e.max_stake)??10,boolean_max_stake:(null==e?void 0:e.boolean_max_stake)??!1,last_digit_prediction:(null==e?void 0:e.last_digit_prediction)??1,growth_rate:(null==e?void 0:e.growth_rate)??"0.01",tick_count:(null==e?void 0:e.tick_count)??0,take_profit:(null==e?void 0:e.take_profit)??0,boolean_tick_count:(null==e?void 0:e.boolean_tick_count)??!1,max_payout:(null==e?void 0:e.max_payout)??0,max_ticks:(null==e?void 0:e.max_ticks)??0}})(),validationSchema:c,onSubmit:e=>{var t;return h(e),null==(t=localStorage)||t.setItem("qs-fields",JSON.stringify(e)),e},validate:e=>h(e),validateOnChange:!1,children:a})}),nL=(0,r.Pi)(()=>{let{quick_strategy:e}=(0,j.oR)(),{isDesktop:t}=(0,N.F)(),{is_open:a,setFormVisibility:s,form_data:n,selected_strategy:r}=e,o=(0,i.useRef)(null),[d,c]=i.useState(sX.StrategySelect),[_,u]=i.useState("");i.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]);let x=()=>{var e,t,a;let s=(null==(a=o.current)||null==(t=a.querySelector(".active"))||null==(e=t.textContent)?void 0:e.toLowerCase())==="learn more"?"learn more":"trade parameters";(0,tQ._W)({subform_name:"quick_strategy",quick_strategy_tab:s,selected_strategy:r,form_values:n})},m=()=>{x(),s(!1)};return(0,l.jsx)(nR,{children:(0,l.jsxs)(eD.l0,{children:[(0,l.jsx)(s4,{}),t?(0,l.jsx)(C.Z,{className:"modal--strategy",is_open:a,width:"72rem",children:(0,l.jsx)(s3,{onClickClose:m,setCurrentStep:c,current_step:d,selected_trade_type:_,setSelectedTradeType:u,children:(0,l.jsx)(nI,{})})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(av,{is_modal_open:a,className:"quick-strategy__wrapper",header:(0,l.jsx)(ea.Z,{size:"xs",weight:"bold",children:(0,f.NC)(`Step ${d===sX.StrategyCompleted?2:1}/2: Choose your strategy`)}),onClickClose:m,height_offset:"8rem",children:(0,l.jsx)(s7,{setCurrentStep:c,current_step:d,selected_trade_type:_,setSelectedTradeType:u,children:(0,l.jsx)(nI,{})})}),(0,l.jsx)(s9,{setCurrentStep:c,current_step:d})]})]})})});var nO=a(66311),nM=a(2912),nD=a(27086),nU=a(35651);let nZ=(0,r.Pi)(e=>{let{block_node:t,should_hide_display_name:a}=e,{flyout:s}=(0,j.oR)(),{initBlockWorkspace:n}=s,r=i.useRef();return i.useEffect(()=>{n(r,t)},[]),(0,l.jsx)("div",{ref:e=>r=e,className:U()({"flyout__block-workspace--center":a,"flyout__block-workspace--top":!a}),"data-testid":"flyout-block-workspace"})}),nF=e=>{let{onInfoClick:t,block_node:a,is_active:s,should_hide_display_name:n}=e,i=a.getAttribute("type")||"",r=window.Blockly.Blocks[i].meta(),o="variables_get"===i,d="variables_set"===i,{display_name:c,description:_}=r,u=()=>(0,l.jsx)("div",{className:"flyout__item-buttons",children:(0,l.jsx)(eA.Z,{id:`db-flyout__add--${i}`,"data-testid":`dt_flyout__add_${i}`,className:"flyout__button-add flyout__button-add--hide",has_effect:!0,is_plus:!0,onClick:()=>window.Blockly.derivWorkspace.addBlockNode(a),type:"button",children:(0,l.jsx)(nU.Z,{height:"24px",width:"24px",fill:"var(--text-general)"})})});return(0,l.jsxs)(l.Fragment,{children:[d&&(0,l.jsx)("div",{className:"flyout__hr"}),(0,l.jsxs)("div",{className:U()("flyout__item",{"flyout__item--active":s}),children:[!n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flyout__item-header",children:[(0,l.jsx)(ea.Z,{size:o?"xs":"xsm",lineHeight:o?void 0:"xl",weight:o?void 0:"bold",children:c}),!o&&(0,l.jsx)(u,{})]}),(0,l.jsxs)("div",{className:"flyout__item-description",children:[_,t&&(0,l.jsx)("a",{id:c.replace(/\s/gi,"-"),className:"flyout__item-info",onClick:t,children:(0,l.jsx)(f.Xx,{i18n_default_text:"Learn more"})})]})]}),(0,l.jsxs)("div",{className:"flyout__block-workspace__header",children:[(0,l.jsx)(nZ,{block_node:a,should_hide_display_name:!0}),o&&(0,l.jsx)(u,{})]})]})]})};var nz=a(43774);let nP=e=>{let{width:t,url:a}=e;return(0,l.jsx)("div",{className:"flyout__item","data-testid":"dt_flyout_image",children:(0,l.jsx)("img",{src:a,className:"flyout__image",style:{width:t}})})},nB=e=>{let{text:t}=e;return(0,l.jsx)(ea.Z,{as:"p",size:"xs",styles:{lineHeight:"1.3em"},children:t})},nX=e=>(0,l.jsx)("div",{className:"flyout__item","data-testid":"dt_flyout_video_container",children:(0,l.jsx)("iframe",{"data-testid":"dt_flyout_video",className:"flyout__video",src:e.url,frameBorder:"0",allow:"accelerometer; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,width:"100%"})}),n$=(0,r.Pi)(()=>{let{flyout:e,flyout_help:t}=(0,j.oR)(),{block_node:a,block_type:s,examples:n,help_string:r,onBackClick:o,onSequenceClick:d,should_next_disable:c,should_previous_disable:_,title:u}=t,{is_search_flyout:x}=e,m=r&&(0,nM.S)(window.__webpack_public_path__)[s],h=0;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:"flyout__help-header","data-testid":"dt_flyout_help_base",children:[(0,l.jsx)("button",{className:"dc-btn flyout__button-back",onClick:o,children:(0,l.jsx)(nz.Z,{height:"16px",width:"16px",fill:"var(--text-general)"})}),(0,l.jsx)(ea.Z,{weight:"bold",className:"flyout__help-title",children:u}),(0,l.jsx)("div",{className:"flyout__item-buttons",children:(0,l.jsx)(eA.Z,{className:"flyout__button-add",has_effect:!0,id:`db-flyout-help__add--${s}`,onClick:()=>window.Blockly.derivWorkspace.addBlockNode(a),primary:!0,text:(0,f.NC)("Add"),type:"button"})})]}),(0,l.jsx)("div",{className:"flyout__help-content",children:m&&m.map((e,t)=>{let{type:i,width:o,url:d,example_id:c}=e,{text:_}=r,u=n.find(e=>e.id===c);switch(i){case nM.I.TEXT:if(h<_.length)return(0,l.jsx)(nB,{text:_[h++]},`${s}_${t}`);return null;case nM.I.VIDEO:return(0,l.jsx)(nX,{url:d},`${s}_${t}`);case nM.I.IMAGE:return(0,l.jsx)(nP,{width:o,url:d},`${s}_${t}`);case nM.I.BLOCK:return(0,l.jsx)(nZ,{block_node:a},`${s}_${t}`);case nM.I.EXAMPLE:if(u)return(0,l.jsx)(nZ,{block_node:u.childNodes[0]},`${s}_${t}`);return null;default:return null}})}),!x&&!(_&&c)&&(0,l.jsxs)("div",{className:"flyout__help-footer",children:[(0,l.jsx)(eA.Z,{className:"flyout__button-previous",secondary:!0,onClick:()=>d(!1),text:(0,f.NC)("Previous"),type:"button",is_disabled:_,renderText:e=>_&&(0,l.jsx)(ea.Z,{size:"xs",weight:"bold",align:"center",color:"disabled",children:e})}),(0,l.jsx)(eA.Z,{className:"flyout__button-next",secondary:!0,onClick:()=>d(!0),text:(0,f.NC)("Next"),type:"button",is_disabled:c,renderText:e=>c&&(0,l.jsx)(ea.Z,{size:"xs",weight:"bold",align:"center",color:"disabled",children:e})})]})]})}),nH=e=>{let{search_term:t,total_result:a}=e;return(0,l.jsxs)("div",{className:"flyout__search-header",children:[(0,l.jsx)(ea.Z,{weight:"bold",className:"flyout__search-header-text",children:(0,f.NC)('Results for "{{ search_term }}"',{search_term:t,interpolation:{escapeValue:!1}})}),(0,l.jsx)(ea.Z,{weight:"bold",color:"profit-success",className:"flyout__search-header-text",children:`${a} ${a>1?(0,f.NC)("results"):(0,f.NC)("result")}`})]})},nV=e=>{let t=i.useRef(),{flyout_content:a,active_helper:s,setHelpContent:n,initFlyoutHelp:r,is_empty:o,is_search_flyout:d,selected_category:c,first_get_variable_block_index:_}=e;return(0,l.jsx)("div",{ref:t,className:U()("flyout__content",{"flyout__normal-content":!d}),children:(0,l.jsxs)(er.Z,{className:"flyout__content-scrollbar",children:[(null==c?void 0:c.getAttribute("id"))==="indicators"&&(0,l.jsxs)("div",{className:"flyout__content-disclaimer",children:[(0,l.jsx)("span",{className:"flyout__content-disclaimer-icon",children:(0,l.jsx)(nD.Z,{className:"flyout__content-disclaimer__warning-icon",height:"24px",width:"24px",fill:"var(--text-general)"})}),(0,l.jsx)("span",{className:"flyout__content-disclaimer-text",children:(0,f.NC)("Indicators on the chart tab are for indicative purposes only and may vary slightly from the ones on the {{platform_name_dbot}} workspace.",{platform_name_dbot:(0,m.$Xq)("dbot").name})})]}),o?(0,l.jsx)("div",{className:"flyout__search-empty",children:(0,l.jsx)(ea.Z,{as:"h2",weight:"bold",lineHeight:"xs",children:(0,f.NC)("No results found")})}):a.map((e,t)=>{switch(e.tagName.toUpperCase()){case window.Blockly.Xml.NODE_BLOCK:{var a,i,o,c;let u=e.getAttribute("type")||"";return(0,l.jsx)(nF,{id:`flyout__item-workspace--${t}`,block_node:e,should_hide_display_name:"variables_get"===u&&t!==_,onInfoClick:(0,nM.S)(window.__webpack_public_path__)[u]&&(d?()=>n(e):()=>r(e,u)),is_active:s===u},`${e.getAttribute("type")}${null==(c=window)||null==(o=c.Blockly)||null==(i=o.utils)||null==(a=i.idGenerator)?void 0:a.genUid()}`)}case window.Blockly.Xml.NODE_LABEL:return(0,l.jsx)("div",{className:"flyout__item-label-bold",children:e.getAttribute("text")},`${e.getAttribute("text")}${t}`);case window.Blockly.Xml.NODE_INPUT:return(0,l.jsx)(eq,{className:`${e.getAttribute("className")}`,type:`${e.getAttribute("type")}`,name:`${e.getAttribute("name")}`,placeholder:`${e.getAttribute("placeholder")}`,autoComplete:"off"},`${e.getAttribute("name")}${t}`);case window.Blockly.Xml.NODE_BUTTON:{let a=e.getAttribute("callbackKey"),s=e.getAttribute("id");return(0,l.jsx)("button",{id:s,className:U()("dc-btn","dc-btn-effect","dc-btn--primary",`${e.getAttribute("className")}`),onClick:e=>{let t=window.Blockly.derivWorkspace,s=t.getButtonCallback(a);e.targetWorkspace_=t,e.getTargetWorkspace=()=>e.targetWorkspace_,null==s||s(e)},children:e.getAttribute("text")},`${a}${t}`)}default:return null}})]})})},nq=(0,r.Pi)(()=>{let{flyout:e,flyout_help:t}=(0,j.oR)(),{active_helper:a,initFlyoutHelp:s,setHelpContent:n}=t,{flyout_content:r,flyout_width:o,is_help_content:d,is_search_flyout:c,is_visible:_,onMount:u,onUnmount:x,search_term:m,selected_category:h,first_get_variable_block_index:p}=e;if(i.useEffect(()=>(u(),()=>x()),[u,x]),_&&c){var b;null===nO.default||void 0===nO.default||null==(b=nO.default.pushDataLayer)||b.call(nO.default,{event:"dbot_search_results",value:!0})}let v=Object.keys(r).length;return _&&(0,l.jsxs)("div",{id:"gtm-search-results",className:U()("flyout",{flyout__search:c,flyout__help:d,flyout__normal:!d&&!c}),style:{width:`${o}px`},children:[c&&!d&&(0,l.jsx)(nH,{search_term:m,total_result:v}),d?(0,l.jsx)(n$,{}):(0,l.jsx)(nV,{is_empty:0===v,flyout_content:r,active_helper:a,setHelpContent:n,initFlyoutHelp:s,is_search_flyout:c,selected_category:h,first_get_variable_block_index:p})]})}),nG=e=>{let{is_running:t,is_multiplier:a,is_contract_dialog_open:s,is_stop_bot_dialog_open:n,closeMultiplierContract:r,onOkButtonClick:o,toggleStopBotDialog:d}=e,c=t&&a?(0,f.NC)("Keep my contract"):(0,f.NC)("Stop my bot"),_=t&&a?(0,f.NC)("Close my contract"):(0,f.NC)("Back"),u=t&&a?(0,f.NC)("Keep your current contract?"):(0,f.NC)("Stop your current bot?"),x=t&&a?r:d;return(0,l.jsx)(i.Fragment,{children:(0,l.jsx)(aP.Z,{portal_element_id:"modal_root",title:u,is_visible:t?n:s,confirm_button_text:c,onConfirm:o,cancel_button_text:_,onCancel:x,is_mobile_full_width:!1,className:"toolbar__dialog",has_close_icon:!0,children:t&&a?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(ea.Z,{as:"p",lineHeight:"s",size:"xs",styles:{paddingBottom:"2rem",paddingTop:"1rem"},children:[(0,l.jsx)(f.Xx,{i18n_default_text:"Close your contract now or keep it running. If you decide to keep it running, you can check and close it later on the "}),(0,l.jsx)(ea.Z,{weight:"bold",as:"span",lineHeight:"s",size:"xs",children:(0,l.jsx)(aK.Z,{className:"link",onClick:()=>window.location.assign(m.xOw.reports),children:(0,l.jsx)(f.Xx,{i18n_default_text:"Reports"})},0)}),(0,l.jsx)(f.Xx,{i18n_default_text:" page."})]}),(0,l.jsx)(ea.Z,{as:"p",lineHeight:"s",size:"xs",children:(0,l.jsx)(f.Xx,{i18n_default_text:"The Quick Strategy you just created will be loaded to the workspace."})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ea.Z,{as:"p",lineHeight:"s",size:"xs",styles:{paddingBottom:"2rem",paddingTop:"1rem"},children:(0,l.jsx)(f.Xx,{i18n_default_text:"Stopping the current bot will load the Quick Strategy you just created to the workspace."})}),(0,l.jsxs)(ea.Z,{as:"p",lineHeight:"s",size:"xs",children:[(0,l.jsx)(f.Xx,{i18n_default_text:"Any open contracts can be viewed on the "}),(0,l.jsx)(ea.Z,{weight:"bold",as:"span",lineHeight:"s",size:"xs",children:(0,l.jsx)(aK.Z,{className:"link",onClick:()=>window.location.assign(m.xOw.reports),children:(0,l.jsx)(f.Xx,{i18n_default_text:"Reports"})},0)}),(0,l.jsx)(ea.Z,{as:"span",lineHeight:"s",size:"xs",styles:{paddingInlineStart:"0.4rem"},children:(0,l.jsx)(f.Xx,{i18n_default_text:" page."})})]})]})})})},nY=(0,r.Pi)(()=>{let{run_panel:e,quick_strategy:t,summary_card:a}=(0,j.oR)(),{is_contract_dialog_open:s,is_stop_bot_dialog_open:n,toggleStopBotDialog:i}=t,{is_running:r,closeMultiplierContract:o,stopMyBot:d,is_dialog_open:c}=e,{is_multiplier:_}=a;return(0,l.jsx)(nG,{is_running:r,onOkButtonClick:d,is_contract_dialog_open:s,is_stop_bot_dialog_open:n,is_multiplier:_,closeMultiplierContract:o,is_dialog_open:c,toggleStopBotDialog:i})}),nK=e=>{let{popover_message:t,button_id:a,button_classname:s,buttonOnClick:n,icon:i,button_text:r,is_bot_running:o}=e,d=(0,l.jsx)(eA.Z,{id:a,className:s,has_effect:!0,onClick:n,icon:i,green:!0,children:r});return o?d:(0,l.jsx)($.Z,{alignment:"bottom",message:t,should_disable_pointer_events:!0,children:d})};var nW=a(52068),nJ=a(62705),nQ=a(81712),n0=a(66090),n1=a(87348),n8=a(79800),n2=a(70342),n3=a(80246),n7=a(83069);let n9=e=>{let{popover_message:t,icon:a}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eG.Z,{children:a}),(0,l.jsx)(tt.Z,{children:(0,l.jsx)($.Z,{alignment:"bottom",message:t,zIndex:String(ae.TOOLBAR),should_disable_pointer_events:!0,children:a})})]})},n5=(0,r.Pi)(()=>{let{dashboard:e,toolbar:t,load_modal:a,save_modal:s}=(0,j.oR)(),{setPreviewOnPopup:n,setChartModalVisibility:i,setTradingViewModalVisibility:r}=e,{has_redo_stack:o,has_undo_stack:d,onResetClick:c,onSortClick:_,onUndoClick:u,onZoomInOutClick:x}=t,{toggleSaveModal:m}=s,{toggleLoadModal:h}=a,{isDesktop:p}=(0,N.F)();return(0,l.jsx)("div",{className:"toolbar__wrapper",children:(0,l.jsxs)("div",{className:"toolbar__group toolbar__group-btn","data-testid":"dt_toolbar_group_btn",children:[(0,l.jsx)(n9,{popover_message:(0,f.NC)("Reset"),icon:(0,l.jsx)("span",{id:"db-toolbar__reset-button",className:"toolbar__icon",onClick:c,"data-testid":"dt_toolbar_reset_button",children:(0,l.jsx)(nW.Z,{})})}),(0,l.jsx)(n9,{popover_message:(0,f.NC)("Import"),icon:(0,l.jsx)("span",{className:"toolbar__icon",id:"db-toolbar__import-button","data-testid":"dt_toolbar_import_button",onClick:()=>{n(!0),h(),(0,tQ.m5)({subpage_name:"bot_builder",subform_source:"bot_builder",subform_name:"load_strategy",load_strategy_tab:"recent"})},children:(0,l.jsx)(nJ.Z,{})})}),(0,l.jsx)(n9,{popover_message:(0,f.NC)("Sort blocks"),icon:(0,l.jsx)("span",{className:"toolbar__icon",id:"db-toolbar__sort-button","data-testid":"dt_toolbar_sort_button",onClick:_,children:(0,l.jsx)(nQ.Z,{})})}),p&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"vertical-divider"}),(0,l.jsx)(n9,{popover_message:(0,f.NC)("Charts"),icon:(0,l.jsx)("span",{className:"toolbar__icon",id:"db-toolbar__charts-button",onClick:()=>i(),children:(0,l.jsx)(n0.Z,{})})}),(0,l.jsx)(n9,{popover_message:(0,f.NC)("TradingView Chart"),icon:(0,l.jsx)("span",{className:"toolbar__icon",id:"db-toolbar__tradingview-button",onClick:()=>r(),children:(0,l.jsx)(n1.Z,{})})})]}),(0,l.jsx)("div",{className:"vertical-divider"}),(0,l.jsx)(n9,{popover_message:(0,f.NC)("Undo"),icon:(0,l.jsx)("span",{className:U()("toolbar__icon undo",{"toolbar__icon--disabled":!d}),id:"db-toolbar__undo-button","data-testid":"dt_toolbar_undo_button",onClick:()=>u(!1),children:(0,l.jsx)(n8.Z,{})})}),(0,l.jsx)(n9,{popover_message:(0,f.NC)("Redo"),icon:(0,l.jsx)("span",{className:U()("toolbar__icon redo",{"toolbar__icon--disabled":!o}),id:"db-toolbar__redo-button","data-testid":"dt_toolbar_redo_button",onClick:()=>u(!0),children:(0,l.jsx)(n2.Z,{})})}),(0,l.jsx)("div",{className:"vertical-divider"}),(0,l.jsx)(n9,{popover_message:(0,f.NC)("Zoom in"),icon:(0,l.jsx)("span",{className:"toolbar__icon",id:"db-toolbar__zoom-in-button","data-testid":"dt_toolbar_zoom_in_button",onClick:()=>x(!0),children:(0,l.jsx)(n3.Z,{})})}),(0,l.jsx)(n9,{popover_message:(0,f.NC)("Zoom out"),icon:(0,l.jsx)("span",{className:"toolbar__icon",id:"db-toolbar__zoom-out","data-testid":"dt_toolbar_zoom_out_button",onClick:()=>x(!1),children:(0,l.jsx)(n7.Z,{})})})]})})}),n4=(0,r.Pi)(()=>{let{run_panel:e,toolbar:t,quick_strategy:a}=(0,j.oR)(),{isDesktop:s}=(0,N.F)(),{is_dialog_open:n,closeResetDialog:r,onResetOkButtonClick:o}=t,{is_running:d}=e,{setFormVisibility:c}=a,_=d?(0,f.NC)("Yes"):(0,f.NC)("OK"),u=d?(0,f.NC)("No"):(0,f.NC)("Cancel");return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("div",{className:"toolbar dashboard__toolbar","data-testid":"dt_dashboard_toolbar",children:(0,l.jsxs)("div",{className:"toolbar__section",children:[!s&&(0,l.jsx)(nK,{popover_message:(0,f.NC)("Click here to start building your Deriv Bot."),button_id:"db-toolbar__get-started-button",button_classname:"toolbar__btn toolbar__btn--icon toolbar__btn--start",buttonOnClick:()=>{c(!0),(0,tQ.m5)({subpage_name:"bot_builder",subform_source:"bot_builder",subform_name:"quick_strategy"})},button_text:(0,f.NC)("Quick strategy"),is_bot_running:d}),s&&(0,l.jsx)(n5,{})]})}),!s&&(0,l.jsx)(n5,{}),(0,l.jsx)(aP.Z,{portal_element_id:"modal_root",title:(0,f.NC)("Are you sure?"),is_visible:n,confirm_button_text:_,onConfirm:o,cancel_button_text:u,onCancel:r,is_mobile_full_width:!1,className:"toolbar__dialog",has_close_icon:!0,children:d?(0,l.jsx)(f.Xx,{i18n_default_text:"The workspace will be reset to the default strategy and any unsaved changes will be lost. <0>Note: This will not affect your running bot.</0>",components:[(0,l.jsx)("div",{className:"toolbar__dialog-text--second","data-testid":"dt_toolbar_dialog_text_second"},0)]}):(0,l.jsx)(f.Xx,{i18n_default_text:"Any unsaved changes will be lost."})})]})});var n6=a(88720),le=a(16232),lt=a(40877);let la=(0,r.Pi)(e=>{let{search:t,is_search_loading:a,onClick:s}=e;return t?a?(0,l.jsx)("div",{className:"loader","data-testid":"loader"}):(0,l.jsx)(lt.Z,{onClick:s,height:"18px",width:"18px",fill:"var(--text-general)"}):(0,l.jsx)(le.Z,{height:"20px",width:"20px",fill:"var(--text-general)"})}),ls=e=>{let{is_search_loading:t,onSearch:a,onSearchBlur:s,onSearchClear:n,onSearchKeyUp:i}=e;return(0,l.jsx)("div",{className:"db-toolbox__search",children:(0,l.jsx)(eD.J9,{initialValues:{search:""},onSubmit:a,children:e=>{let{submitForm:a,values:{search:r},setFieldValue:o}=e;return(0,l.jsx)(eD.l0,{children:(0,l.jsx)(eD.gN,{name:"search",children:e=>{let{field:d}=e;return(0,l.jsx)(eq,{...d,className:"db-toolbox__search-field",type:"text",name:"search",placeholder:(0,f.NC)("Search"),onKeyUp:()=>i(a),onFocus:a,onBlur:s,leading_icon:(0,l.jsx)(la,{search:r,is_search_loading:t,onClick:()=>n(o)})})}})})}})})};var ln=a(97762);let ll=e=>{let{...t}=e;return i.createElement("arg",t)},li=e=>{let{...t}=e;return i.createElement("block",t)},lr=e=>{let{...t}=e;return i.createElement("category",t)},lo=e=>{let{...t}=e;return i.createElement("example",t)},ld=e=>{let{...t}=e;return i.createElement("examples",t)},lc=e=>{let{...t}=e;return i.createElement("field",t)},l_=e=>{let{...t}=e;return i.createElement("mutation",t)},lu=e=>{let{...t}=e;return i.createElement("next",t)},lx=e=>{let{...t}=e;return i.createElement("shadow",t)},lm=e=>{let{...t}=e;return i.createElement("statement",t)},lh=e=>{let{...t}=e;return i.createElement("value",t)},lp=e=>{let{...t}=e;return i.createElement("xml",t)},lj=()=>ln.renderToStaticMarkup((0,l.jsxs)(lp,{xmlns:"http://www.w3.org/1999/xhtml",id:"toolbox",children:[(0,l.jsxs)(lr,{id:"trade_parameters",name:(0,f.NC)("Trade parameters"),children:[(0,l.jsx)(li,{type:"trade_definition",children:(0,l.jsx)(lm,{name:"TRADE_OPTIONS",children:(0,l.jsxs)(li,{type:"trade_definition_market",deletable:"false",movable:"false",children:[(0,l.jsx)(lc,{name:"MARKET_LIST"}),(0,l.jsx)(lc,{name:"SUBMARKET_LIST"}),(0,l.jsx)(lc,{name:"SYMBOL_LIST"}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"trade_definition_tradetype",deletable:"false",movable:"false",children:[(0,l.jsx)(lc,{name:"TRADETYPECAT_LIST"}),(0,l.jsx)(lc,{name:"TRADETYPE_LIST"}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"trade_definition_contracttype",deletable:"false",movable:"false",children:[(0,l.jsx)(lc,{name:"TYPE_LIST"}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"trade_definition_candleinterval",deletable:"false",movable:"false",children:[(0,l.jsx)(lc,{name:"CANDLEINTERVAL_LIST",children:"60"}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"trade_definition_restartbuysell",deletable:"false",movable:"false",children:[(0,l.jsx)(lc,{name:"TIME_MACHINE_ENABLED",children:"FALSE"}),(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"trade_definition_restartonerror",deletable:"false",movable:"false",children:(0,l.jsx)(lc,{name:"RESTARTONERROR",children:"TRUE"})})})]})})]})})]})})]})})]})})}),(0,l.jsxs)(li,{type:"trade_definition_tradeoptions",children:[(0,l.jsx)(l_,{has_first_barrier:"false",has_second_barrier:"false",has_prediction:"false"}),(0,l.jsx)(lc,{name:"DURATIONTYPE_LIST"}),(0,l.jsx)(lc,{name:"CURRENCY_LIST",children:"USD"}),(0,l.jsx)(lh,{name:"DURATION",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})}),(0,l.jsx)(lh,{name:"AMOUNT",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})}),(0,l.jsx)(lc,{name:"AMOUNT_LIMITS"})]}),(0,l.jsxs)(li,{type:"trade_definition_multiplier",children:[(0,l.jsx)(lc,{name:"MULTIPLIERTYPE_LIST"}),(0,l.jsx)(lc,{name:"CURRENCY_LIST",children:"USD"}),(0,l.jsx)(lh,{name:"AMOUNT",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})}),(0,l.jsx)(lc,{name:"AMOUNT_LIMITS"})]}),(0,l.jsx)(li,{type:"multiplier_take_profit",children:(0,l.jsx)(lh,{name:"AMOUNT",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"0"})})})}),(0,l.jsx)(li,{type:"multiplier_stop_loss",children:(0,l.jsx)(lh,{name:"AMOUNT",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"0"})})})}),(0,l.jsxs)(li,{type:"trade_definition_accumulator",children:[(0,l.jsx)(lc,{name:"GROWTHRATE_LIST"}),(0,l.jsx)(lc,{name:"CURRENCY_LIST",children:"USD"}),(0,l.jsx)(lh,{name:"AMOUNT",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})})]}),(0,l.jsx)(li,{type:"accumulator_take_profit",children:(0,l.jsx)(lh,{name:"AMOUNT",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"0"})})})})]}),(0,l.jsxs)(lr,{id:"purchase_conditions",name:(0,f.NC)("Purchase conditions"),children:[(0,l.jsx)(li,{type:"before_purchase"}),(0,l.jsx)(li,{type:"purchase"})]}),(0,l.jsxs)(lr,{id:"sell_conditions",name:(0,f.NC)("Sell conditions (optional)"),children:[(0,l.jsx)(li,{type:"during_purchase"}),(0,l.jsx)(li,{type:"sell_at_market"})]}),(0,l.jsxs)(lr,{id:"trade_results",name:(0,f.NC)("Restart trading conditions"),children:[(0,l.jsx)(li,{type:"after_purchase"}),(0,l.jsx)(li,{type:"trade_again"})]}),(0,l.jsxs)(lr,{id:"analysis",name:(0,f.NC)("Analysis"),children:[(0,l.jsxs)(lr,{id:"indicators",name:(0,f.NC)("Indicators"),children:[(0,l.jsx)(li,{type:"sma_statement",children:(0,l.jsx)(lm,{name:"STATEMENT",children:(0,l.jsxs)(li,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"INPUT_LIST"}),(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lh,{name:"PERIOD",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})})})})]})})}),(0,l.jsx)(li,{type:"smaa_statement",children:(0,l.jsx)(lm,{name:"STATEMENT",children:(0,l.jsxs)(li,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"INPUT_LIST"}),(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lh,{name:"PERIOD",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})})})})]})})}),(0,l.jsxs)(li,{type:"bb_statement",children:[(0,l.jsx)(lc,{name:"BBRESULT_LIST",children:"0"}),(0,l.jsx)(lm,{name:"STATEMENT",children:(0,l.jsxs)(li,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"INPUT_LIST"}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"period",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"PERIOD",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"std_dev_multiplier_up",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"UPMULTIPLIER",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"5"})})}),(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"std_dev_multiplier_down",children:(0,l.jsx)(lh,{name:"DOWNMULTIPLIER",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"5"})})})})})]})})]})})]})})]}),(0,l.jsxs)(li,{type:"bba_statement",children:[(0,l.jsx)(lc,{name:"BBRESULT_LIST",children:"0"}),(0,l.jsx)(lm,{name:"STATEMENT",children:(0,l.jsxs)(li,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"INPUT_LIST"}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"period",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"PERIOD",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"std_dev_multiplier_up",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"UPMULTIPLIER",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"5"})})}),(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"std_dev_multiplier_down",children:(0,l.jsx)(lh,{name:"DOWNMULTIPLIER",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"5"})})})})})]})})]})})]})})]}),(0,l.jsx)(li,{type:"ema_statement",children:(0,l.jsx)(lm,{name:"STATEMENT",children:(0,l.jsxs)(li,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"INPUT_LIST"}),(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lh,{name:"PERIOD",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})})})})]})})}),(0,l.jsx)(li,{type:"emaa_statement",children:(0,l.jsx)(lm,{name:"STATEMENT",children:(0,l.jsxs)(li,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"INPUT_LIST"}),(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lh,{name:"PERIOD",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})})})})]})})}),(0,l.jsx)(li,{type:"rsi_statement",children:(0,l.jsx)(lm,{name:"STATEMENT",children:(0,l.jsx)(li,{type:"input_list",deletable:"false",movable:"false",children:(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lh,{name:"PERIOD",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})})})})})})}),(0,l.jsx)(li,{type:"rsia_statement",children:(0,l.jsx)(lm,{name:"STATEMENT",children:(0,l.jsxs)(li,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"INPUT_LIST"}),(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lh,{name:"PERIOD",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})})})})]})})}),(0,l.jsxs)(li,{type:"macda_statement",children:[(0,l.jsx)(lc,{name:"MACDFIELDS_LIST",children:"1"}),(0,l.jsx)(lm,{name:"STATEMENT",children:(0,l.jsxs)(li,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"INPUT_LIST"}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"fast_ema_period",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"FAST_EMA_PERIOD",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"12"})})}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"slow_ema_period",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"SLOW_EMA_PERIOD",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"26"})})}),(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"signal_ema_period",deletable:"false",movable:"false",children:(0,l.jsx)(lh,{name:"SIGNAL_EMA_PERIOD",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"9"})})})})})]})})]})})]})})]})]}),(0,l.jsxs)(lr,{name:(0,f.NC)("Tick and candle analysis"),id:"tick_analysis",children:[(0,l.jsx)(li,{type:"tick_analysis"}),(0,l.jsx)(li,{type:"tick"}),(0,l.jsx)(li,{type:"last_digit"}),(0,l.jsx)(li,{type:"stat"}),(0,l.jsx)(li,{type:"stat_list"}),(0,l.jsx)(li,{type:"ticks"}),(0,l.jsx)(li,{type:"lastDigitList"}),(0,l.jsx)(li,{type:"check_direction"}),(0,l.jsx)(li,{type:"is_candle_black"}),(0,l.jsxs)(li,{type:"read_ohlc",children:[(0,l.jsx)(lc,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lc,{name:"CANDLEINTERVAL_LIST",children:"default"}),(0,l.jsx)(lh,{name:"CANDLEINDEX",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})})]}),(0,l.jsx)(li,{type:"read_ohlc_obj"}),(0,l.jsx)(li,{type:"ohlc_values"}),(0,l.jsx)(li,{type:"ohlc_values_in_list"}),(0,l.jsxs)(li,{type:"get_ohlc",children:[(0,l.jsx)(lc,{name:"CANDLEINTERVAL_LIST",children:"default"}),(0,l.jsx)(lh,{name:"CANDLEINDEX",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})})]}),(0,l.jsx)(li,{type:"ohlc"})]}),(0,l.jsxs)(lr,{name:(0,f.NC)("Contract"),id:"contract_details",children:[(0,l.jsx)(li,{type:"contract_check_result"}),(0,l.jsx)(li,{type:"read_details"}),(0,l.jsx)(li,{type:"sell_price"}),(0,l.jsx)(li,{type:"check_sell"}),(0,l.jsx)(li,{type:"payout"}),(0,l.jsx)(li,{type:"ask_price"})]}),(0,l.jsxs)(lr,{name:(0,f.NC)("Stats"),id:"stats",children:[(0,l.jsx)(li,{type:"balance"}),(0,l.jsx)(li,{type:"total_profit"}),(0,l.jsx)(li,{type:"total_runs"})]})]}),(0,l.jsxs)(lr,{id:"utility",name:(0,f.NC)("Utility"),children:[(0,l.jsx)(lr,{name:(0,f.NC)("Custom functions"),id:"custom_functions",dynamic:"PROCEDURE"}),(0,l.jsx)(lr,{name:(0,f.NC)("Variables"),id:"variables",dynamic:"VARIABLE"}),(0,l.jsxs)(lr,{name:(0,f.NC)("Notifications"),id:"notifications",children:[(0,l.jsx)(li,{type:"text_print",children:(0,l.jsx)(lh,{name:"TEXT",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})})})}),(0,l.jsxs)(li,{type:"text_prompt_ext",children:[(0,l.jsx)(lc,{name:"TYPE",children:"TEXT"}),(0,l.jsx)(lh,{name:"TEXT",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})})})]}),(0,l.jsxs)(li,{type:"notify",children:[(0,l.jsx)(lc,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lh,{name:"MESSAGE",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})})})]}),(0,l.jsxs)(li,{type:"notify_telegram",children:[(0,l.jsx)(lh,{name:"TELEGRAM_ACCESS_TOKEN",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT"})})}),(0,l.jsx)(lh,{name:"TELEGRAM_CHAT_ID",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT"})})}),(0,l.jsx)(lh,{name:"TELEGRAM_MESSAGE",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})})})]})]}),(0,l.jsxs)(lr,{name:(0,f.NC)("Time"),id:"time",children:[(0,l.jsx)(li,{type:"epoch"}),(0,l.jsx)(li,{type:"timeout"}),(0,l.jsx)(li,{type:"tick_delay"}),(0,l.jsx)(li,{type:"totimestamp",children:(0,l.jsx)(lh,{name:"DATETIME",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"yyyy-mm-dd hh:mm:ss"})})})}),(0,l.jsx)(li,{type:"todatetime",children:(0,l.jsx)(lh,{name:"TIMESTAMP",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"0"})})})})]}),(0,l.jsxs)(lr,{name:(0,f.NC)("Math"),id:"math",children:[(0,l.jsx)(li,{type:"math_number"}),(0,l.jsxs)(li,{type:"math_arithmetic",children:[(0,l.jsx)(lc,{name:"OP",children:"ADD"}),(0,l.jsx)(lh,{name:"A",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})}),(0,l.jsx)(lh,{name:"B",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})})]}),(0,l.jsxs)(li,{type:"math_single",children:[(0,l.jsx)(lc,{name:"OP",children:"ROOT"}),(0,l.jsx)(lh,{name:"NUM",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"9"})})})]}),(0,l.jsxs)(li,{type:"math_trig",children:[(0,l.jsx)(lc,{name:"OP",children:"SIN"}),(0,l.jsx)(lh,{name:"NUM",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"45"})})})]}),(0,l.jsx)(li,{type:"math_constant"}),(0,l.jsxs)(li,{type:"math_number_property",children:[(0,l.jsx)(l_,{divisor_input:"false"}),(0,l.jsx)(lc,{name:"PROPERTY",children:"EVEN"}),(0,l.jsx)(lh,{name:"NUMBER_TO_CHECK",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"0"})})})]}),(0,l.jsxs)(li,{type:"math_change",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"item"}),(0,l.jsx)(lh,{name:"DELTA",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})})]}),(0,l.jsx)(li,{type:"math_on_list"}),(0,l.jsxs)(li,{type:"math_round",children:[(0,l.jsx)(lc,{name:"OP",children:"ROUND"}),(0,l.jsx)(lh,{name:"NUM",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"3.1"})})})]}),(0,l.jsxs)(li,{type:"math_modulo",children:[(0,l.jsx)(lh,{name:"DIVIDEND",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"64"})})}),(0,l.jsx)(lh,{name:"DIVISOR",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})})]}),(0,l.jsxs)(li,{type:"math_constrain",children:[(0,l.jsx)(lh,{name:"Value",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"50"})})}),(0,l.jsx)(lh,{name:"LOW",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})}),(0,l.jsx)(lh,{name:"HIGH",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"100"})})})]}),(0,l.jsxs)(li,{type:"math_random_int",children:[(0,l.jsx)(lh,{name:"FROM",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})}),(0,l.jsx)(lh,{name:"TO",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"100"})})})]}),(0,l.jsx)(li,{type:"math_random_float"})]}),(0,l.jsxs)(lr,{name:(0,f.NC)("Text"),id:"text",children:[(0,l.jsx)(li,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})}),(0,l.jsxs)(li,{type:"text_join",children:[(0,l.jsx)(lc,{name:"VARIABLE",variabletype:"",children:"text"}),(0,l.jsx)(lm,{name:"STACK",children:(0,l.jsx)(li,{type:"text_statement",movable:"false",children:(0,l.jsx)(lh,{name:"TEXT",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})})})})})]}),(0,l.jsxs)(li,{type:"text_append",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"text"}),(0,l.jsx)(lh,{name:"TEXT",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})})})]}),(0,l.jsx)(li,{type:"text_length",children:(0,l.jsx)(lh,{name:"Value",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})})})}),(0,l.jsx)(li,{type:"text_isEmpty",children:(0,l.jsx)(lh,{name:"Value",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT"})})})}),(0,l.jsxs)(li,{type:"text_indexOf",children:[(0,l.jsx)(lc,{name:"END",children:"FIRST"}),(0,l.jsx)(lh,{name:"Value",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"text"})})}),(0,l.jsx)(lh,{name:"FIND",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})})})]}),(0,l.jsxs)(li,{type:"text_charAt",children:[(0,l.jsx)(l_,{at:"true"}),(0,l.jsx)(lc,{name:"WHERE",children:"FROM_START"}),(0,l.jsx)(lh,{name:"Value",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"item"})})}),(0,l.jsx)(lh,{name:"AT",children:(0,l.jsx)(lx,{type:"math_number_positive",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})})]}),(0,l.jsxs)(li,{type:"text_getSubstring",children:[(0,l.jsx)(l_,{at1:"true",at2:"true"}),(0,l.jsx)(lc,{name:"WHERE1",children:"FROM_START"}),(0,l.jsx)(lc,{name:"WHERE2",children:"FROM_START"}),(0,l.jsx)(lh,{name:"STRING",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"text"})})}),(0,l.jsx)(lh,{name:"AT1",children:(0,l.jsx)(lx,{type:"math_number_positive",children:(0,l.jsx)(lc,{name:"NUM",children:"0"})})}),(0,l.jsx)(lh,{name:"AT2",children:(0,l.jsx)(lx,{type:"math_number_positive",children:(0,l.jsx)(lc,{name:"NUM",children:"2"})})})]}),(0,l.jsxs)(li,{type:"text_changeCase",children:[(0,l.jsx)(lc,{name:"CASE",children:"UPPERCASE"}),(0,l.jsx)(lh,{name:"TEXT",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})})})]}),(0,l.jsxs)(li,{type:"text_trim",children:[(0,l.jsx)(lc,{name:"MODE",children:"BOTH"}),(0,l.jsx)(lh,{name:"TEXT",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})})})]})]}),(0,l.jsxs)(lr,{name:(0,f.NC)("Logic"),id:"logic",children:[(0,l.jsx)(li,{type:"controls_if"}),(0,l.jsx)(li,{type:"logic_compare"}),(0,l.jsx)(li,{type:"logic_operation"}),(0,l.jsx)(li,{type:"logic_negate"}),(0,l.jsx)(li,{type:"logic_boolean"}),(0,l.jsx)(li,{type:"logic_null"}),(0,l.jsx)(li,{type:"logic_ternary"})]}),(0,l.jsxs)(lr,{name:(0,f.NC)("Lists"),id:"lists",children:[(0,l.jsxs)(li,{type:"lists_create_with",children:[(0,l.jsx)(lc,{name:"VARIABLE",variabletype:"",children:"list"}),(0,l.jsx)(lm,{name:"STACK",children:(0,l.jsx)(li,{type:"lists_statement",movable:"false",children:(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"lists_statement",movable:"false"})})})})]}),(0,l.jsx)(li,{type:"lists_repeat",children:(0,l.jsx)(lh,{name:"NUM",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"5"})})})}),(0,l.jsx)(li,{type:"lists_length"}),(0,l.jsx)(li,{type:"lists_isEmpty"}),(0,l.jsx)(li,{type:"lists_indexOf"}),(0,l.jsx)(li,{type:"lists_getIndex"}),(0,l.jsx)(li,{type:"lists_setIndex"}),(0,l.jsx)(li,{type:"lists_getSublist"}),(0,l.jsxs)(li,{type:"lists_split",children:[(0,l.jsx)(l_,{mode:"SPLIT"}),(0,l.jsx)(lc,{name:"MODE",children:"SPLIT"}),(0,l.jsx)(lh,{name:"DELIM",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:","})})})]}),(0,l.jsx)(li,{type:"lists_sort"})]}),(0,l.jsxs)(lr,{name:(0,f.NC)("Loops"),id:"loops",children:[(0,l.jsx)(li,{type:"controls_repeat"}),(0,l.jsx)(li,{type:"controls_repeat_ext"}),(0,l.jsx)(li,{type:"controls_whileUntil"}),(0,l.jsx)(li,{type:"controls_for"}),(0,l.jsx)(li,{type:"controls_forEach"}),(0,l.jsx)(li,{type:"controls_flow_statements"})]}),(0,l.jsxs)(lr,{name:(0,f.NC)("Miscellaneous"),id:"misc",children:[(0,l.jsx)(li,{type:"loader"}),(0,l.jsx)(li,{type:"block_holder"}),(0,l.jsx)(li,{type:"console",children:(0,l.jsx)(lh,{name:"MESSAGE",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})})})})]})]}),(0,l.jsxs)(ld,{id:"examples",children:[(0,l.jsx)(lo,{id:"sell_available",children:(0,l.jsx)(li,{type:"during_purchase",children:(0,l.jsx)(lm,{name:"DURING_PURCHASE_STACK",children:(0,l.jsxs)(li,{type:"controls_if",children:[(0,l.jsx)(lh,{name:"IF0",children:(0,l.jsx)(li,{type:"check_sell"})}),(0,l.jsx)(lm,{name:"DO0",children:(0,l.jsx)(li,{type:"sell_at_market"})})]})})})}),(0,l.jsx)(lo,{id:"trade_again",children:(0,l.jsx)(li,{type:"after_purchase",children:(0,l.jsx)(lm,{name:"AFTERPURCHASE_STACK",children:(0,l.jsx)(li,{type:"controls_if",children:(0,l.jsx)(lh,{name:"IF0",children:(0,l.jsxs)(li,{type:"logic_compare",children:[(0,l.jsx)(lc,{name:"OP",children:"EQ"}),(0,l.jsx)(lh,{name:"A",children:(0,l.jsx)(li,{type:"total_profit"})}),(0,l.jsx)(lh,{name:"B",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"target_profit"})})})]})})})})})}),(0,l.jsx)(lo,{id:"sma_block_example",children:(0,l.jsxs)(li,{type:"sma_statement",children:[(0,l.jsx)(lc,{name:"VARIABLE",variabletype:"",children:"sma"}),(0,l.jsx)(lm,{name:"STATEMENT",children:(0,l.jsxs)(li,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"INPUT_LIST",children:(0,l.jsxs)(li,{type:"ohlc_values",children:[(0,l.jsx)(lc,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lc,{name:"CANDLEINTERVAL_LIST",children:"default"})]})}),(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lh,{name:"PERIOD",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})})})})]})})]})}),(0,l.jsx)(lo,{id:"sma_array",children:(0,l.jsxs)(li,{type:"smaa_statement",children:[(0,l.jsx)(lc,{name:"VARIABLE",variabletype:"",children:"smaa"}),(0,l.jsx)(lm,{name:"STATEMENT",children:(0,l.jsx)(li,{type:"input_list",deletable:"false",movable:"false",children:(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lh,{name:"PERIOD",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})})})})})})]})}),(0,l.jsx)(lo,{id:"sma_block_example_1",children:(0,l.jsxs)(li,{type:"sma_statement",children:[(0,l.jsx)(lc,{name:"VARIABLE",variabletype:"",children:"sma"}),(0,l.jsx)(lm,{name:"STATEMENT",children:(0,l.jsxs)(li,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lh,{name:"INPUT_LIST",children:(0,l.jsx)(li,{type:"ticks"})}),(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lh,{name:"PERIOD",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})})})})]})})]})}),(0,l.jsx)(lo,{id:"in_candle_list_read",children:(0,l.jsxs)(li,{type:"variables_set",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"op"}),(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsxs)(li,{type:"read_ohlc",children:[(0,l.jsx)(lc,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lc,{name:"CANDLEINTERVAL_LIST",children:"default"}),(0,l.jsx)(lh,{name:"CANDLEINDEX",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})})]})})]})}),(0,l.jsx)(lo,{id:"read_candle_value",children:(0,l.jsxs)(li,{type:"variables_set",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"op"}),(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsxs)(li,{type:"read_ohlc_obj",children:[(0,l.jsx)(lc,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lh,{name:"OHLCOBJ",children:(0,l.jsxs)(li,{type:"read_ohlc",children:[(0,l.jsx)(lc,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lc,{name:"CANDLEINTERVAL_LIST",children:"default"}),(0,l.jsx)(lh,{name:"CANDLEINDEX",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})})]})})]})})]})}),(0,l.jsx)(lo,{id:"candle_list",children:(0,l.jsxs)(li,{type:"variables_set",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"candle_list"}),(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsxs)(li,{type:"ohlc_values",children:[(0,l.jsx)(lc,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lc,{name:"CANDLEINTERVAL_LIST",children:"default"})]})})]})}),(0,l.jsx)(lo,{id:"candle_list_1",children:(0,l.jsxs)(li,{type:"variables_set",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"cl"}),(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsxs)(li,{type:"ohlc_values_in_list",children:[(0,l.jsx)(lc,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lh,{name:"OHLCLIST",children:(0,l.jsx)(li,{type:"ohlc",children:(0,l.jsx)(lc,{name:"CANDLEINTERVAL_LIST",children:"default"})})})]})})]})}),(0,l.jsx)(lo,{id:"get_candle",children:(0,l.jsxs)(li,{type:"variables_set",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"candle_open_price"}),(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsxs)(li,{type:"read_ohlc_obj",children:[(0,l.jsx)(lc,{name:"OHLCFIELD_LIST",children:"epoch"}),(0,l.jsx)(lh,{name:"OHLCOBJ",children:(0,l.jsxs)(li,{type:"get_ohlc",children:[(0,l.jsx)(lc,{name:"CANDLEINTERVAL_LIST",children:"default"}),(0,l.jsx)(lh,{name:"CANDLEINDEX",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"2"})})})]})})]})})]})}),(0,l.jsx)(lo,{id:"check_result",children:(0,l.jsx)(li,{type:"after_purchase",children:(0,l.jsx)(lm,{name:"AFTERPURCHASE_STACK",children:(0,l.jsxs)(li,{type:"controls_if",children:[(0,l.jsx)(lh,{name:"IF0",children:(0,l.jsx)(li,{type:"contract_check_result",children:(0,l.jsx)(lc,{name:"CHECK_RESULT",children:"win"})})}),(0,l.jsx)(lm,{name:"DO0",children:(0,l.jsx)(li,{type:"trade_again"})})]})})})}),(0,l.jsx)(lo,{id:"sell_pl",children:(0,l.jsx)(li,{type:"during_purchase",children:(0,l.jsx)(lm,{name:"DURING_PURCHASE_STACK",children:(0,l.jsxs)(li,{type:"controls_if",children:[(0,l.jsx)(lh,{name:"IF0",children:(0,l.jsx)(li,{type:"check_sell"})}),(0,l.jsx)(lm,{name:"DO0",children:(0,l.jsxs)(li,{type:"controls_if",children:[(0,l.jsx)(lh,{name:"IF0",children:(0,l.jsxs)(li,{type:"logic_compare",children:[(0,l.jsx)(lc,{name:"OP",children:"EQ"}),(0,l.jsx)(lh,{name:"A",children:(0,l.jsx)(li,{type:"sell_price"})}),(0,l.jsx)(lh,{name:"B",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"stake"})})})]})}),(0,l.jsx)(lm,{name:"DO0",children:(0,l.jsx)(li,{type:"sell_at_market"})})]})})]})})})}),(0,l.jsx)(lo,{id:"if-return",children:(0,l.jsxs)(li,{type:"procedures_defreturn",children:[(0,l.jsx)(l_,{children:(0,l.jsx)(ll,{name:"x"})}),(0,l.jsx)(lc,{name:"NAME",children:"do something"}),(0,l.jsx)(lm,{name:"STACK",children:(0,l.jsxs)(li,{type:"procedures_ifreturn",children:[(0,l.jsx)(l_,{value:"1"}),(0,l.jsx)(lh,{name:"CONDITION",children:(0,l.jsxs)(li,{type:"logic_compare",children:[(0,l.jsx)(lc,{name:"OP",children:"EQ"}),(0,l.jsx)(lh,{name:"A",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"})})}),(0,l.jsx)(lh,{name:"B",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"})})})]})}),(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsx)(li,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"x must be positive or zero"})})})]})}),(0,l.jsx)(lh,{name:"RETURN",children:(0,l.jsxs)(li,{type:"math_single",children:[(0,l.jsx)(lc,{name:"OP",children:"ROOT"}),(0,l.jsxs)(lh,{name:"NUM",children:[(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"9"})}),(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"})})]})]})})]})}),(0,l.jsx)(lo,{id:"notify_telegram",children:(0,l.jsxs)(li,{type:"notify_telegram",children:[(0,l.jsxs)(lh,{name:"TELEGRAM_ACCESS_TOKEN",children:[(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT"})}),(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"access_token"})})]}),(0,l.jsxs)(lh,{name:"TELEGRAM_CHAT_ID",children:[(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT"})}),(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"chat_id"})})]}),(0,l.jsx)(lh,{name:"TELEGRAM_MESSAGE",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"Enjoy!"})})})]})}),(0,l.jsx)(lo,{id:"epoch",children:(0,l.jsxs)(li,{type:"variables_set",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"candle"}),(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsxs)(li,{type:"read_ohlc",children:[(0,l.jsx)(lc,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lc,{name:"CANDLEINTERVAL_LIST",children:"default"}),(0,l.jsx)(lh,{name:"CANDLEINDEX",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})})]})}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"variables_set",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"Open Time"}),(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsxs)(li,{type:"read_ohlc_obj",children:[(0,l.jsx)(lc,{name:"OHLCFIELD_LIST",children:"epoch"}),(0,l.jsx)(lh,{name:"OHLCOBJ",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"candle"})})})]})}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"variables_set",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"Open Time"}),(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsxs)(li,{type:"math_arithmetic",children:[(0,l.jsx)(lc,{name:"OP",children:"MINUS"}),(0,l.jsxs)(lh,{name:"A",children:[(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})}),(0,l.jsx)(li,{type:"epoch"})]}),(0,l.jsxs)(lh,{name:"B",children:[(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})}),(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"Open Time"})})]})]})}),(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"controls_if",children:(0,l.jsx)(lh,{name:"IF0",children:(0,l.jsxs)(li,{type:"logic_compare",children:[(0,l.jsx)(lc,{name:"OP",children:"GTE"}),(0,l.jsx)(lh,{name:"A",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"Time Since Candle Opened"})})}),(0,l.jsx)(lh,{name:"B",children:(0,l.jsx)(li,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"30"})})})]})})})})]})})]})})]})}),(0,l.jsx)(lo,{id:"totimestamp",children:(0,l.jsx)(li,{type:"before_purchase",children:(0,l.jsx)(lm,{name:"BEFOREPURCHASE_STACK",children:(0,l.jsxs)(li,{type:"controls_if",children:[(0,l.jsx)(lh,{name:"IF0",children:(0,l.jsxs)(li,{type:"logic_compare",children:[(0,l.jsx)(lc,{name:"OP",children:"EQ"}),(0,l.jsx)(lh,{name:"A",children:(0,l.jsx)(li,{type:"epoch"})}),(0,l.jsx)(lh,{name:"B",children:(0,l.jsx)(li,{type:"totimestamp",children:(0,l.jsx)(lh,{name:"DATETIME",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"1957-08-31 00:00:00"})})})})})]})}),(0,l.jsx)(lm,{name:"DO0",children:(0,l.jsx)(li,{type:"purchase",children:(0,l.jsx)(lc,{name:"PURCHASE_LIST",children:"CALL"})})})]})})})}),(0,l.jsx)(lo,{id:"todatetime",children:(0,l.jsxs)(li,{type:"notify",children:[(0,l.jsx)(lc,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lc,{name:"NOTIFICATION_SOUND",children:"silent"}),(0,l.jsxs)(lh,{name:"MESSAGE",children:[(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})}),(0,l.jsx)(li,{type:"todatetime",children:(0,l.jsxs)(lh,{name:"TIMESTAMP",children:[(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"0"})}),(0,l.jsx)(li,{type:"epoch"})]})})]})]})}),(0,l.jsx)(lo,{id:"constrain",children:(0,l.jsxs)(li,{type:"math_constrain",children:[(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsx)(li,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"5"})})}),(0,l.jsx)(lh,{name:"LOW",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})}),(0,l.jsx)(lh,{name:"HIGH",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"20"})})})]})}),(0,l.jsx)(lo,{id:"controls_if",children:(0,l.jsxs)(li,{type:"controls_if",children:[(0,l.jsx)(l_,{elseif:"1",else:"1"}),(0,l.jsx)(lh,{name:"IF0",children:(0,l.jsxs)(li,{type:"logic_compare",children:[(0,l.jsx)(lc,{name:"OP",children:"EQ"}),(0,l.jsx)(lh,{name:"A",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"var1"})})}),(0,l.jsx)(lh,{name:"B",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"var2"})})})]})}),(0,l.jsx)(lh,{name:"IF1",children:(0,l.jsxs)(li,{type:"logic_compare",children:[(0,l.jsx)(lc,{name:"OP",children:"EQ"}),(0,l.jsx)(lh,{name:"A",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"var3"})})}),(0,l.jsx)(lh,{name:"B",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"var4"})})})]})})]})}),(0,l.jsx)(lo,{id:"compare_logic",children:(0,l.jsx)(li,{type:"logic_compare",children:(0,l.jsx)(lc,{name:"OP",children:"EQ"})})}),(0,l.jsx)(lo,{id:"compare_logic_1",children:(0,l.jsx)(li,{type:"logic_operation",children:(0,l.jsx)(lc,{name:"OP",children:"AND"})})}),(0,l.jsx)(lo,{id:"repeat_while",children:(0,l.jsxs)(li,{type:"variables_set",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"}),(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsx)(li,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"0"})})}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"controls_whileUntil",children:[(0,l.jsx)(lc,{name:"MODE",children:"WHILE"}),(0,l.jsx)(lh,{name:"BOOL",children:(0,l.jsxs)(li,{type:"logic_compare",children:[(0,l.jsx)(lc,{name:"OP",children:"LTE"}),(0,l.jsx)(lh,{name:"A",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"})})}),(0,l.jsx)(lh,{name:"B",children:(0,l.jsx)(li,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})})]})}),(0,l.jsx)(lm,{name:"DO",children:(0,l.jsxs)(li,{type:"math_change",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"}),(0,l.jsx)(lh,{name:"DELTA",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"1"})})}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"notify",children:[(0,l.jsx)(lc,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lc,{name:"NOTIFICATION_SOUND",children:"silent"}),(0,l.jsxs)(lh,{name:"MESSAGE",children:[(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})}),(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"})})]})]})})]})})]})})]})}),(0,l.jsx)(lo,{id:"repeat_until",children:(0,l.jsxs)(li,{type:"variables_set",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"}),(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsx)(li,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"20"})})}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"controls_whileUntil",children:[(0,l.jsx)(lc,{name:"MODE",children:"UNTIL"}),(0,l.jsx)(lh,{name:"BOOL",children:(0,l.jsxs)(li,{type:"logic_compare",children:[(0,l.jsx)(lc,{name:"OP",children:"EQ"}),(0,l.jsx)(lh,{name:"A",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"})})}),(0,l.jsx)(lh,{name:"B",children:(0,l.jsx)(li,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})})]})}),(0,l.jsx)(lm,{name:"DO",children:(0,l.jsxs)(li,{type:"math_change",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"}),(0,l.jsx)(lh,{name:"DELTA",children:(0,l.jsx)(lx,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"-1"})})}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"notify",children:[(0,l.jsx)(lc,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lc,{name:"NOTIFICATION_SOUND",children:"silent"}),(0,l.jsxs)(lh,{name:"MESSAGE",children:[(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})}),(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"})})]})]})})]})})]})})]})}),(0,l.jsx)(lo,{id:"controls_for",children:(0,l.jsxs)(li,{type:"controls_for",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"i"}),(0,l.jsx)(lh,{name:"FROM",children:(0,l.jsx)(li,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"0"})})}),(0,l.jsx)(lh,{name:"TO",children:(0,l.jsx)(li,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"10"})})}),(0,l.jsx)(lh,{name:"BY",children:(0,l.jsx)(li,{type:"math_number",children:(0,l.jsx)(lc,{name:"NUM",children:"2"})})}),(0,l.jsx)(lm,{name:"DO",children:(0,l.jsxs)(li,{type:"notify",children:[(0,l.jsx)(lc,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lc,{name:"NOTIFICATION_SOUND",children:"silent"}),(0,l.jsxs)(lh,{name:"MESSAGE",children:[(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})}),(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"i"})})]})]})})]})}),(0,l.jsx)(lo,{id:"controls_forEach",children:(0,l.jsxs)(li,{type:"lists_create_with",children:[(0,l.jsx)(lc,{name:"VARIABLE",children:"list"}),(0,l.jsx)(lm,{name:"STACK",children:(0,l.jsxs)(li,{type:"lists_statement",children:[(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"item1"})})}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"lists_statement",children:[(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"item2"})})}),(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"lists_statement",children:(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"item3"})})})})})]})})]})}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"controls_forEach",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"i"}),(0,l.jsx)(lh,{name:"LIST",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"list"})})}),(0,l.jsx)(lm,{name:"DO",children:(0,l.jsxs)(li,{type:"notify",children:[(0,l.jsx)(lc,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lc,{name:"NOTIFICATION_SOUND",children:"silent"}),(0,l.jsxs)(lh,{name:"MESSAGE",children:[(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})}),(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"i"})})]})]})})]})})]})}),(0,l.jsx)(lo,{id:"break_out",children:(0,l.jsxs)(li,{type:"variables_set",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"}),(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsx)(li,{type:"logic_boolean",children:(0,l.jsx)(lc,{name:"BOOL",children:"TRUE"})})}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"controls_repeat",children:[(0,l.jsx)(lc,{name:"TIMES",children:"10"}),(0,l.jsx)(lm,{name:"DO",children:(0,l.jsxs)(li,{type:"controls_if",children:[(0,l.jsx)(lh,{name:"IF0",children:(0,l.jsx)(li,{type:"logic_negate",children:(0,l.jsx)(lh,{name:"BOOL",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"})})})})}),(0,l.jsx)(lm,{name:"DO0",children:(0,l.jsx)(li,{type:"controls_flow_statements",children:(0,l.jsx)(lc,{name:"FLOW",children:"BREAK"})})}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"notify",children:[(0,l.jsx)(lc,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lc,{name:"NOTIFICATION_SOUND",children:"silent"}),(0,l.jsx)(lh,{name:"MESSAGE",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})})})]})})]})})]})})]})}),(0,l.jsx)(lo,{id:"continue",children:(0,l.jsxs)(li,{type:"variables_set",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"}),(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsx)(li,{type:"logic_boolean",children:(0,l.jsx)(lc,{name:"BOOL",children:"FALSE"})})}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"controls_repeat",children:[(0,l.jsx)(lc,{name:"TIMES",children:"10"}),(0,l.jsx)(lm,{name:"DO",children:(0,l.jsxs)(li,{type:"controls_if",children:[(0,l.jsx)(lh,{name:"IF0",children:(0,l.jsx)(li,{type:"logic_negate",children:(0,l.jsx)(lh,{name:"BOOL",children:(0,l.jsx)(li,{type:"variables_get",children:(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"})})})})}),(0,l.jsx)(lm,{name:"DO0",children:(0,l.jsxs)(li,{type:"variables_set",children:[(0,l.jsx)(lc,{name:"VAR",variabletype:"",children:"x"}),(0,l.jsx)(lh,{name:"VALUE",children:(0,l.jsx)(li,{type:"logic_boolean",children:(0,l.jsx)(lc,{name:"BOOL",children:"TRUE"})})}),(0,l.jsx)(lu,{children:(0,l.jsx)(li,{type:"controls_flow_statements",children:(0,l.jsx)(lc,{name:"FLOW",children:"CONTINUE"})})})]})}),(0,l.jsx)(lu,{children:(0,l.jsxs)(li,{type:"notify",children:[(0,l.jsx)(lc,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lc,{name:"NOTIFICATION_SOUND",children:"silent"}),(0,l.jsx)(lh,{name:"MESSAGE",children:(0,l.jsx)(lx,{type:"text",children:(0,l.jsx)(lc,{name:"TEXT",children:"abc"})})})]})})]})})]})})]})})]})]})),lb=(0,r.Pi)(()=>{let{isDesktop:e}=(0,N.F)(),{toolbox:t,flyout:a,quick_strategy:s}=(0,j.oR)(),{hasSubCategory:n,is_search_loading:r,onMount:o,onSearch:d,onSearchBlur:c,onSearchClear:_,onSearchKeyUp:u,onToolboxItemClick:x,onToolboxItemExpand:m,onUnmount:h,sub_category_index:p,toolbox_dom:b}=t,{setFormVisibility:v}=s,{setVisibility:y,selected_category:g}=a,C=i.useRef(lj()),[k,w]=i.useState(!0);return(i.useEffect(()=>(o(C),()=>h()),[]),e)?(0,l.jsxs)("div",{className:"db-toolbox","data-testid":"dashboard__toolbox",children:[(0,l.jsx)(nK,{popover_message:(0,f.NC)("Click here to start building your Deriv Bot."),button_id:"db-toolbar__get-started-button",button_classname:"toolbar__btn toolbar__btn--icon toolbar__btn--start",buttonOnClick:()=>{v(!0),(0,tQ.m5)({subpage_name:"bot_builder",subform_source:"bot_builder",subform_name:"quick_strategy"})},button_text:(0,f.NC)("Quick strategy")}),(0,l.jsxs)("div",{id:"gtm-toolbox",className:"db-toolbox__content",children:[(0,l.jsx)("div",{className:"db-toolbox__header",children:(0,l.jsxs)("div",{className:"db-toolbox__title","data-testid":"db-toolbox__title",onClick:()=>{w(!k),y(!1)},children:[(0,f.NC)("Blocks menu"),(0,l.jsx)("span",{className:U()("db-toolbox__title__chevron",{"db-toolbox__title__chevron--active":k}),children:(0,l.jsx)(n6.Z,{fill:"var(--text-general)"})})]})}),(0,l.jsxs)("div",{className:U()("db-toolbox__content-wrapper",{active:k}),"data-testid":"db-toolbox__content-wrapper",children:[(0,l.jsx)(ls,{is_search_loading:r,onSearch:d,onSearchBlur:c,onSearchClear:_,onSearchKeyUp:u}),(0,l.jsx)("div",{className:"db-toolbox__category-menu",children:b&&Array.from(b.childNodes).map((e,t)=>{if("CATEGORY"===e.tagName.toUpperCase()){let a=n(e.children),s=p.includes(t);return(0,l.jsxs)("div",{className:U()("db-toolbox__row",{"db-toolbox__row--active":(null==g?void 0:g.getAttribute("id"))===(null==e?void 0:e.id)}),children:[(0,l.jsx)("div",{className:"db-toolbox__item",onClick:()=>{a?m(t):x(e)},children:(0,l.jsxs)("div",{className:"db-toolbox__category-text",children:[(0,l.jsx)("div",{className:"db-toolbox__label",children:(0,f.NC)(e.getAttribute("name"))}),a&&(0,l.jsx)("div",{className:U()("db-toolbox__category-arrow",{"db-toolbox__category-arrow--active":s}),children:(0,l.jsx)(n6.Z,{fill:"var(--text-general)"})})]})}),a&&s&&Array.from(e.childNodes).map(e=>(0,l.jsx)("div",{className:U()("db-toolbox__sub-category-row",{"db-toolbox__sub-category-row--active":(null==g?void 0:g.getAttribute("id"))===(null==e?void 0:e.id)}),onClick:()=>{x(e)},children:(0,l.jsx)(ea.Z,{size:"xxs",children:e.getAttribute("name")})},`db-toolbox__sub-category-row--${e.getAttribute("id")}`))]},`db-toolbox__row--${e.getAttribute("id")}`)}return null})})]})]})]}):null}),lv=(0,r.Pi)(()=>{var e;let{blockly_store:t}=(0,j.oR)(),{onMount:a,onUnmount:s,is_loading:n}=t;return(i.useEffect(()=>(a(),()=>{s()}),[]),n)?null:(null==(e=window.Blockly)?void 0:e.derivWorkspace)?(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(lb,{}),(0,l.jsx)(n4,{}),(0,l.jsx)(nq,{}),(0,l.jsx)(nY,{})]}):null}),ly=(0,r.Pi)(()=>{let{dashboard:e,app:t,run_panel:a,toolbar:s,quick_strategy:n,blockly_store:r}=(0,j.oR)(),{active_tab:o,active_tour:d,is_preview_on_popup:c}=e,{is_open:_}=n,{is_running:u}=a,{is_loading:x}=r,m=i.useRef(!1),h=i.useRef(!1),{isDesktop:p}=(0,N.F)(),{onMount:b,onUnmount:v}=t,y=i.useRef(null),g=null;i.useEffect(()=>(b(),()=>v()),[b,v]),i.useEffect(()=>{var e;let t=null==(e=window.Blockly)?void 0:e.derivWorkspace;return t&&u&&!m.current?(m.current=!0,t.addChangeListener(C)):k(),()=>{t&&m.current&&k()}},[u]);let C=e=>{let{is_reset_button_clicked:t}=s;"selected"===e.type||t?t&&k():((0,aX.J)((0,a$.xG)().workspace_change),k())},k=()=>{var e,t;m.current=!1,null==(t=window.Blockly)||null==(e=t.derivWorkspace)||e.removeChangeListener(C)};i.useEffect(()=>{var e;let t=null==(e=window.Blockly)?void 0:e.derivWorkspace;t&&!h.current&&(h.current=!0,t.addChangeListener(w))},[x]);let w=e=>{let{is_reset_button_clicked:t,setResetButtonState:a}=s;if("undo"===e.type){g=null;return}"delete"!==e.type||t||(g=e.blockId),"selected"===e.type&&g===e.oldElementId&&(T(),g=null),"change"===e.type&&"AMOUNT_LIMITS"===e.name&&"(min: 0.35 - max: 50000)"===e.newValue&&t&&a(!1)},T=()=>{(0,aX.J)((0,a$.xG)().block_delete,{label:(0,f.NC)("Undo"),onClick:e=>{window.Blockly.derivWorkspace.undo(),null==e||e()}})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:U()("bot-builder",{"bot-builder--active":1===o&&!c,"bot-builder--inactive":c,"bot-builder--tour-active":d}),children:(0,l.jsx)("div",{id:"scratch_div",ref:y,children:(0,l.jsx)(lv,{})})}),1===o&&(0,l.jsx)(sD,{is_mobile:!p}),(0,l.jsx)(sl,{}),(0,l.jsx)(sc,{}),_&&(0,l.jsx)(nL,{})]})});var lg=a(89250),lf=a(48870),lN=a(34948),lC=a(73981),lk=a(76953),lw=a(47376),lT=a(97374);let lE=(0,r.Pi)(()=>{let{dashboard:e}=(0,j.oR)(),{is_chart_modal_visible:t,setChartModalVisibility:a}=e;return(0,l.jsx)(i.Fragment,{children:t&&(0,l.jsx)(M,{boundary:".main",header:(0,f.NC)("Chart"),onClose:a,modalWidth:526,modalHeight:595,minWidth:526,minHeight:524,enableResizing:!0,children:(0,l.jsx)("div",{className:"chart-modal-dialog","data-testid":"chart-modal-dialog",children:(0,l.jsx)(lT.default,{show_digits_stats:!1})})})})}),lS=(0,r.Pi)(()=>{let{isDesktop:e}=(0,N.F)();return(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(w.a,{}),children:e&&(0,l.jsx)(lE,{})})}),lI=(0,r.Pi)(()=>{let{dashboard:e}=(0,j.oR)(),{active_tab:t,active_tour:a,setActiveTour:s,setTourDialogVisibility:n}=e,{is_close_tour:r,is_finished:o,handleJoyrideCallback:d,setIsCloseTour:c}=sA();return i.useEffect(()=>{(r||o)&&(c(!1),s(""))},[r,o,s,c]),(0,s_.$8)("onboard_tour_token")||0!==t||n(!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(sI,{}),a&&(0,l.jsx)(sm,{handleCallback:d,steps:sg,spotlightClicks:!0,disableCloseOnEsc:!0,disableOverlay:!1,disableOverlayClose:!0})]})}),lA={content:[],header:"",img:"",tour_step_key:1},lR=(0,r.Pi)(()=>{let{dashboard:e}=(0,j.oR)(),{onCloseTour:t,onTourEnd:a,setTourActiveStep:s,active_tour:n,active_tab:r,setActiveTour:o}=e,[d,c]=i.useState(1),[_,u]=i.useState(lA),{content:x,header:m,img:h,media:p,tour_step_key:b}=_,v=1===d?(0,f.NC)("Start"):(0,f.NC)("Next"),y=8===d?(0,f.NC)("Got it, thanks!"):v,g="onboarding"===n;return(i.useEffect(()=>{sC.forEach(e=>{e.tour_step_key===d&&u(e),s(d)})},[d]),i.useEffect(()=>{(0,s_.$8)("onboard_tour_token")||0!==r||o("onboarding")},[r,n]),n)?(0,l.jsxs)("div",{className:U()("dbot-slider",{"dbot-slider--active":1===d,"dbot-slider--tour-position":1!==d}),"data-testid":"onboarding-tour-mobile",children:[1!==b&&(0,l.jsxs)("div",{className:"dbot-slider__navbar",children:[(0,l.jsx)(ea.Z,{color:"less-prominent",weight:"less-prominent",lineHeight:"s",size:"xxs","data-testid":"dbot-onboard-slider__navbar",children:`${b-1}/7`}),(0,l.jsx)("span",{onClick:t,children:(0,l.jsx)(S.Z,{height:"20px",width:"20px","data-testid":"exit-onboard-tour",className:"db-contract-card__result-icon",color:"secondary"})})]}),m&&(0,l.jsx)(ea.Z,{color:"prominent",weight:"bold",align:"center",className:"dbot-slider__title",as:"span",lineHeight:"s",size:"xs",children:(0,f.NC)(m)}),p&&(0,l.jsx)("div",{className:"dbot-slider__media",children:(0,l.jsx)("video",{autoPlay:!0,loop:!0,controls:!0,preload:"auto",playsInline:!0,disablePictureInPicture:!0,controlsList:"nodownload",src:p})}),h&&(0,l.jsx)("div",{className:"dbot-slider__image",children:(0,l.jsx)("img",{src:h})}),x&&(0,l.jsx)(l.Fragment,{children:x.map(e=>(0,l.jsx)(ea.Z,{align:"center",color:"prominent",className:"dbot-slider__content",as:"div",lineHeight:"s",size:"xxs",children:e},e))}),(0,l.jsxs)("div",{className:"dbot-slider__status",children:[(0,l.jsx)("div",{className:"dbot-slider__progress-bar",children:(0,l.jsx)(sL,{step:d,steps_list:sC.map(e=>e.tour_step_key.toString()),onStepChange:c})}),(0,l.jsxs)("div",{className:"dbot-slider__button-group",children:[1===d&&(0,l.jsx)(sO,{onClick:()=>{t()},label:(0,f.NC)("Skip"),"data-testid":"skip-onboard-tour"}),![1,2,8].includes(d)&&(0,l.jsx)(sO,{onClick:()=>{c(d-1)},label:(0,f.NC)("Previous"),"data-testid":"prev-onboard-tour"}),(0,l.jsx)(sO,{type:"danger",onClick:()=>{c(d+1),a(d,g)},label:y,"data-testid":8===b?"finish-onboard-tour":"next-onboard-tour"})]})]})]}):null}),lL=(0,r.Pi)(e=>{let{is_mobile:t}=e;return(0,l.jsx)(l.Fragment,{children:t?(0,l.jsx)(lR,{}):(0,l.jsx)(lI,{})})});var lO=a(58995),lM=a(69498);let lD=e=>{let{dashboard_click_name:t,subpage_name:a}=e;aV.Analytics.trackEvent("ce_bot_form",{action:aq.om.DASHBOARD_CLICK,form_name:aq.oH,subpage_name:a,dashboard_click_name:t})},lU=e=>{let{announcement_name:t}=e;aV.Analytics.trackEvent("ce_bot_form",{action:aq.om.ANNOUNCEMENT_CLICK,form_name:aq.oH,subform_name:"announcements",subform_source:"dashboard",announcement_name:t})},lZ=e=>{let{announcement_name:t,announcement_action:a}=e;aV.Analytics.trackEvent("ce_bot_form",{action:aq.om.ANNOUNCEMENT_ACTION,form_name:aq.oH,subform_name:"announcements",subform_source:"dashboard",announcement_name:t,announcement_action:a})};var lF=a(5493);let lz=e=>{let{children:t,text_size:a,className:s}=e;return(0,l.jsx)("button",{type:"button",className:(0,s6.Z)("open-livechat__link",s),onClick:()=>window.LC_API.open_chat_window(),children:(0,l.jsx)(ea.Z,{size:a||"xs",weight:"bold",color:"brand-red-coral",children:t||(0,l.jsx)(f.Xx,{i18n_default_text:"live chat"})})})};var lP=a(69557);let lB=e=>{let{announce:t}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(lP.Z,{fill:"var(--text-info-blue)",width:"24",height:"26"}),t&&(0,l.jsx)("div",{className:"notification__icon--indicator"})]})},lX=e=>{let{title:t,announce:a}=e;return(0,l.jsx)(ea.Z,{size:"xs",line_height:"l",weight:a?"bold":"normal",styles:a?{}:{color:"var(--text-general)"},children:t})},l$=e=>{let{message:t,date:a,announce:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ea.Z,{size:"xs",line_height:"m",weight:s?"normal":"lighter",styles:s?{}:{color:"var(--text-general)"},children:t}),(0,l.jsx)(ea.Z,{size:"xxs",line_height:"xl",styles:{color:"var(--text-primary)"},children:a})]})},lH=e=>{let{announce_id:t}=e;switch(t){case"MOVING_STRATEGIES_ANNOUNCE":return(0,l.jsx)(tg.J,{icon:"IcMigrateStrategy",className:"category-type",style:{height:100,width:140}});case"BLOCKLY_ANNOUNCE":return(0,l.jsx)(tg.J,{icon:"IcUpgradeBlockly",className:"category-type",style:{height:120,width:120}});case"ACCUMULATOR_ANNOUNCE":return(0,l.jsx)(tg.J,{icon:"IcTradetypeAccu",className:"category-type",style:{height:80,width:80}});default:return null}},lV={UPDATES_QUICK_STRATEGY_MODAL_ANNOUNCE:{announcement:{id:"UPDATES_QUICK_STRATEGY_MODAL_ANNOUNCE",main_title:(0,f.NC)("Updates: Quick strategy modal"),confirm_button_text:(0,f.NC)("Explore now"),base_classname:"announcement-dialog",media:[(0,m.MT8)("assets/images/dbot-new-look-QS-and-accumulators-addition.gif")],title:[(0,l.jsx)(ea.Z,{as:"div",align:"left",size:"xs",className:"announcement-dialog__title",children:(0,l.jsx)(f.Xx,{i18n_default_text:"We've improved the Quick strategy (QS) modal for a better trading experience."})},0),(0,l.jsx)(f.Xx,{i18n_default_text:"<0>Whats new:</0>",components:[(0,l.jsx)("div",{},0)]},1)],unordered_list:[{id:0,text:(0,l.jsx)(f.Xx,{i18n_default_text:"<0>A revamped design</0> for improved functionality.",components:[(0,l.jsx)("strong",{},0)]})},{id:1,text:(0,l.jsx)(f.Xx,{i18n_default_text:"<0>Support for multiple trade types </0> with a filter to find strategies by preference.",components:[(0,l.jsx)("strong",{},0)]})},{id:2,text:(0,l.jsx)(f.Xx,{i18n_default_text:"<0>Integration of Accumulators Options</0> for direct strategy application within the QS modal.",components:[(0,l.jsx)("strong",{},0)]})}]},should_not_be_cancel:!0,switch_tab_on_confirm:tK.ve.BOT_BUILDER,should_toggle_qs_modal:!0},MOVING_STRATEGIES_ANNOUNCE:{announcement:{id:"MOVING_STRATEGIES_ANNOUNCE",main_title:(0,f.NC)("Moving strategies to Deriv Bot"),confirm_button_text:(0,f.NC)("Import strategy"),base_classname:"announcement-dialog",title:(0,l.jsx)(f.Xx,{i18n_default_text:"<0>Follow these steps to smoothly transfer your strategies:</0>",components:[(0,l.jsx)("strong",{},0)]}),numbered_content:[{id:0,text:(0,f.NC)("Download your strategy in XML format and import it to Deriv Bot.")},{id:1,text:(0,f.NC)("Run your updated strategy to check its performance.")},{id:2,text:(0,f.NC)("Save the updated strategy for quicker re-imports.")}],plain_text:[{id:0,text:(0,l.jsx)(f.Xx,{i18n_default_text:"<0>Note</0>: Uploading complex strategies may take some time. Saving them from Deriv Bot ensures quicker access later. If you have questions, contact us via <1/>.",components:[(0,l.jsx)("strong",{},0),(0,l.jsx)(lz,{className:""},1)]})}]},should_not_be_cancel:!0,should_toggle_load_modal:!0,switch_tab_on_confirm:tK.ve.BOT_BUILDER,onConfirm:()=>{(0,tQ.m5)({subpage_name:"bot_builder",subform_source:"announcements",subform_name:"load_strategy",load_strategy_tab:"recent"})}},BLOCKLY_ANNOUNCE:{announcement:{id:"BLOCKLY_ANNOUNCE",main_title:(0,f.NC)("Google Blockly v10 update"),base_classname:"announcement-dialog",title:(0,l.jsx)(f.Xx,{i18n_default_text:"We have updated our Blockly system in Deriv Bot from <0>version 3 to version 10</0>. This brings:",components:[(0,l.jsx)("strong",{},0)]}),numbered_content:[{id:0,text:(0,f.NC)("Better security.")},{id:1,text:(0,f.NC)("Faster performance.")},{id:2,text:(0,f.NC)("New features for developers.")}],plain_text:[{id:0,text:(0,l.jsx)(f.Xx,{i18n_default_text:"<0>Note</0>: Some complex strategies might face issues in the Bot Builder. If you have questions, contact us via <1/>.",components:[(0,l.jsx)("strong",{},0),(0,l.jsx)(lz,{className:""},1)]})}]},should_not_be_cancel:!0},ACCUMULATOR_ANNOUNCE:{announcement:{id:"ACCUMULATOR_ANNOUNCE",main_title:(0,f.NC)("Accumulators now on Deriv Bot"),confirm_button_text:(0,f.NC)("Try now"),cancel_button_text:(0,f.NC)("Learn more"),base_classname:"announcement-dialog",title:(0,l.jsx)(f.Xx,{i18n_default_text:"<0>Boost your trading strategy with Accumulators</0>",components:[(0,l.jsx)("strong",{},0)]}),content:[{id:0,text:(0,f.NC)("Trade Accumulators to build up potential profits with a structured approach.")},{id:1,text:(0,f.NC)("Customise your investment period and price levels to fit your trading goals.")},{id:2,text:(0,f.NC)("Manage risks while capitalising on market opportunities.")}]},switch_tab_on_cancel:tK.ve.TUTORIAL,switch_tab_on_confirm:tK.ve.BOT_BUILDER,onConfirm:()=>lY()}},lq={MODAL_BUTTON_ACTION:"modal_button_action",REDIRECT_BUTTON_ACTION:"redirect_button_action"},lG=[{id:"UPDATES_QUICK_STRATEGY_MODAL_ANNOUNCE",icon:lB,title:(0,f.NC)("Updated: Quick Strategy Modal"),message:(0,f.NC)("We've improved the Quick strategy (QS) modal for a better trading experience."),date:"18 November 2024 00:00 UTC",buttonAction:lq.MODAL_BUTTON_ACTION,actionText:""},{id:"MOVING_STRATEGIES_ANNOUNCE",icon:lB,title:(0,f.NC)("Moving strategies to Deriv Bot"),message:(0,f.NC)("Follow these steps to smoothly transfer your strategies"),date:"1 August 2024 00:00 UTC",buttonAction:lq.MODAL_BUTTON_ACTION,actionText:""},{id:"BLOCKLY_ANNOUNCE",icon:lB,title:(0,f.NC)("Google Blockly v10 update"),message:(0,f.NC)("We have updated our Blockly system in Deriv Bot from version 3 to version 10."),date:"24 July 2024 00:00 UTC",buttonAction:lq.MODAL_BUTTON_ACTION,actionText:""},{id:"ACCUMULATOR_ANNOUNCE",icon:lB,title:(0,f.NC)("Accumulators is now on Deriv Bot"),message:(0,f.NC)("Boost your trading strategy with Accumulators."),date:"2 July 2024 00:00 UTC",buttonAction:lq.MODAL_BUTTON_ACTION,actionText:""}],lY=()=>{Promise.resolve().then(a.bind(a,56505)).then(e=>{let t=Blockly.utils.xml.textToDom(e.default),a=null==t?void 0:t.querySelectorAll('field[name="TRADETYPECAT_LIST"]');null==a||a.forEach(e=>{e.textContent="accumulator"});let{derivWorkspace:s}=Blockly;(0,z.load)({block_string:Blockly.Xml.domToText(t),file_name:"Strategy with accumulator trade type",workspace:s,from:z.save_types.UNSAVED,drop_event:null,strategy_id:null,showIncompatibleStrategyDialog:null})}).catch(e=>{console.error("Failed to load strategy XML:",e)})},lK=(e,t,a)=>{switch(e.buttonAction){case lq.MODAL_BUTTON_ACTION:return t(e.id,lV[e.id]);case lq.REDIRECT_BUTTON_ACTION:{let t=lV[e.id].url_redirect;if(t)return a(t);return!1}default:return!1}},lW=e=>{let{announcement:t,handleOnConfirm:a,handleOnCancel:s,is_announce_dialog_open:n,setIsAnnounceDialogOpen:i,is_tablet:r}=e,{id:o,main_title:d,confirm_button_text:c,cancel_button_text:_,base_classname:u,title:x,content:m,numbered_content:h,plain_text:p,unordered_list:j,media:b}=t;return(0,l.jsx)(aP.Z,{portal_element_id:"modal_root",title:d,is_visible:n,confirm_button_text:c,onConfirm:a,cancel_button_text:_,onCancel:s,is_mobile_full_width:!0,has_close_icon:!0,onClose:()=>{i(!1),(0,tQ._W)({subform_name:"announcements",announcement_name:d})},className:r?`${u} ${u}--tablet`:u,children:(0,l.jsxs)("div",{className:`${u}__body-text`,children:[(0,l.jsx)("div",{className:`${u}__body-icon--${o.toLowerCase()}`,children:(0,l.jsx)(lH,{announce_id:o})}),Array.isArray(b)&&(0,l.jsx)(l.Fragment,{children:b.map((e,t)=>(0,l.jsx)("img",{className:`${u}__image`,src:e,alt:e},t))}),(0,l.jsxs)("div",{className:`${u}__body-main-content`,children:[(0,l.jsx)(ea.Z,{as:"p",size:"xs",className:`${u}__title--${o.toLowerCase()}`,children:x}),Array.isArray(m)&&m.map(e=>(0,l.jsxs)("div",{className:`${u}__body-item`,children:[(0,l.jsx)("div",{children:(0,l.jsx)(ev.Z,{fill:"var(--icon-black-plus)"})}),(0,l.jsx)(ea.Z,{as:"p",lineHeight:"l",size:"xs",children:null==e?void 0:e.text})]},null==e?void 0:e.id)),Array.isArray(j)&&(0,l.jsx)("ul",{className:`${u}__unordered_list`,children:j.map(e=>(0,l.jsx)("li",{children:(0,l.jsx)(ea.Z,{as:"div",lineHeight:"l",size:"xs",children:null==e?void 0:e.text})},null==e?void 0:e.id))},0),Array.isArray(h)&&(0,l.jsx)("ol",{className:`${u}__body-item--numbered`,children:h.map(e=>(0,l.jsx)(ea.Z,{as:"li",lineHeight:"xl",size:"xs",styles:{listStyle:"auto"},children:null==e?void 0:e.text},null==e?void 0:e.id))}),Array.isArray(p)&&(0,l.jsx)("div",{children:p.map(e=>(0,l.jsx)("span",{children:(0,l.jsx)(ea.Z,{lineHeight:"m",size:"xs",styles:{listStyle:"auto"},children:e.text},e.id)},null==e?void 0:e.id))})]})]})})},lJ=(0,r.Pi)(e=>{let{is_mobile:t,is_tablet:a,handleTabChange:s}=e,{load_modal:{toggleLoadModal:n},dashboard:{showVideoDialog:r},quick_strategy:{setFormVisibility:o}}=(0,j.oR)(),[d,c]=i.useState(!1),[_,u]=i.useState(!1),[x,m]=i.useState(null),[h,p]=i.useState({}),[b,v]=i.useState(0),y=(0,lg.s0)(),[g,N]=i.useState([]),C="announcements__label",k=e=>{var t;null==(t=localStorage)||t.setItem("bot-announcements",JSON.stringify(e))},w=e=>{let t=null;k({...JSON.parse(localStorage.getItem("bot-announcements")??"{}"),[e]:!1}),p(S())},T=(e,t)=>()=>{m(t),c(!0),u(e=>!e),lU({announcement_name:t.announcement.main_title}),w(e)},E=e=>()=>{y&&y(e)},S=()=>{let e=null;e=JSON.parse(localStorage.getItem("bot-announcements")??"{}");let t=[],a={};return lG.map(s=>{let n=!0;e&&Object.hasOwn(e,s.id)&&(n=e[s.id]),t.push({id:s.id,icon:(0,l.jsx)(s.icon,{announce:n}),title:(0,l.jsx)(lX,{title:s.title,announce:n}),message:(0,l.jsx)(l$,{message:s.message,date:s.date,announce:n}),buttonAction:lK(s,T,E),actionText:s.actionText}),a[s.id]=n}),N(t),a};i.useEffect(()=>{let e=S();k(e),p(e)},[]),i.useEffect(()=>{v(Object.values(h).filter(e=>e).length)},[h]);let I=()=>{let e=(0,lF.zw)().find(e=>4===e.id);e&&r({url:e.url,type:"url"})};return(0,l.jsxs)("div",{className:"announcements",children:[(0,l.jsxs)("button",{className:"announcements__button",onClick:()=>{u(e=>!e),_||(0,tQ.m5)({subform_name:"announcements",subform_source:"dashboard"})},"data-testid":"btn-announcements",children:[(0,l.jsx)(lO.Z,{fill:"var(--icon-black-plus)",iconSize:"sm"}),!t&&(0,l.jsx)(ea.Z,{size:"xs",line_height:"s",className:C,children:(0,f.NC)("Announcements")}),0!==b&&(0,l.jsx)("div",{className:"announcements__amount",children:(0,l.jsx)("p",{"data-testid":"announcements__amount",children:b})})]}),(0,l.jsx)("div",{className:"notifications__wrapper",children:(0,l.jsx)(lM.T,{className:U()("",{"notifications__wrapper--mobile":t,"notifications__wrapper--desktop":!t,"notifications__wrapper--tablet":a}),clearNotificationsCallback:()=>{k(Object.fromEntries(Object.keys(h).map(e=>[e,!1]))),p(S())},componentConfig:{clearButtonText:(0,f.NC)("Mark all as read"),modalTitle:(0,f.NC)("Announcements"),noNotificationsMessage:"",noNotificationsTitle:""},isOpen:_,setIsOpen:u,notifications:g,excludedClickOutsideClass:C,...t&&{appElement:document.getElementById("modal_root")}})}),(null==x?void 0:x.announcement)&&(0,l.jsx)(lW,{announcement:x.announcement,is_announce_dialog_open:d,setIsAnnounceDialogOpen:c,handleOnCancel:(null==x?void 0:x.should_not_be_cancel)?null:()=>{var e;lZ({announcement_name:null==x?void 0:x.announcement.main_title,announcement_action:null==x?void 0:x.announcement.cancel_button_text}),(null==x?void 0:x.switch_tab_on_cancel)&&(s(x.switch_tab_on_cancel),"ACCUMULATOR_ANNOUNCE"===x.announcement.id&&I()),null==x||null==(e=x.onCancel)||e.call(x),m(null)},handleOnConfirm:()=>{var e;lZ({announcement_name:null==x?void 0:x.announcement.main_title,announcement_action:null==x?void 0:x.announcement.confirm_button_text}),(null==x?void 0:x.switch_tab_on_confirm)&&s(x.switch_tab_on_confirm),(null==x?void 0:x.should_toggle_qs_modal)&&o(!0),(null==x?void 0:x.should_toggle_load_modal)&&n(),null==x||null==(e=x.onConfirm)||e.call(x),m(null)},is_tablet:a})]})});var lQ=a(21317),l0=a(96475),l1=a(69483),l8=a.n(l1),l2=a(26961),l3=a.n(l2);let l7=(0,r.Pi)(()=>{let{load_modal:e,dashboard:t}=(0,j.oR)(),{is_delete_modal_open:a,onToggleDeleteDialog:s,selected_strategy_id:n,setDashboardStrategies:i,loadStrategyToBuilder:r,refreshStrategiesTheme:o,resetBotBuilderStrategy:d}=e,{setOpenSettings:c}=t,_=async(e,t)=>{t.length?(n===e&&await r(null==t?void 0:t[0]),await o()):d()},u=async e=>{let t=(await (0,z.getSavedWorkspaces)()).filter(t=>t.id!==e);i(t),l8().setItem("saved_workspaces",l3().compress(JSON.stringify(t))),await _(e,t),s(!1)};return(0,l.jsx)("div",{children:(0,l.jsxs)(aP.Z,{title:(0,f.NC)("Delete bot"),is_visible:a,confirm_button_text:(0,f.NC)("Yes, delete"),onConfirm:()=>{u(n),s(!1),c(a$.tx.BOT_DELETE)},cancel_button_text:(0,f.NC)("No"),onCancel:()=>{s(!1)},is_mobile_full_width:!1,className:"dc-dialog__delete-strategy--delete",has_close_icon:!0,children:[(0,l.jsx)("div",{children:(0,l.jsxs)(ea.Z,{color:"prominent",lineHeight:"s",size:"xs",children:[(0,f.NC)("Your bot will be permanently deleted when you hit "),(0,l.jsx)("strong",{children:(0,f.NC)("Yes, delete.")})]})}),(0,l.jsx)("div",{children:(0,l.jsx)(ea.Z,{color:"prominent",lineHeight:"xl",size:"xs",children:(0,f.NC)("Are you sure you want to delete it?")})})]})})}),l9=e=>{let[t,a]=i.useState(!1),s=e=>{"ESCAPE"===e.key.toUpperCase()&&a(!1)},n=t=>{var s;(null==e||null==(s=e.current)?void 0:s.contains(t.target))||a(!1)};return i.useEffect(()=>(document.addEventListener("keydown",s,!0),document.addEventListener("click",n,!0),()=>{document.removeEventListener("keydown",s,!0),document.removeEventListener("click",n,!0)}),[]),{is_dropdown_visible:t,setDropdownVisibility:a}};var l5=a(85127),l4=a(37575),l6=a(42754),ie=a(33571);let it={OPEN:"open",SAVE:"save",DELETE:"delete",INIT:"init"},ia=[{type:it.OPEN,icon:(0,l.jsx)(l5.Z,{fill:"var(--text-general)"}),label:(0,l.jsx)(f.Xx,{i18n_default_text:"Open"})},{type:it.SAVE,icon:(0,l.jsx)(l6.Z,{fill:"var(--text-general)",className:"icon-general-fill-path",iconSize:"xs",path:"",opacity:.8}),label:(0,l.jsx)(f.Xx,{i18n_default_text:"Save"})},{type:it.DELETE,icon:(0,l.jsx)(l4.Z,{fill:"var(--text-general)"}),label:(0,l.jsx)(f.Xx,{i18n_default_text:"Delete"})}],is=(0,r.Pi)(e=>{let{workspace:t,index:a}=e,{dashboard:s,load_modal:n,save_modal:r}=(0,j.oR)(),{setActiveTab:o}=s,{toggleSaveModal:d,updateBotName:c}=r,{dashboard_strategies:_=[],getSaveType:u,getSelectedStrategyID:x,loadFileFromRecent:m,onToggleDeleteDialog:h,previewed_strategy_id:p,selected_strategy_id:b,setSelectedStrategyId:v}=n,y=i.useRef(null),g=i.useRef(null),f=i.useRef(!1),{setDropdownVisibility:C,is_dropdown_visible:k}=l9(g),{isDesktop:w}=(0,N.F)();i.useEffect(()=>{let e;return(null==_?void 0:_.length)&&0===a&&!f.current&&(e=setTimeout(()=>{var e;f.current=!0,null==y||null==(e=y.current)||e.click()},50)),()=>{e&&clearTimeout(e)}},[_,a]);let T=async()=>{await m(),o(tK.ve.BOT_BUILDER),lD({dashboard_click_name:"open",subpage_name:"bot_builder"})},E=()=>{c(null==t?void 0:t.name),d(),lD({dashboard_click_name:"save",subpage_name:"dashboard"})},S=async e=>{switch(v(t.id),e){case it.OPEN:await T();break;case it.SAVE:E();break;case it.DELETE:h(!0),lD({dashboard_click_name:"delete",subpage_name:"dashboard"})}},I=b===t.id&&k,A=w?"xs":"xxs";return(0,l.jsxs)("div",{className:U()("bot-list__item",{"bot-list__item--selected":p===t.id,"bot-list__item--loaded":_,"bot-list__item--min":!!(null==_?void 0:_.length)&&!w}),ref:y,onClick:e=>{e.stopPropagation(),k&&C(!1),x(t.id),S(it.INIT)},children:[(0,l.jsx)("div",{className:"bot-list__item__label",children:(0,l.jsx)("div",{className:"text-wrapper",title:t.name,children:(0,l.jsx)(ea.Z,{align:"left",as:"p",size:A,lineHeight:"l",children:t.name})})}),(0,l.jsx)("div",{className:"bot-list__item__time-stamp",children:(0,l.jsx)(ea.Z,{align:"left",as:"p",size:A,lineHeight:"l",children:(0,z.timeSince)(t.timestamp)})}),(0,l.jsxs)("div",{className:"bot-list__item__load-type",children:[st(t.save_type,"bot-list__item__load-type__icon--active"),(0,l.jsx)("div",{className:"bot-list__item__load-type__icon--saved",children:(0,l.jsx)(ea.Z,{align:"left",as:"p",size:A,lineHeight:"l",children:u(t.save_type)})})]}),w?(0,l.jsx)("div",{className:"bot-list__item__actions",children:ia.map(e=>(0,l.jsx)("div",{className:"bot-list__item__actions__action-item",onClick:t=>{t.stopPropagation(),S(e.type)},children:(0,l.jsx)($.Z,{alignment:"top",message:e.label,zIndex:"9999",children:e.icon})},e.type))}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"bot-list__item__actions",children:(0,l.jsx)("button",{ref:g,onClick:e=>{e.stopPropagation(),C(!k),v(t.id)},tabIndex:0,children:(0,l.jsx)(ie.Z,{height:"20px",width:"20px"})})}),(0,l.jsx)("div",{className:U()("bot-list__item__responsive",{"bot-list__item__responsive--active":I,"bot-list__item__responsive--min":_.length<=5}),children:ia.map(e=>(0,l.jsxs)("div",{className:"bot-list__item__responsive__menu",onClick:t=>{t.stopPropagation(),S(e.type)},children:[(0,l.jsx)("div",{className:"bot-list__item__responsive__menu__icon",children:e.icon}),(0,l.jsx)(ea.Z,{color:"prominent",className:"bot-list__item__responsive__menu__item",as:"p",size:"xs",children:e.label})]},e.type))})]})]},t.id)}),il=[{label:(0,f.NC)("Bot name"),className:"bot-list__header__label"},{label:(0,f.NC)("Last modified"),className:"bot-list__header__time-stamp"},{label:(0,f.NC)("Status"),className:"bot-list__header__load-type"}],ii=(0,r.Pi)(()=>{let{load_modal:e,dashboard:t}=(0,j.oR)(),{setDashboardStrategies:a,dashboard_strategies:s}=e,{setStrategySaveType:n,strategy_save_type:r}=t,{isDesktop:o}=(0,N.F)(),d=i.useRef(!1),c=i.useRef(!1);return(i.useEffect(()=>{n(""),(async()=>{a(await (0,z.getSavedWorkspaces)()),c.current||(c.current=!0)})()},[r]),i.useEffect(()=>{(null==s?void 0:s.length)||d.current||(d.current=!0)},[]),null==s?void 0:s.length)?(0,l.jsxs)("div",{className:"bot-list__container",children:[(0,l.jsxs)("div",{className:"bot-list__wrapper",children:[(0,l.jsx)("div",{className:"bot-list__title",children:(0,l.jsx)(ea.Z,{size:o?"s":"xs",weight:"bold",children:(0,l.jsx)(f.Xx,{i18n_default_text:"Your bots:"})})}),(0,l.jsx)("div",{className:"bot-list__header",children:il.map(e=>{let{label:t,className:a}=e;return(0,l.jsx)("div",{className:a,children:(0,l.jsx)(ea.Z,{size:o?"xs":"xxs",weight:"bold",children:t})},t)})}),(0,l.jsx)("div",{className:"bot-list__table",children:s.map(e=>(0,l.jsx)(is,{workspace:e},e.id))})]}),(0,l.jsx)(l7,{})]}):null}),ir=(0,r.Pi)(e=>{let{is_mobile:t,has_dashboard_strategies:a}=e,{dashboard:s,load_modal:n,quick_strategy:r}=(0,j.oR)(),{toggleLoadModal:o,setActiveTabIndex:d}=n,{isDesktop:c}=(0,N.F)(),{onCloseDialog:_,dialog_options:u,is_dialog_open:x,setActiveTab:m,setPreviewOnPopup:h}=s,{setFormVisibility:p}=r,b=()=>{o(),d(t?1:2),m(tK.ve.BOT_BUILDER)},v=()=>{o(),d(+!t),m(tK.ve.BOT_BUILDER)},y=[{id:"my-computer",icon:t?(0,l.jsx)(aQ.Z,{height:"48px",width:"48px"}):(0,l.jsx)(a0.Z,{height:"48px",width:"48px"}),content:t?(0,l.jsx)(f.Xx,{i18n_default_text:"Local"}):(0,l.jsx)(f.Xx,{i18n_default_text:"My computer"}),callback:()=>{v(),(0,tQ.m5)({subpage_name:"bot_builder",subform_source:"dashboard",subform_name:"load_strategy",load_strategy_tab:"local"})}},{id:"google-drive",icon:(0,l.jsx)(aW.Z,{height:"48px",width:"48px"}),content:(0,l.jsx)(f.Xx,{i18n_default_text:"Google Drive"}),callback:()=>{b(),(0,tQ.m5)({subpage_name:"bot_builder",subform_source:"dashboard",subform_name:"load_strategy",load_strategy_tab:"google drive"})}},{id:"bot-builder",icon:(0,l.jsx)(lQ.Z,{height:"48px",width:"48px"}),content:(0,l.jsx)(f.Xx,{i18n_default_text:"Bot builder"}),callback:()=>{m(tK.ve.BOT_BUILDER),lD({dashboard_click_name:"bot_builder",subpage_name:"bot_builder"})}},{id:"quick-strategy",icon:(0,l.jsx)(l0.Z,{height:"48px",width:"48px"}),content:(0,l.jsx)(f.Xx,{i18n_default_text:"Quick strategy"}),callback:()=>{m(tK.ve.BOT_BUILDER),p(!0),(0,tQ.m5)({subpage_name:"bot_builder",subform_source:"dashboard",subform_name:"quick_strategy"})}}];return i.useMemo(()=>(0,l.jsxs)("div",{className:U()("tab__dashboard__table",{"tab__dashboard__table--minimized":a&&t}),children:[(0,l.jsxs)("div",{className:U()("tab__dashboard__table__tiles",{"tab__dashboard__table__tiles--minimized":a&&t}),id:"tab__dashboard__table__tiles",children:[y.map(e=>{let{icon:s,content:n,callback:i,id:r}=e;return(0,l.jsxs)("div",{className:U()("tab__dashboard__table__block",{"tab__dashboard__table__block--minimized":a&&t}),children:[(0,l.jsx)("div",{className:U()("tab__dashboard__table__images",{"tab__dashboard__table__images--minimized":a}),width:"8rem",height:"8rem",icon:s,id:r,onClick:()=>{i()},children:s}),(0,l.jsx)(ea.Z,{color:"prominent",size:t?"xxs":"xs",children:n})]},r)}),c?(0,l.jsx)(av,{is_modal_open:x,className:"load-strategy__wrapper",header:(0,f.NC)("Load strategy"),onClickClose:()=>{h(!1),_()},height_offset:"80px",page_overlay:!0,children:(0,l.jsx)("div",{label:"Google Drive",className:"google-drive-label",children:(0,l.jsx)(aJ,{})})}):(0,l.jsx)(aP.Z,{title:u.title,is_visible:x,onCancel:_,is_mobile_full_width:!0,className:"dc-dialog__wrapper--google-drive",has_close_icon:!0,children:(0,l.jsx)(aJ,{})})]}),(0,l.jsx)(ii,{})]}),[x,a])}),io=()=>[{label:(0,f.NC)("Welcome to ProfitMax Trader Pro!"),content:[{data:(0,f.NC)("Trade smarter, not harder  let the bot handle it.")},{data:(0,f.NC)("Check out these guides and FAQs to learn more about building your bot:")}],link:!1},{label:(0,f.NC)("Guide"),content:[{data:(0,f.NC)("Deriv Bot - your automated trading partner")}],link:!0},{label:(0,f.NC)("FAQs"),content:[{data:(0,f.NC)("What is Deriv Bot?"),faq_id:"faq-0"},{data:(0,f.NC)("Where do I find the blocks I need?"),faq_id:"faq-1"},{data:(0,f.NC)("How do I remove blocks from the workspace?"),faq_id:"faq-2"}],link:!0}],id=(0,r.Pi)(()=>{let{isDesktop:e}=(0,N.F)(),{dashboard:t}=(0,j.oR)(),a=b(),[s,n]=i.useState(!1),{active_tour:r,is_info_panel_visible:o,setActiveTab:d,setActiveTabTutorial:c,setInfoPanelVisibility:_,setFaqTitle:u}=t,x=(e,t,a)=>{let s=e?d(tK.ve.TUTORIAL):null,n="Guide"===t?c(0):c(1);return u(a),{tutorial_link:s,tutorial_label:n}},m=()=>{_(!1),n(!1),localStorage.setItem("dbot_should_show_info",JSON.stringify(Date.now()))};i.useEffect(()=>{a?n(!1):o?n(!0):n(!1)},[a,o]);let h=()=>(0,l.jsxs)("div",{className:"db-info-panel",children:[(0,l.jsx)("div",{"data-testid":"close-icon",className:"db-info-panel__close-action",onClick:m,children:(0,l.jsx)(S.Z,{height:"18px",width:"18px",fill:"var(--text-prominent)"})}),io().map(t=>{let{label:a,content:s,link:n}=t;return(0,l.jsxs)("div",{children:[(0,l.jsx)(ea.Z,{color:"prominent",lineHeight:"xxl",size:e?"m":"s",weight:"bold",as:"h1",children:a}),s.map(t=>(0,l.jsx)(ea.Z,{className:U()("db-info-panel__card",{"db-info-panel__content":n}),color:"prominent",lineHeight:"xl",as:"p",onClick:()=>x(n,a,t.faq_id),size:e?"s":"xxs",children:t.data},`info-panel-tour${t.data}`))]},`${a}-${s}`)})]});return e?!r&&(0,l.jsx)("div",{className:U()("tab__dashboard__info-panel",{"tab__dashboard__info-panel--active":o}),children:h()}):(0,l.jsx)(C.Z,{className:"statistics__modal statistics__modal--mobile",is_open:s,toggleModal:m,width:"440px",children:(0,l.jsx)(C.Z.Body,{children:h()})})}),ic=(0,r.Pi)(e=>{let{handleTabChange:t}=e,{load_modal:a,dashboard:s}=(0,j.oR)(),{dashboard_strategies:n}=a,{active_tab:r,active_tour:o}=s,d=!!(null==n?void 0:n.length),{isDesktop:c,isTablet:_}=(0,N.F)();return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("div",{className:U()("tab__dashboard",{"tab__dashboard--tour-active":o}),children:(0,l.jsxs)("div",{className:"tab__dashboard__content",children:[(0,l.jsx)(lJ,{is_mobile:!c,is_tablet:_,handleTabChange:t}),(0,l.jsxs)("div",{className:"quick-panel",children:[(0,l.jsxs)("div",{className:U()("tab__dashboard__header",{"tab__dashboard__header--listed":c&&d}),children:[!d&&(0,l.jsx)(ea.Z,{className:"title",as:"h2",color:"prominent",size:c?"sm":"s",lineHeight:"xxl",weight:"bold",children:(0,f.NC)("Load or build your bot")}),(0,l.jsx)(ea.Z,{as:"p",color:"prominent",lineHeight:"s",size:c?"s":"xxs",className:U()("subtitle",{"subtitle__has-list":d}),children:(0,f.NC)("Import a bot from your computer or Google Drive, build it from scratch, or start with a quick strategy.")})]}),(0,l.jsx)(ir,{has_dashboard_strategies:d,is_mobile:!c})]})]})}),(0,l.jsx)(id,{}),0===r&&(0,l.jsx)(lL,{is_mobile:!c})]})}),i_=()=>(0,l.jsx)("div",{className:"toolbar__section","data-testid":"dt_run_strategy",children:(0,l.jsx)(t2,{className:"toolbar__animation"})}),iu=(0,i.lazy)(()=>a.e("902").then(a.bind(a,19375))),ix=(0,i.lazy)(()=>a.e("819").then(a.bind(a,54230))),im=(0,i.lazy)(()=>a.e("80").then(a.bind(a,69080))),ih=(0,i.lazy)(()=>a.e("716").then(a.bind(a,18725))),ip=(0,i.lazy)(()=>Promise.resolve().then(a.bind(a,97374))),ij=(0,i.lazy)(()=>a.e("78").then(a.bind(a,51716))),ib=(0,i.lazy)(()=>a.e("263").then(a.bind(a,41146))),iv=(0,i.lazy)(()=>a.e("880").then(a.bind(a,53931))),iy=(0,i.lazy)(()=>a.e("719").then(a.bind(a,8741))),ig=(0,r.Pi)(()=>{var e;let{connectionStatus:t}=(0,p.T)(),{dashboard:a,load_modal:s,run_panel:n,quick_strategy:r,summary_card:o}=(0,j.oR)(),{active_tab:d,active_tour:c,is_chart_modal_visible:_,is_trading_view_modal_visible:u,setActiveTab:m,setWebSocketState:h,setActiveTour:b,setTourDialogVisibility:v}=a,{onEntered:y,dashboard_strategies:g}=s,{is_dialog_open:C,is_drawer_open:k,dialog_options:w,onCancelButtonClick:T,onCloseDialog:E,onOkButtonClick:S,stopBot:I}=n,{is_open:A}=r,{cancel_button_text:R,ok_button_text:L,title:O,message:M}=w,{clear:D}=o,{DASHBOARD:Z,BOT_BUILDER:F}=tK.ve,B=i.useRef(!0),X=["dashboard","bot_builder","chart","tutorial","analysis","tool","bots","ai","signal","invest"],{isDesktop:$}=(0,N.F)(),H=(0,lg.TH)(),V=(0,lg.s0)(),q=d,G=(q=null==(e=H.hash)?void 0:e.split("#")[1])?Number(X.indexOf(String(q))):d;i.useEffect(()=>{t!==aE.cR.OPENED&&null!==document.getElementById("db-animation__stop-button")&&(D(),I(),z.api_base.setIsRunning(!1),h(!1))},[D,t,h,I]),i.useEffect(()=>{A&&v(!1),B.current?(m(Number(G)),$||Y(Number(G)),B.current=!1):V(`#${X[d]||X[0]}`),""!==c&&b("")},[d]),i.useEffect(()=>{let e=setTimeout(()=>{var e,t,a;if(d===F&&(null==lN||null==(e=lN.derivWorkspace)?void 0:e.trashcan)){let e,s=window.innerHeight-250;e=k?(0,P.rK)()?380:window.innerWidth-460:(0,P.rK)()?20:window.innerWidth-100,null==lN||null==(a=lN.derivWorkspace)||null==(t=a.trashcan)||t.setTrashcanPosition(e,s)}},100);return()=>{clearTimeout(e)}},[d,k]),(0,i.useEffect)(()=>{let e;return g.length>0&&(e=setTimeout(()=>{(0,z.updateWorkspaceName)()})),()=>{e&&clearTimeout(e)}},[g,d]);let Y=i.useCallback(e=>{m(e);let t=tK.FK[e];if(t){let e=document.getElementById(t);setTimeout(()=>{null==e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},10)}},[d]);(0,i.useEffect)(()=>{let e=e=>{let{type:t,filename:a}=e.data||{};"botSelect"===t&&(Y(tK.ve.BOT_BUILDER),setTimeout(()=>{if(a){var e,t;null==(e=(t=window).loadBotXmlFile)||e.call(t,a)}},500))};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[]);let K=e=>{V(`/${e}`)};return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("div",{className:"main",children:(0,l.jsx)("div",{className:U()("main__container",{"main__container--active":c&&d===Z&&!$}),children:(0,l.jsxs)(lf.Z,{active_index:d,className:"main__tabs",onTabItemChange:y,onTabItemClick:e=>Y(e),top:!0,children:[(0,l.jsx)("div",{label:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(lC.Z,{height:"24px",width:"24px",fill:"var(--text-general)"}),(0,l.jsx)(f.Xx,{i18n_default_text:"Dashboard"})]}),id:"id-dbot-dashboard",children:(0,l.jsx)(ic,{handleTabChange:Y})}),(0,l.jsx)("div",{label:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(lk.Z,{height:"24px",width:"24px",fill:"var(--text-general)"}),(0,l.jsx)(f.Xx,{i18n_default_text:"Bot Builder"})]}),id:"id-bot-builder"}),(0,l.jsx)("div",{label:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(lw.Z,{height:"24px",width:"24px",fill:"var(--text-general)"}),(0,l.jsx)(f.Xx,{i18n_default_text:"Charts"})]}),id:_||u?"id-charts--disabled":"id-charts",children:(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(x.Z,{message:(0,f.NC)("Please wait, loading chart...")}),children:(0,l.jsx)(ip,{show_digits_stats:!1})})}),(0,l.jsx)("div",{label:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(sY.Z,{height:"16px",width:"16px",fill:"var(--text-general)",className:"icon-general-fill-g-path"}),(0,l.jsx)(f.Xx,{i18n_default_text:"Tutorials"})]}),id:"id-tutorials",children:(0,l.jsx)("div",{className:"tutorials-wrapper",children:(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(x.Z,{message:(0,f.NC)("Please wait, loading tutorials...")}),children:(0,l.jsx)(ij,{handleTabChange:Y})})})}),(0,l.jsx)("div",{label:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(f.Xx,{i18n_default_text:(0,f.NC)("\uD83D\uDCA1 Analysis")})}),id:"id-analysis",onClick:()=>K("analysis"),style:{cursor:"pointer"},children:(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(x.Z,{message:(0,f.NC)("Please wait, loading page...")}),children:(0,l.jsx)(ib,{})})}),(0,l.jsx)("div",{label:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(f.Xx,{i18n_default_text:(0,f.NC)("\uD83E\uDDF2 Tools")})}),id:"id-tool",onClick:()=>K("tool"),style:{cursor:"pointer"},children:(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(x.Z,{message:(0,f.NC)("Please wait, loading  page...")}),children:(0,l.jsx)(iv,{})})}),(0,l.jsx)("div",{label:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(f.Xx,{i18n_default_text:(0,f.NC)("\uD83E\uDD16 Bots")})}),id:"id-bots",onClick:()=>K("bots"),style:{cursor:"pointer"},children:(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(x.Z,{message:(0,f.NC)("Please wait, loading Bots page...")}),children:(0,l.jsx)(ix,{onBotSelect:()=>{Y(tK.ve.BOT_BUILDER)}})})}),(0,l.jsx)("div",{label:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(f.Xx,{i18n_default_text:(0,f.NC)("\uD83E\uDD1D CopyTrade")})}),id:"id-copy",onClick:()=>K("copy"),style:{cursor:"pointer"},children:(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(x.Z,{message:(0,f.NC)("Please wait, loading  page...")}),children:(0,l.jsx)(iy,{})})}),(0,l.jsx)("div",{label:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(f.Xx,{i18n_default_text:(0,f.NC)("\uD83D\uDD79 AI")})}),id:"id-ai",onClick:()=>K("ai"),style:{cursor:"pointer"},children:(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(x.Z,{message:(0,f.NC)("Please wait, loading AI page...")}),children:(0,l.jsx)(iu,{})})}),(0,l.jsx)("div",{label:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(f.Xx,{i18n_default_text:(0,f.NC)("\uD83D\uDCE2 Signal")})}),id:"id-signal",onClick:()=>K("signal"),style:{cursor:"pointer"},children:(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(x.Z,{message:(0,f.NC)("Please wait, loading Signal page...")}),children:(0,l.jsx)(im,{})})}),(0,l.jsx)("div",{label:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(f.Xx,{i18n_default_text:(0,f.NC)("\uD83D\uDCBC Invest")})}),id:"id-invest",onClick:()=>K("invest"),style:{cursor:"pointer"},children:(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(x.Z,{message:(0,f.NC)("Please wait, loading Invest page...")}),children:(0,l.jsx)(ih,{})})})]})})}),(0,l.jsxs)(tt.Z,{children:[(0,l.jsxs)("div",{className:"main__run-strategy-wrapper",children:[(0,l.jsx)(i_,{}),(0,l.jsx)(ab,{})]}),(0,l.jsx)(lS,{})]}),(0,l.jsx)(eG.Z,{children:!A&&(0,l.jsx)(ab,{})}),(0,l.jsx)(aP.Z,{cancel_button_text:R||(0,f.NC)("Cancel"),className:"dc-dialog__wrapper--fixed",confirm_button_text:L||(0,f.NC)("Ok"),has_close_icon:!0,is_mobile_full_width:!1,is_visible:C,onCancel:T,onClose:E,onConfirm:S||E,portal_element_id:"modal_root",title:O,children:M})]})});a(51156);let iN=(0,r.Pi)(()=>{var e,t,s,n,r;let[d,c]=i.useState(!1),[_,h]=i.useState(!0),b=(0,j.oR)(),{app:v,transactions:y,common:g,client:N}=b,{showDigitalOptionsMaltainvestError:C}=v,{is_dark_mode_on:w}=(0,aI.Z)(),{recovered_transactions:T,recoverPendingContracts:E}=y,S=i.useRef(!1),I=i.useRef(null),{connectionStatus:A}=(0,p.T)(),{initTrackJS:R}=aL();R(N.loginid),u({is_client_store_initialized:(null==N?void 0:N.is_logged_in)?!!(null==N||null==(e=N.account_settings)?void 0:e.email):!!N,is_logged_in:null==N?void 0:N.is_logged_in,loginid:null==N?void 0:N.loginid,landing_company_shortcode:null==N?void 0:N.landing_company_shortcode,currency:null==N?void 0:N.currency,residence:null==N?void 0:N.residence,email:null==N||null==(t=N.account_settings)?void 0:t.email,first_name:null==N||null==(s=N.account_settings)?void 0:s.first_name,last_name:null==N||null==(n=N.account_settings)?void 0:n.last_name});let L=(0,aT.PO)()??null;(0,aS.ZP)(L),(0,i.useEffect)(()=>{A===aE.cR.OPENED?(c(!0),g.setSocketOpened(!0)):A!==aE.cR.OPENED&&g.setSocketOpened(!1)},[g,A]);let{current_language:O}=g,M=document.documentElement;i.useEffect(()=>{null==M||M.setAttribute("lang",O.toLowerCase()),null==M||M.setAttribute("dir","ar"===O.toLowerCase()?"rtl":"ltr")},[O,M]);let D=i.useCallback(e=>{let{data:t}=e;if((null==t?void 0:t.msg_type)==="proposal_open_contract"&&!(null==t?void 0:t.error)){let{proposal_open_contract:e}=t;(null==e?void 0:e.status)==="open"||(null==T?void 0:T.includes(null==e?void 0:e.contract_id))||E(e)}},[T,E]);i.useEffect(()=>{(0,aU.setSmartChartsPublicPath)((0,m.MT8)("/js/smartcharts/"))},[]),i.useEffect(()=>{if(!S.current&&N.is_logged_in&&d&&(null===z.api_base||void 0===z.api_base?void 0:z.api_base.api)){var e;S.current=!0,I.current=null==(e=z.api_base.api.onMessage())?void 0:e.subscribe(D)}return()=>{if(S.current&&I.current){var e,t;S.current=!1,null==(e=(t=I.current).unsubscribe)||e.call(t)}}},[d,N.is_logged_in,N.loginid,D,A]),i.useEffect(()=>{C(N,g)},[N.is_options_blocked,null==(r=N.account_settings)?void 0:r.country_code,N.clients_country]);let U=()=>{z.ServerTime.init(g),v.setDBotEngineStores(),z.ApiHelpers.setInstance(v.api_helpers_store),Promise.resolve().then(a.bind(a,66311)).then(e=>{let{default:t}=e;t.init(b)})},Z=()=>{var e;U();let t=()=>{let{active_symbols:e}=z.ApiHelpers.instance;e.retrieveActiveSymbols(!0).then(()=>{h(!1)})};if(null===z.ApiHelpers||void 0===z.ApiHelpers||null==(e=z.ApiHelpers.instance)?void 0:e.active_symbols)t();else{let e=setInterval(()=>{var a;(null===z.ApiHelpers||void 0===z.ApiHelpers||null==(a=z.ApiHelpers.instance)?void 0:a.active_symbols)&&(clearInterval(e),t())},1e3)}};return(i.useEffect(()=>{d&&(U(),h(!0),N.is_logged_in||Z())},[d]),i.useEffect(()=>{N.is_logged_in&&N.is_landing_company_loaded&&d&&Z()},[N.is_landing_company_loaded,d,N.loginid]),(0,i.useEffect)(()=>{aO(!0),N&&aD(N)},[]),null==g?void 0:g.error)?null:_?(0,l.jsx)(x.Z,{message:(0,f.NC)("Initializing your account...")}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(aZ.f,{theme:w?"dark":"light",children:[(0,l.jsx)(az,{}),(0,l.jsxs)("div",{className:"bot-dashboard bot","data-testid":"dt_bot_dashboard",children:[(0,l.jsx)(aF,{}),(0,l.jsx)(ig,{}),(0,l.jsx)(ly,{}),(0,l.jsx)(aB,{}),(0,l.jsx)(aw,{}),(0,l.jsx)(o.Ix,{limit:3,draggable:!1}),(0,l.jsx)(k,{})]})]})})})},92465:function(e,t,a){a.d(t,{Z:()=>i});var s=a(85893),n=a(63387),l=a.n(n);let i=e=>{let{message:t,className:a,type:n}=e;return(0,s.jsx)("div",{className:l()("dc-field",a,{"dc-field--error":"error"===n,"dc-field--warn":"warn"===n}),children:t})}},20874:function(e,t,a){a.d(t,{Z:()=>m});var s=a(85893),n=a(67294),l=a(63387),i=a.n(l),r=a(82106),o=a(96298),d=a(14244),c=a(26088),_=a(92868),u=a(2502),x=a(6687);let m=e=>{let{alignment:t,children:a,className:l,classNameBubble:m,classNameTarget:h,classNameTargetIcon:p,counter:j,disable_message_icon:b,disable_target_icon:v,has_error:y,icon:g,id:f,is_open:N,is_bubble_hover_enabled:C,margin:k=0,message:w,onBubbleClose:T,onBubbleOpen:E,onClick:S=()=>void 0,relative_render:I=!1,should_disable_pointer_events:A=!1,should_show_cursor:R,zIndex:L="1",data_testid:O,arrow_styles:M}=e,D=n.useRef(),[U,Z]=n.useState(void 0),[F,z]=n.useState(!1),{isDesktop:P}=(0,u.F)(),[B,X]=(0,o.X)(null,!0),[$,H]=(0,o.m)(),V=n.useMemo(()=>!P&&void 0===N,[P,N]);n.useEffect(()=>{D.current&&Z(D.current)},[y]),n.useEffect(()=>{!X&&V&&z(!1)},[X,V]);let q=()=>{E&&E()},G=()=>{T&&T()},Y=i()(p,g),K=X&&w&&(!V||F);return(0,s.jsxs)("div",{ref:B,className:i()({"dc-popover__wrapper":I}),onClick:e=>{S(e),V&&z(!F)},"data-testid":"dt_popover_wrapper",children:[I&&(0,s.jsx)("div",{className:"dc-popover__container",style:{zIndex:L},children:(0,s.jsx)("div",{ref:D,className:"dc-popover__container-relative","data-testid":"dt_popover_relative_container"})}),(U||!I)&&(0,s.jsx)(r.Popover,{isOpen:N??(K||C&&H),positions:[t],padding:k+8,containerClassName:i()({"react-tiny-popover-container--disabled-pointer-event":A,"react-tiny-popover-cursor-option":R}),...I?{parentElement:U,contentLocation:e=>{let{childRect:a,popoverRect:s,nudgedLeft:n}=e,l=document.body.clientWidth,i=a.right+(s.width-a.width/2),r=0,o=0;switch(t){case"left":o=-1*Math.abs((s.height>s.width?n:s.width)+k),r=a.height>s.height?(a.height-s.height)/2:-((s.height-a.height)/2*1);break;case"right":o=s.width+k,r=a.height>s.height?(a.height-s.height)/2:-((s.height-a.height)/2*1);break;case"top":o=i>l?-1*Math.abs(i-l):0,r=-1*Math.abs(s.height+k);break;case"bottom":o=i>l?-1*Math.abs(i-l):0,r=a.height+k}return{top:r,left:o}}}:{containerStyle:{zIndex:L}},content:e=>{let{position:t,childRect:a,popoverRect:n}=e;return(0,s.jsx)(r.ArrowContainer,{position:t,childRect:a,popoverRect:n,arrowColor:y?"var(--status-danger)":"var(--general-active)",arrowSize:5,arrowStyle:I?{borderTop:"10px solid transparent",borderLeft:"10px solid transparent",borderRight:`10px solid ${y?"var(--status-danger)":"var(--general-active)"}`,transform:"rotate(315deg)",right:"0px",top:"5px",height:"10px",margin:"auto",bottom:"0px"}:{...M},children:(0,s.jsxs)("div",{id:f,onMouseEnter:q,onMouseLeave:G,className:i()(m,"dc-popover__bubble",{"dc-popover__bubble--error":y}),ref:$,children:[!b&&"info"===g&&(0,s.jsx)("i",{className:"dc-popover__bubble__icon",children:(0,s.jsx)(d.Z,{})}),y&&(0,s.jsx)(x.Z,{size:"xxs",color:"colored-background",children:w})||(0,s.jsx)(x.Z,{lineHeight:"md",size:"xxs",className:"dc-popover__bubble__text",children:w})]})})},children:(0,s.jsx)("div",{"data-testid":O,className:i()("dc-popover",l),id:f,children:(0,s.jsxs)("div",{className:i()(h,"dc-popover__target"),children:[!v&&(0,s.jsxs)("i",{className:w?"dc-popover__target__icon":"dc-popover__target__icon--disabled",children:["info"===g&&(0,s.jsx)(d.Z,{className:Y}),"question"===g&&(0,s.jsx)(_.Z,{className:Y}),"dot"===g&&(0,s.jsx)(c.Z,{className:Y}),"counter"===g&&(0,s.jsx)("span",{className:Y,children:j})]}),a]})})})]})}},3550:function(e,t,a){a.d(t,{Z:()=>n});var s=a(48870);a(6010);let n=s.Z},48870:function(e,t,a){a.d(t,{Z:()=>u});var s=a(85893),n=a(67294),l=a(63387),i=a.n(l);let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>void 0,t=n.useRef(!1);t.current||(e(),t.current=!0)};var o=a(87247),d=a(85247);let c=e=>{let{className:t,count:a}=e;return(0,s.jsx)("div",{className:i()("dc-counter",t),children:a})},_=e=>{let{active_icon_color:t="",active_tab_ref:a,bottom:l=!1,className:r="",count:o,header_content:_,header_fit_content:u=!1,icon_color:x="",icon_size:m=0,icon:h,id:p="",is_active:j,is_label_hidden:b,is_scrollable:v,label:y,onClick:g,setActiveLineStyle:f,top:N}=e;n.useEffect(()=>{f()},[o,y,_,f]);let C=i()("dc-tabs__item",{"dc-tabs__active":j,[`dc-tabs__active--${r}`]:r&&j,"dc-tabs__item--top":N,"dc-tabs__item--bottom":l,"dc-tabs__item--header-fit-content":u,"dc-tabs__item--is-hidden":b,[`dc-tabs__item--${r}`]:r,"dc-tabs__item--is-scrollable-and-active":v&&j}),k=j?t:x;return(0,s.jsxs)("li",{id:p,className:C,style:{color:k},onClick:g,ref:a,children:[h&&(0,s.jsx)(d.J,{icon:h,size:m,custom_color:k,className:"dc-tabs__item__icon"}),_||y,!!o&&(0,s.jsx)(c,{className:"dc-tabs__item__counter",count:o})]})};a(6010);let u=e=>{let t,{active_icon_color:a="",active_index:l=0,background_color:d="",bottom:c=!1,center:u=!1,children:x,className:m="",fit_content:h=!1,has_active_line:p=!0,has_bottom_line:j=!0,header_fit_content:b=!1,history:v,icon_color:y="",icon_size:g=0,is_100vw:f=!1,is_full_width:N=!1,is_overflow_hidden:C=!1,is_scrollable:k=!1,onTabItemClick:w,should_update_hash:T=!1,single_tab_has_no_label:E=!1,top:S}=e,[I,A]=n.useState({}),R=n.useRef(null),L=n.useRef(null),O=e=>{v.replace(`${v.location.pathname}${window.location.search}#${e}`)},M=n.useCallback(()=>{var e,t;let a=null==L||null==(e=L.current)?void 0:e.getBoundingClientRect(),s=null==R||null==(t=R.current)?void 0:t.getBoundingClientRect();a&&s?A({left:s.left-a.left,width:s.width}):setTimeout(()=>{M()},500)},[]),D=0;r(()=>{if(D=l,T){let t=location.hash.slice(1),a=x.findIndex(e=>e&&e.props&&e.props.hash===t);if(a>-1)D=a;else{var e;let t=null==(e=x[D])?void 0:e.props,a=t&&t.hash;a&&O(a)}}M()});let[U,Z]=n.useState(D);n.useEffect(()=>{U>=0&&l!==U&&(null==w||w(U)),M()},[U,M]),n.useEffect(()=>{l>=0&&l!==U&&Z(l)},[l]);let F=e=>{if(T){var t;O(null==(t=x[e])?void 0:t.props["data-hash"])}Z(e),M()},z=x.filter(e=>e);return t=k?"unset":h?"150px":`${(100/z.length).toFixed(2)}%`,(0,s.jsxs)("div",{className:i()("dc-tabs",{[`dc-tabs--${m}`]:m,"dc-tabs--top":S,"dc-tabs--100vw":f}),style:{"--tab-width":`${t}`,background:d},children:[(0,s.jsx)("div",{className:i()({[`dc-tabs__list--header--${m}`]:m}),children:(0,s.jsx)("ul",{className:i()("dc-tabs__list",{"dc-tabs__list--top":S,"dc-tabs__list--border-bottom":j,"dc-tabs__list--bottom":c,"dc-tabs__list--center":u,"dc-tabs__list--header-fit-content":b,"dc-tabs__list--full-width":N,[`dc-tabs__list--${m}`]:m,"dc-tabs__list--overflow-hidden":C}),ref:L,children:(0,s.jsxs)(o.Z,{className:"dc-themed-scrollbars-wrapper",is_only_horizontal:!0,is_scrollbar_hidden:!0,is_bypassed:!k,children:[n.Children.map(x,(e,t)=>{if(!e)return null;let{icon:n,label:l,id:i}=e.props,r=e.props["data-header-content"],o=e.props["data-count"];return(0,s.jsx)(_,{active_icon_color:a,className:m,count:o,icon:n,icon_color:y,icon_size:g,is_active:t===U,is_label_hidden:1===x.length&&E,label:l,id:i,is_scrollable:k,top:S,bottom:c,header_fit_content:b,active_tab_ref:t===U?R:null,header_content:r,onClick:()=>F(t),setActiveLineStyle:M},l)}),p&&!k&&(0,s.jsx)("span",{className:i()("dc-tabs__active-line",{"dc-tabs__active-line--top":S,"dc-tabs__active-line--bottom":c,"dc-tabs__active-line--fit-content":h,"dc-tabs__active-line--header-fit-content":b,"dc-tabs__active-line--is-hidden":1===x.length&&E}),style:I})]})})}),(0,s.jsx)("div",{className:i()("dc-tabs__content",{[`dc-tabs__content--${m}`]:m}),children:n.Children.map(x,(e,t)=>e?t===U?e.props.children:void 0:null)})]})}},66766:function(e,t,a){a.d(t,{Z:()=>i});var s=a(67294),n=a(83571),l=a(36754);let i=()=>{let[e,t]=(0,s.useState)(!1),{data:a}=(0,l.Z)(!0),[i,r]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e;if(null==a?void 0:a.marketing_growthbook){let a=0;e=setInterval(()=>{var s;if(a>20){clearInterval(e),r(!1);return}a+=1,(null===n.Analytics||void 0===n.Analytics||null==(s=n.Analytics.getInstances())?void 0:s.ab)&&(t(!0),clearInterval(e))},500)}else r(!1);return()=>{clearInterval(e)}},[a.marketing_growthbook]),{isGBLoaded:e,isGBAvailable:i}}},36754:function(e,t,a){a.d(t,{Z:()=>r});var s=a(67294),n=a(12838),l=JSON.parse('{"cs_chat_livechat":true,"cs_chat_whatsapp":true,"marketing_growthbook":true,"passkeys":true,"tracking_GTM":true,"tracking_datadog":true,"tracking_hotjar":true,"tracking_rudderstack":true}');let i=async function(){let e=await fetch("https://app-config-prod.firebaseio.com/remote_config/deriv-app.json");if(!e.ok)throw Error("Remote Config Server is out of reach!");return e.json()},r=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,a]=(0,s.useState)(l);return(0,s.useEffect)(()=>{e&&i().then(async e=>{await n.gb.hashObject(e)!==await n.gb.hashObject(t)&&a(e)}).catch(e=>{console.error("Remote Config error: ",e)})},[e]),{data:t}}},76124:function(e,t,a){a.d(t,{ZP:()=>d,Lv:()=>o});var s=a(67294),n=a(89471),l=a(83571),i=a(66766);let r=e=>{let{featureFlag:t,defaultValue:a}=e,r=void 0!==a&&a,[o,d]=(0,s.useState)((null===l.Analytics||void 0===l.Analytics?void 0:l.Analytics.getFeatureValue(t,r))??r),{isGBLoaded:c}=(0,i.Z)(),_=(0,n.tm)();return"undefined"!=typeof window&&(window.Analytics=l.Analytics),(0,s.useEffect)(()=>{if(c){var e,a,s,n;if(null===l.Analytics||void 0===l.Analytics||null==(e=l.Analytics.getInstances())?void 0:e.ab){let e=()=>{let e=null===l.Analytics||void 0===l.Analytics?void 0:l.Analytics.getFeatureValue(t,r);_()&&d(e)};e(),null===l.Analytics||void 0===l.Analytics||null==(n=l.Analytics.getInstances())||null==(s=n.ab)||null==(a=s.GrowthBook)||a.setRenderer(()=>{e()})}}},[c,r,t,_]),{featureFlagValue:o,isGBLoaded:c}},o=()=>{let[e,t]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=Date.now(),a=setInterval(()=>{"function"==typeof window.Intercom?(t(!0),clearInterval(a)):Date.now()-e>=5e3&&clearInterval(a)},100);return()=>clearInterval(a)},[]),e},d=e=>{let{featureFlagValue:t}=r({featureFlag:"enable_intercom_dbot"}),a=(0,n.Gq)(t?"https://static.deriv.com/scripts/intercom/v1.0.2.js":null);(0,s.useEffect)(()=>{var s;let n;if(t&&"ready"===a&&(null==(s=window)?void 0:s.DerivInterCom))return window.DerivInterCom.initialize({hideLauncher:!0,token:e}),n=setInterval(()=>{var e;(null==(e=window)?void 0:e.Intercom)&&clearInterval(n)},500),()=>{clearInterval(n)}},[t,a,e])}},6654:function(e,t,a){a.d(t,{Z:()=>l});var s=a(67294),n=a(42575);let l=()=>{let{ui:e}=(0,n.oR)()??{ui:{setDarkMode:()=>{},is_dark_mode_on:!1}},{setDarkMode:t,is_dark_mode_on:a}=e;return{toggleTheme:(0,s.useCallback)(()=>{let e=document.querySelector("body");e&&(e.classList.contains("theme--dark")?(localStorage.setItem("theme","light"),e.classList.remove("theme--dark"),e.classList.add("theme--light"),t(!1)):(localStorage.setItem("theme","dark"),e.classList.remove("theme--light"),e.classList.add("theme--dark"),t(!0)))},[t]),is_dark_mode_on:a,setDarkMode:t}}},42683:function(e,t,a){a.d(t,{Z:()=>v});var s=a(85893),n=a(67294),l=a(96877),i=a(42575),r=a(37192),o=a(2502),d=a(63387),c=a.n(d),_=a(6687),u=a(97613),x=a(19405);let m=e=>{let{content_data:t,expanded:a=!1,test_id:l="dbot-acc-id",is_cursive:r=!1,no_collapsible:o=!0,has_subtitle:d=!0,font_size:m,...h}=e,[p,j]=(0,n.useState)(a),{quick_strategy:{selected_strategy:b}}=(0,i.oR)();if(!t)return null;let{content:v,header:y}=t,{expanded_subtitles_storage:g,setExpandedSubtitlesStorage:f}=h,N=`${y}__${b}`.split(" ").join("_").toLocaleLowerCase(),C=!!g&&g[N]||p||!d;return(0,s.jsxs)("div",{className:"dbot-accordion",children:[d&&(0,s.jsxs)("button",{className:c()("dbot-accordion__navbar",{"dbot-accordion__navbar--no-event":!o}),"data-testid":l,onClick:e=>{e.preventDefault(),j(!C),g&&f&&f({...g,[N]:!C})},children:[(0,s.jsx)("div",{className:c()("dbot-accordion__header",{"dbot-accordion__header--cursive":r}),children:(0,s.jsx)(_.Z,{as:"span",size:m,weight:"bold",children:y})}),o&&(0,s.jsx)("div",{className:"dbot-accordion__icon",children:C?(0,s.jsx)(u.Z,{}):(0,s.jsx)(x.Z,{})})]}),(0,s.jsx)("div",{className:c()("dbot-accordion__content",{"dbot-accordion__content--open":C}),"data-testid":"accordion-content",children:(0,s.jsx)(_.Z,{as:"span",lineHeight:"s",size:m,children:v})})]})};var h=a(48118);let p=(0,l.Pi)(e=>{var t,a;let{item:n,font_size:l}=e,{ui:r}=(0,i.oR)(),{is_dark_mode_on:o}=r,d=(null==n?void 0:n.className)??"";switch(n.type){case"text":{let e=c()(`qs__description__content ${d}`);return(0,s.jsx)(s.Fragment,{children:null==n||null==(t=n.content)?void 0:t.map(t=>(0,s.jsx)("div",{className:e,children:(0,s.jsx)(_.Z,{size:l,children:(0,h.ZP)(t)})},t))})}case"text_italic":{let e=c()(`qs__description__content italic ${d}`);return(0,s.jsx)(s.Fragment,{children:null==n||null==(a=n.content)?void 0:a.map(t=>(0,s.jsx)("div",{className:e,children:(0,s.jsx)(_.Z,{size:l,children:(0,h.ZP)(t)})},t))})}case"media":{let e=c()(`qs__description__image ${d}`);return(0,s.jsx)("div",{className:e,style:null==n?void 0:n.styles,children:(0,s.jsx)("img",{src:o?n.dark_src??n.src:n.src,alt:n.alt})})}default:return null}}),j=e=>{let{item:t,font_size:a}=e,l=Array.isArray(t)?t:t.slice(1);return(0,s.jsx)(s.Fragment,{children:Array.isArray(l)&&(null==l?void 0:l.map(e=>(0,s.jsx)(n.Fragment,{children:(0,s.jsx)(p,{item:e,font_size:a})},e.id)))})},b=(0,l.Pi)(e=>{let{tutorial_selected_strategy:t,grouped_objects_by_title:a,expanded_subtitles_storage:l,setExpandedSubtitlesStorage:i}=e,{isDesktop:r}=(0,o.F)(),d=t?"s":"xs",c=n.useMemo(()=>r?d:"xs",[r,d]);return(0,s.jsx)(s.Fragment,{children:Array.isArray(a)&&a.map(e=>{var t,a,n,r;let o=(null==e||null==(a=e[0])||null==(t=a.content)?void 0:t[0])??"";return(0,s.jsx)(m,{content_data:{header:o,content:(0,s.jsx)(j,{item:e,font_size:c})},expanded:!!(null==(n=e[0])?void 0:n.expanded),is_cursive:!1,no_collapsible:null==(r=e[0])?void 0:r.no_collapsible,has_subtitle:!!o,expanded_subtitles_storage:l,setExpandedSubtitlesStorage:i,font_size:c},`accordion-${o}`)})})}),v=(0,l.Pi)(e=>{var t;let{formfields:a,active_tab:l,tutorial_selected_strategy:o}=e,{quick_strategy:d}=(0,i.oR)(),{selected_strategy:c}=d,_={},[u,x]=(0,n.useState)(_),m=(0,r.j)()[o||c],h=Array.isArray(null==m?void 0:m.description)?null==m||null==(t=m.description)?void 0:t.reduce((e,t,a)=>{("subtitle_italic"===t.type||"subtitle"===t.type)&&(e.push([]),_[`${t.content[0]}__${c}`.split(" ").join("_").toLowerCase()]=(null==t?void 0:t.expanded)??!1);return e[e.length-1].push({...t,id:a}),e},[]):[{type:"text",content:[null==m?void 0:m.description]}];return(0,s.jsx)(s.Fragment,{children:"TRADE_PARAMETERS"===l?(0,s.jsx)("div",{className:"qs__body__content__form",children:a}):(0,s.jsx)("div",{className:"qs__body__content__description",children:(0,s.jsx)(b,{tutorial_selected_strategy:o,grouped_objects_by_title:h,expanded_subtitles_storage:u,setExpandedSubtitlesStorage:x})})})})},97374:function(e,t,a){a.r(t),a.d(t,{default:()=>p});var s=a(85893),n=a(67294),l=a(96877),i=a(57357),r=a(42575),o=a(63387),d=a.n(o),c=a(73237),_=a(47494),u=a(2502);let x=(0,n.memo)(e=>{let{updateChartType:t,updateGranularity:a,position:n,isDesktop:l}=e;return(0,s.jsxs)(_.ToolbarWidget,{position:n,children:[(0,s.jsx)(_.ChartMode,{portalNodeId:"modal_root",onChartType:t,onGranularity:a}),l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.StudyLegend,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),(0,s.jsx)(_.Views,{portalNodeId:"modal_root",onChartType:t,onGranularity:a,searchInputClassName:"data-hj-whitelist"}),(0,s.jsx)(_.DrawTools,{portalNodeId:"modal_root"}),(0,s.jsx)(_.Share,{portalNodeId:"modal_root"})]})]})});a(22798);let m={},h=(0,l.Pi)(e=>{let{show_digits_stats:t}=e,{common:a,ui:l}=(0,r.oR)(),{chart_store:i,run_panel:o,dashboard:h}=(0,r.oR)(),{chart_type:p,getMarketsOrder:j,granularity:b,onSymbolChange:v,setChartStatus:y,symbol:g,updateChartType:f,updateGranularity:N,updateSymbol:C,setChartSubscriptionId:k,chart_subscription_id:w}=i,T=(0,n.useRef)(w),{isDesktop:E,isMobile:S}=(0,u.F)(),{is_drawer_open:I}=o,{is_chart_modal_visible:A}=h,R={assetInformation:!1,countdown:!0,isHighestLowestMarkerEnabled:!1,language:a.current_language.toLowerCase(),position:l.is_chart_layout_default?"bottom":"left",theme:l.is_dark_mode_on?"dark":"light"};(0,n.useEffect)(()=>()=>{c.Z.api.forgetAll("ticks")},[]),(0,n.useEffect)(()=>{T.current=w},[w]),(0,n.useEffect)(()=>{g||C()},[g,C]);let L=e=>{e&&c.Z.api.forget(e)},O=async(e,t)=>{var a,s,n;try{L(T.current);let s=await c.Z.api.send(e);k(null==s?void 0:s.subscription.id),s&&t(s),1===e.subscribe&&(m[null==s?void 0:s.subscription.id]=null==(a=c.Z.api.onMessage())?void 0:a.subscribe(e=>{let{data:a}=e;t(a)}))}catch(e){(null==e||null==(s=e.error)?void 0:s.code)==="MarketIsClosed"&&t([]),console.log(null==e||null==(n=e.error)?void 0:n.message)}};if(!g)return null;let M=!!(null===c.Z||void 0===c.Z?void 0:c.Z.api);return(0,s.jsx)("div",{className:d()("dashboard__chart-wrapper",{"dashboard__chart-wrapper--expanded":I&&E,"dashboard__chart-wrapper--modal":A&&E}),dir:"ltr",children:(0,s.jsx)(_.SmartChart,{id:"dbot",barriers:[],showLastDigitStats:t,chartControlsWidgets:null,enabledChartFooter:!1,chartStatusListener:e=>y(!e),toolbarWidget:()=>(0,s.jsx)(x,{updateChartType:f,updateGranularity:N,position:E?"top":"bottom",isDesktop:E}),chartType:p,isMobile:S,enabledNavigationWidget:E,granularity:b,requestAPI:e=>c.Z.api.send(e),requestForget:()=>{},requestForgetStream:()=>{},requestSubscribe:O,settings:R,symbol:g,topWidgets:()=>(0,s.jsx)(_.ChartTitle,{onChange:v}),isConnectionOpened:M,getMarketsOrder:j,isLive:!0,leftMargin:80})})}),p=(0,l.Pi)(e=>{let{prefix:t="chart",show_digits_stats:a}=e,{client:l}=(0,r.oR)(),[o]=(0,n.useState)((0,i.Z)()),d=l.loginid?`${t}-${l.loginid}`:`${t}-${o}`;return(0,s.jsx)(h,{show_digits_stats:a},d)})}}]);