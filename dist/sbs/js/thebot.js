let CURRENCY,ws1;var APP_ID="75771";let token=localStorage.getItem("authToken");ws1&&(ws1.close(),ws1=void 0);var isrunning=!1;let tbody=document.getElementById("bot-table-body"),dots=document.querySelectorAll(".dot");var total_stake=0,total_lost=0,total_won=0,total_profit=0,stake=1,duration=5;let contract_type="CALL",symbol="R_100";try{async function t(){token=localStorage.getItem("authToken"),dots.forEach((t,e)=>{t.style.backgroundColor="#666",t.classList.remove("glow")});let t=Number(document.getElementById("init-stake").value),s=Number(document.getElementById("tp").value),l=Number(document.getElementById("sl").value),d=Number(document.getElementById("plier").value);document.getElementById("maxstake").value;let c=Number(document.getElementById("maxruns").value);(stake=t)||(stake=1),duration||(duration=1),d||(d=1.2),(ws1=new WebSocket("wss://ws.binaryws.com/websockets/v3?app_id="+APP_ID)).addEventListener("open",()=>{let t=JSON.stringify({authorize:token,req_id:2111});ws1.readyState!==WebSocket.CLOSED&&ws1.send(t)}),ws1.addEventListener("close",t=>{}),ws1.addEventListener("error",t=>{}),ws1.addEventListener("message",function(u){let i=JSON.parse(u.data);var m=i.echo_req.req_id;let g=i.error;if(g){console.log(i);let t=g.message;isrunning=!1,o(),alert(t)}else if(2111===m&&(console.log("authorized"),function(){let t=JSON.stringify({balance:1,req_id:2112});ws1.readyState!==WebSocket.CLOSED&&ws1.send(t)}()),2112===m&&((CURRENCY=i.balance.currency)?e():console.log("currency not found")),2e3===m){var y=i.proposal_open_contract;if(i.buy,y){var b=y.status;if(y.longcode,a(50),dots.forEach((t,e)=>{t.style.backgroundColor="#666",t.classList.remove("glow")}),document.getElementById("dot1").style.backgroundColor="orange",document.getElementById("dot2").style.backgroundColor="orange",document.getElementById("dot2").classList.add("glow"),"open"!==b){total_stake+=Number(y.buy_price),"won"===b?(total_won++,(stake/=d)<Number(t)&&(stake=t)):(total_lost++,stake*=d),total_profit+=Number(y.profit),n(total_stake,total_lost,total_won,total_profit);let u=new Date(1e3*y.date_start),i=u.getHours().toString().padStart(2,"0"),m=u.getMinutes().toString().padStart(2,"0");u.getSeconds().toString().padStart(2,"0");let g={time:i+":"+m,asset:y.display_name,stake:y.buy_price,payout:y.profit},E=r(g);tbody.insertBefore(E,tbody.firstChild),document.getElementById("dot1").style.backgroundColor="orange",document.getElementById("dot2").style.backgroundColor="orange",document.getElementById("dot3").style.backgroundColor="orange",document.getElementById("dot2").classList.remove("glow"),a(100),document.getElementById("dot3").classList.add("glow"),total_profit>=s&&(isrunning=!1,o(),alert("Take profit was hit")),total_profit<=-l&&(isrunning=!1,o(),alert("Stoploss was hit")),total_won+total_lost>=c&&(isrunning=!1,o(),alert("Maximum trades was hit")),isrunning?setTimeout(()=>{e()},2e3):o()}}}})}function e(){dots.forEach((t,e)=>{t.style.backgroundColor="#666",t.classList.remove("glow")}),document.getElementById("dot1").style.backgroundColor="orange",document.getElementById("dot1").classList.add("glow"),a(0),stake=Number(Number(stake).toFixed(2));let t=JSON.stringify({buy:1,parameters:{amount:stake,basis:"stake",contract_type:contract_type,duration:duration,duration_unit:"t",symbol:symbol,currency:CURRENCY},price:stake,subscribe:1,req_id:2e3});ws1.send(t)}function o(){var t="Stop",e="red";isrunning||(t="Run",e="orange"),document.getElementById("run-btn").style.backgroundColor=e,document.getElementById("run-btn").textContent=t}function n(t,e,o,n){document.getElementById("total-stake").textContent=t.toFixed(2)+" "+CURRENCY,document.getElementById("total-lost").textContent=e,document.getElementById("total-won").textContent=o,document.getElementById("profit-loss").textContent=n.toFixed(2)+" "+CURRENCY}function r(t){let e=document.createElement("tr");return e.innerHTML=`
        <td>${t.time}</td>
        <td>${t.asset}</td>
        <td>${t.stake+" "+CURRENCY}</td>
        <td>${t.payout+" "+CURRENCY}</td>
      `,e}function a(t){document.querySelector(".dots-container").style.setProperty("--progress-right",`calc(${83.33-t/100*66.67}% + 5px)`)}document.getElementById("run-btn").addEventListener("click",()=>{isrunning?isrunning=!1:(isrunning=!0,t()),o()})}catch(t){isrunning=!1,console.error("‚ùå Caught error:",t)}let select=document.getElementById("market-select");select.addEventListener("change",function(){symbol=this.value}),window.onerror=function(t,e,o,n,r){return console.error("Error caught globally:"),console.error(`Message: ${t}`),console.error(`Source: ${e}`),console.error(`Line: ${o}`),console.error(`Column: ${n}`),console.error("Error object:",r),isrunning=!1,!0};